(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{510:function(s,a,e){"use strict";e.r(a);var n=e(22),t=Object(n.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"端打印、算术运算、常用变量"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#端打印、算术运算、常用变量"}},[s._v("#")]),s._v(" 端打印、算术运算、常用变量")]),s._v(" "),e("p",[e("code",[s._v("#!")]),s._v("称为 "),e("a",{attrs:{href:"http://zh.wikipedia.org/zh-hant/Shebang",target:"_blank",rel:"noopener noreferrer"}},[s._v("shebang"),e("OutboundLink")],1)]),s._v(" "),e("p",[e("code",[s._v("cmd1 ; cmd2")]),s._v("执行cmd1后在执行cmd2")]),s._v(" "),e("h2",{attrs:{id:"终端打印"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#终端打印"}},[s._v("#")]),s._v(" 终端打印")]),s._v(" "),e("h3",{attrs:{id:"echo"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#echo"}},[s._v("#")]),s._v(" echo")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("echo hello world\necho 'hello world'\necho \"hello world\"\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("bash不会对单引号内变量（如"),e("code",[s._v("$var")]),s._v("）求值。")]),s._v(" "),e("h3",{attrs:{id:"printf"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#printf"}},[s._v("#")]),s._v(" printf")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('printf "hello world"\n#!/bin/bash\n\nprintf "%-5s %-10s %-4s\\n" NO Name Mark\nprintf "%-5s %-10s %-4.2f\\n" 01 Tom 90.3456\nprintf "%-5s %-10s %-4.2f\\n" 02 Jack 89.2345\nprintf "%-5s %-10s %-4.2f\\n" 03 Jeff 98.4323\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("ul",[e("li",[s._v("%-5s 格式为左对齐且宽度为5的字符串代替（-表示左对齐），不使用则是又对齐。")]),s._v(" "),e("li",[s._v("%-4.2f 格式为左对齐宽度为4，保留两位小数。")])]),s._v(" "),e("p",[e("strong",[s._v("格式替代符")])]),s._v(" "),e("ul",[e("li",[s._v("%b 相对应的参数被视为含有要被处理的转义序列之字符串。")]),s._v(" "),e("li",[s._v("%c ASCII字符。显示相对应参数的第一个字符")]),s._v(" "),e("li",[s._v("%d, %i 十进制整数")]),s._v(" "),e("li",[s._v("%e, %E, %f 浮点格式")]),s._v(" "),e("li",[s._v("%g %e或%f转换，看哪一个较短，则删除结尾的零")]),s._v(" "),e("li",[s._v("%G %E或%f转换，看哪一个较短，则删除结尾的零")]),s._v(" "),e("li",[s._v("%o 不带正负号的八进制值")]),s._v(" "),e("li",[s._v("%s 字符串")]),s._v(" "),e("li",[s._v("%u 不带正负号的十进制值")]),s._v(" "),e("li",[s._v("%x 不带正负号的十六进制值，使用a至f表示10至15")]),s._v(" "),e("li",[s._v("%X 不带正负号的十六进制值，使用A至F表示10至15")]),s._v(" "),e("li",[s._v("%% 字面意义的%")])]),s._v(" "),e("p",[e("strong",[s._v("转义序列")])]),s._v(" "),e("ul",[e("li",[s._v("\\a 警告字符，通常为ASCII的BEL字符")]),s._v(" "),e("li",[s._v("\\b 后退")]),s._v(" "),e("li",[s._v("\\c 抑制（不显示）输出结果中任何结尾的换行字符（只在%b格式指示符控制下的参数字符串中有效），而且，任何留在参数里的字符、任何接下来的参数以及任何留在格式字符串中的字符，都被忽略")]),s._v(" "),e("li",[s._v("\\f 换页（formfeed）")]),s._v(" "),e("li",[s._v("\\n 换行")]),s._v(" "),e("li",[s._v("\\r 回车（Carriage return）")]),s._v(" "),e("li",[s._v("\\t 水平制表符")]),s._v(" "),e("li",[s._v("\\v 垂直制表符")]),s._v(" "),e("li",[s._v("\\ 一个字面上的反斜杠字符")]),s._v(" "),e("li",[s._v("\\ddd 表示1到3位数八进制值的字符，仅在格式字符串中有效")]),s._v(" "),e("li",[s._v("\\0ddd 表示1到3位的八进制值字符")])]),s._v(" "),e("h3",{attrs:{id:"在echo中转义换行符"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#在echo中转义换行符"}},[s._v("#")]),s._v(" 在echo中转义换行符")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('echo -e "包含转义序列的字符串"\necho -e "1\\t2\\t3"\n1 2 3\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h3",{attrs:{id:"打印彩色输出"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#打印彩色输出"}},[s._v("#")]),s._v(" 打印彩色输出")]),s._v(" "),e("p",[e("strong",[s._v("文字色")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('echo -e "\\e[1;31mThis is red text\\e[0m"\nThis is red text\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("ul",[e("li",[s._v("\\e[1;31m 将颜色设置为红色")]),s._v(" "),e("li",[s._v("\\e[0m 将颜色重新置回")])]),s._v(" "),e("p",[s._v("颜色码：重置=0，黑色=30，红色=31，绿色=32，黄色=33，蓝色=34，洋红=35，青色=36，白色=37")]),s._v(" "),e("p",[e("strong",[s._v("背景色")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('echo -e "\\e[1;42mGreed Background\\e[0m"\nGreed Background\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("颜色码：重置=0，黑色=40，红色=41，绿色=42，黄色=43，蓝色=44，洋红=45，青色=46，白色=47")]),s._v(" "),e("p",[e("strong",[s._v("文字闪动")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('echo -e "\\033[37;31;5mMySQL Server Stop...\\033[39;49;0m"\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("红色数字处还有其他数字参数："),e("strong",[s._v("0")]),s._v(" 关闭所有属性、"),e("strong",[s._v("1")]),s._v(" 设置高亮度（加粗）、"),e("strong",[s._v("4")]),s._v(" 下划线、"),e("strong",[s._v("5")]),s._v(" 闪烁、"),e("strong",[s._v("7")]),s._v(" 反显、"),e("strong",[s._v("8")]),s._v(" 消隐")]),s._v(" "),e("h2",{attrs:{id:"算术运算"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#算术运算"}},[s._v("#")]),s._v(" 算术运算")]),s._v(" "),e("h3",{attrs:{id:"整数运算"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#整数运算"}},[s._v("#")]),s._v(" 整数运算")]),s._v(" "),e("p",[e("strong",[e("a",{attrs:{href:"http://man.linuxde.net/let",target:"_blank",rel:"noopener noreferrer"}},[s._v("let"),e("OutboundLink")],1),s._v("运算命令")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("#!/bin/bash\nno1=2;\nno2=3;\nlet result=no1+no2\necho $result\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("ul",[e("li",[s._v("自加操作"),e("code",[s._v("let no++")])]),s._v(" "),e("li",[s._v("自减操作"),e("code",[s._v("let no--")])]),s._v(" "),e("li",[s._v("简写形式"),e("code",[s._v("let no+=10let no-=20")]),s._v("分别等同于"),e("code",[s._v("let no=no+10let no=no-20")])])]),s._v(" "),e("p",[e("strong",[s._v("操作符[]运算方法")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("#!/bin/bash\nno1=2;\nno2=3;\nresult=$[$no1+no2]\necho $result\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("p",[s._v("使用方法和let相似，在"),e("code",[s._v("[]")]),s._v("中可以使"),e("code",[s._v("$")]),s._v("前缀。")]),s._v(" "),e("p",[e("strong",[s._v("(())运算方法")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("#!/bin/bash\nno1=2;\nno2=3;\nresult=$((no1+no2))\necho $result\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("p",[e("strong",[e("a",{attrs:{href:"http://man.linuxde.net/expr",target:"_blank",rel:"noopener noreferrer"}},[s._v("expr"),e("OutboundLink")],1),s._v("运算方法")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("result=`expr 2 + 3`\nresult=$(expr $no1 + 5)\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[e("strong",[s._v("expr的常用运算符")])]),s._v(" "),e("ul",[e("li",[s._v("加法运算：+")]),s._v(" "),e("li",[s._v("减法运算：-")]),s._v(" "),e("li",[s._v("乘法运算：*")]),s._v(" "),e("li",[s._v("除法运算：/")]),s._v(" "),e("li",[s._v("求摸（取余）运算：%")])]),s._v(" "),e("h3",{attrs:{id:"精密计算"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#精密计算"}},[s._v("#")]),s._v(" 精密计算")]),s._v(" "),e("p",[s._v("算术操作高级运算工具："),e("a",{attrs:{href:"http://man.linuxde.net/bc",target:"_blank",rel:"noopener noreferrer"}},[s._v("bc"),e("OutboundLink")],1),s._v("，它可以执行浮点运算和一些高级函数")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('echo "1.212*3" | bc \n3.636\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("设定小数精度（数值范围）")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('echo "scale=2;3/8" | bc\n0.37\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("参数"),e("strong",[s._v("scale=2")]),s._v("是将bc输出结果的小数位设置为2位。")]),s._v(" "),e("p",[e("strong",[s._v("进制转换")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('#!/bin/bash\nabc=192\necho "obase=2;$abc" | bc\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("执行结果为：11000000，这是用bc将十进制转换成二进制。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('#!/bin/bash\nabc=11000000\necho "obase=10;ibase=2;$abc" | bc\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("执行结果为：192，这是用bc将二进制转换为十进制。")]),s._v(" "),e("p",[e("strong",[s._v("计算平方和平方根")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('echo "10^10" | bc\necho "sqrt(100)" | bc\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h2",{attrs:{id:"常用变量"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#常用变量"}},[s._v("#")]),s._v(" 常用变量")]),s._v(" "),e("p",[s._v("结合不同的引导为变量赋值")]),s._v(" "),e("ul",[e("li",[s._v('双引号 "" ：允许通过$符号引用其他变量值')]),s._v(" "),e("li",[s._v("单引号 '' ：禁止引用其他变量值，$视为普通字符")]),s._v(" "),e("li",[s._v("反撇号 `` ：将命令执行的结果输出给变量")])]),s._v(" "),e("h3",{attrs:{id:"用户自定义变量"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#用户自定义变量"}},[s._v("#")]),s._v(" 用户自定义变量")]),s._v(" "),e("p",[s._v("设置变量的作用范围")]),s._v(" "),e("p",[s._v("格式：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("export 变量名...\nexport 变量名=变量值 [...变量名n=变量值n]\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("清除用户自定义变量")]),s._v(" "),e("p",[s._v("格式：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("unset 变量名\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"环境变量"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#环境变量"}},[s._v("#")]),s._v(" 环境变量")]),s._v(" "),e("p",[s._v("环境变量配置文件")]),s._v(" "),e("ul",[e("li",[s._v("全局配置文件：/etc/profile")]),s._v(" "),e("li",[s._v("用户配置文件：~/.bash_profile")])]),s._v(" "),e("p",[s._v("查看环境变量")]),s._v(" "),e("p",[e("a",{attrs:{href:"http://man.linuxde.net/set",target:"_blank",rel:"noopener noreferrer"}},[s._v("set"),e("OutboundLink")],1),s._v("命令可以查看所有的"),e("a",{attrs:{href:"http://www.1987.name/shell",target:"_blank",rel:"noopener noreferrer"}},[s._v("shell"),e("OutboundLink")],1),s._v("变量，其中包括环境变量")]),s._v(" "),e("p",[s._v("常见的环境变量")]),s._v(" "),e("ul",[e("li",[s._v("$USER 查看账户信息")]),s._v(" "),e("li",[s._v("$"),e("a",{attrs:{href:"http://man.linuxde.net/logname",target:"_blank",rel:"noopener noreferrer"}},[s._v("logname"),e("OutboundLink")],1),s._v(" 登录相关信息")]),s._v(" "),e("li",[s._v("$UID")]),s._v(" "),e("li",[s._v("$"),e("a",{attrs:{href:"http://www.1987.name/shell",target:"_blank",rel:"noopener noreferrer"}},[s._v("Shell"),e("OutboundLink")],1)]),s._v(" "),e("li",[s._v("$HOME 家目录")]),s._v(" "),e("li",[s._v("$"),e("a",{attrs:{href:"http://man.linuxde.net/pwd",target:"_blank",rel:"noopener noreferrer"}},[s._v("pwd"),e("OutboundLink")],1)]),s._v(" "),e("li",[s._v("$PATH 用户所输入的命令是在哪些目录中查找")]),s._v(" "),e("li",[s._v("$PS1")]),s._v(" "),e("li",[s._v("$PS2")]),s._v(" "),e("li",[s._v("$RANDOM 随机数")])]),s._v(" "),e("h3",{attrs:{id:"位置变量"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#位置变量"}},[s._v("#")]),s._v(" 位置变量")]),s._v(" "),e("p",[s._v("表示为：$n （n为1~9之间的数字）")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("#./test.sh one two three four five six\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("ul",[e("li",[s._v("$0 表示文件名本身")]),s._v(" "),e("li",[s._v("one就是：$1")]),s._v(" "),e("li",[s._v("two就是：$2")])]),s._v(" "),e("h3",{attrs:{id:"预定义变量"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#预定义变量"}},[s._v("#")]),s._v(" 预定义变量")]),s._v(" "),e("ul",[e("li",[s._v("$# ：命令行中位置参数的个数")]),s._v(" "),e("li",[s._v("$* ：所有位置参数的内容")]),s._v(" "),e("li",[s._v("$? ：上一条命令执行后返回的状态，当返回状态值为0时表示执行正常，非0表示执行异常或出错")]),s._v(" "),e("li",[s._v("$$ ：当前所在进程的进程号")]),s._v(" "),e("li",[s._v("$! ：后台运行的最后一个进程号")]),s._v(" "),e("li",[s._v("$0 ：当前执行的进程/程序名")])]),s._v(" "),e("h1",{attrs:{id:"文件的描述符和重定向"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#文件的描述符和重定向"}},[s._v("#")]),s._v(" 文件的描述符和重定向")]),s._v(" "),e("p",[s._v("文件描述符是和文件的输入、输出相关联的"),e("strong",[s._v("非负整数")]),s._v("，Linux内核（kernel）利用文件描述符（"),e("a",{attrs:{href:"http://man.linuxde.net/file",target:"_blank",rel:"noopener noreferrer"}},[s._v("file"),e("OutboundLink")],1),s._v(" descriptor）来访问文件。打开现存文件或新建文件时，内核会返回一个文件描述符。读写文件也需要使用文件描述符来指定待读写的文件。常见的文件描述符是"),e("strong",[s._v("stdin")]),s._v("、"),e("strong",[s._v("stdout")]),s._v("和"),e("strong",[s._v("stderr")]),s._v("。")]),s._v(" "),e("h3",{attrs:{id:"系统预留文件描述符"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#系统预留文件描述符"}},[s._v("#")]),s._v(" 系统预留文件描述符")]),s._v(" "),e("ul",[e("li",[e("strong",[s._v("0")]),s._v(" —— stdin（标准输入）")]),s._v(" "),e("li",[e("strong",[s._v("1")]),s._v(" —— stdout（标准输出）")]),s._v(" "),e("li",[e("strong",[s._v("2")]),s._v(" —— stderr（标准错误）")])]),s._v(" "),e("p",[s._v("重定向将输入文本"),e("strong",[s._v("通过截取模式")]),s._v("保存到文件：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('echo "this is a text line one" > test.txt\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("写入到文件之前，文件内容首先会被清空。")]),s._v(" "),e("p",[s._v("重定向将输入文本"),e("strong",[s._v("通过追加模式")]),s._v("保存到文件：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('echo "this is a text line one" >> test.txt\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("写入到文件之后，会追加到文件结尾。")]),s._v(" "),e("p",[e("strong",[s._v("标准错误输出：")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("[root@localhost text]# cat linuxde.net\ncat: linuxde.net: No such file or directory\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[e("strong",[s._v("标准错误输出的重定向方法：")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("方法一：\n[root@localhost text]# cat linuxde.net 2> out.txt  //没有任何错误提示，正常运行。\n方法二：\n[root@localhost text]# cat linuxde.net &> out.txt\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("p",[s._v("因为错误信息被保存到了out.txt文件中。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("[root@localhost text]# cat linuxde.net 2> /dev/null\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("将错误输出丢弃到"),e("code",[s._v("/dev/null")]),s._v("中，/dev/null是一个特殊的设备文件，这个文件接受到任何数据都会被丢系，通常被称为位桶、黑洞。")]),s._v(" "),e("h3",{attrs:{id:"tee命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#tee命令"}},[s._v("#")]),s._v(" tee命令")]),s._v(" "),e("p",[s._v("tee命令可以将数据重定向到文件，另一方面还可以提供一份重定向数据的副本作为后续命令的stdin。")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://image.aomtop.com/i/2022/06/13/62a6e32de3cf4.png",alt:"文件的描述符和重定向"}})]),s._v(" "),e("p",[s._v("在终端打印stdout同时重定向到文件中：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("ls | tee out.txt\n1.sh\n1.txt\n2.txt\neee.tst\nEEE.tst\none\nout.txt\nstring2\nwww.pdf\nWWW.pdf\nWWW.pef\n[root@localhost text]# ls | tee out.txt | cat -n\n     1  1.sh\n     2  1.txt\n     3  2.txt\n     4  eee.tst\n     5  EEE.tst\n     6  one\n     7  out.txt\n     8  string2\n     9  www.pdf\n    10  WWW.pdf\n    11  WWW.pef\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br")])]),e("h3",{attrs:{id:"重定向脚本内的文本片段-多行文本"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#重定向脚本内的文本片段-多行文本"}},[s._v("#")]),s._v(" 重定向脚本内的文本片段（多行文本）")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("#!/bin/bash\ncat <<EOF>text.log\nthis is a text line1\nthis is a text line2\nthis is a text line3\nEOF\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("p",[s._v("在"),e("code",[s._v("cat <<EOF>text.log")]),s._v("与下一个"),e("code",[s._v("EOF")]),s._v("行之间的所有文本都会当作stdin数据输入到text.log中。")]),s._v(" "),e("h3",{attrs:{id:"自定义文件描述符"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#自定义文件描述符"}},[s._v("#")]),s._v(" 自定义文件描述符")]),s._v(" "),e("p",[s._v("除了0、1和2分别是"),e("strong",[s._v("stdin")]),s._v("、"),e("strong",[s._v("stdout")]),s._v("和"),e("strong",[s._v("stderr")]),s._v("的系统预留描述符，我们还可以使用"),e("code",[s._v("exec命令")]),s._v("创建自定义文件描述符，文件的的打开模式有"),e("strong",[s._v("只读模式")]),s._v("、"),e("strong",[s._v("截断模式")]),s._v("和"),e("strong",[s._v("追加模式")]),s._v("。")]),s._v(" "),e("p",[e("strong",[s._v("< 操作符用于从文件中读取至stdin：")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("echo this is a test line > input.txt\nexec 3<input.txt    //自定义文件描述符3打开并读取文件\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("在命令中使用文件描述符3：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("cat <&3\nthis is a test line\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("这里需要注意只能读取一次，如果再次使用需要重新创建文件描述符。")]),s._v(" "),e("p",[e("strong",[s._v("> 操作符用于截断模式的文件写入（数据在文件内容被截断之后写入）：")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("exec 4>output.txt\necho this is a new line >&4\ncat output.txt\nthis is a new line\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("p",[e("strong",[s._v(">> 操作符用于追加模式的文件写入（添加数据到文件中，原有数据不会丢失）：")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("exec 5>>output.txt\necho this is a appended line >&5\ncat output.txt\nthis is a new line\nthis is a appended lin\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("h1",{attrs:{id:"数组、关联数组和别名使用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#数组、关联数组和别名使用"}},[s._v("#")]),s._v(" 数组、关联数组和别名使用")]),s._v(" "),e("p",[e("strong",[s._v("数组")]),s._v("作为一种特殊的数据结构在任何一种编程语言中都有它的一席之地，数组在Shell脚本中也是非常重要的组成部分，它借助索引将多个独立的数据存储为一个集合。")]),s._v(" "),e("h3",{attrs:{id:"数组"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#数组"}},[s._v("#")]),s._v(" 数组")]),s._v(" "),e("p",[s._v("普通数组只能使用整数作为数组的索引值。")]),s._v(" "),e("p",[e("strong",[s._v("定义数组")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("格式：array[key]=value\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("单行一列值：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("array_pt=( 1 2 3 4 5 6 )\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("一组索引值：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('array_pt[0]="text1"\narray_pt[1]="text2"\narray_pt[2]="text3"\narray_pt[3]="text4"\narray_pt[4]="text5"\narray_pt[5]="text6"\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("p",[e("strong",[s._v("打印数组")])]),s._v(" "),e("p",[s._v("打印指定索引的数组元素内容：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("#echo ${array_pt[0]}\ntext1\nindex=3\n#echo ${array_pt[$index]}\ntext4\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("p",[s._v("打印数组中的所有值：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("#echo ${array_pt[*]}\n或者\n#echo ${array_pt[@]}\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("打印数组长度（即数组中元素的个数）：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("#echo ${#array_pt[*]}\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[e("strong",[s._v("删除数组：")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("unset array_pt[1]  //删除数组中第一个元素\nunset array_pt     //删除整个数组\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[e("strong",[s._v("数组的提取：")])]),s._v(" "),e("p",[s._v("例如定义了数组 array=( [0]=one [1]=two [2]=three [3]=four )")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("${array[@]:0}    //除去所有元素\n${array[@]:1}    //出去第一个元素后的所有元素\n#echo ${array[@]:0:2}\none two\n#echo ${array[@]:1:2}\ntwo three\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("p",[e("strong",[s._v("子串删除：")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("#echo ${array[@]:0}\none two three four\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("左边开始最短的匹配"),e("code",[s._v(':"t*e"')]),s._v("，这将匹配到"),e("code",[s._v('"thre"')])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("#echo ${array[@]#t*e}\none two e four\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("左边开始最长的匹配，这将匹配到"),e("code",[s._v('"three"')])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("#echo ${array[@]##t*e}\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("从字符串的结尾开始最短的匹配")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("#echo ${array[@]%o}\none tw three four\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("从字符串的结尾开始最长的匹配")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("# echo ${array[@]%%o}\none tw three four\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[e("strong",[s._v("子串替换：")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("#echo ${array[@]/o/m}\nmne twm three fmur\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("没有指定替换子串，则删除匹配到的子符")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("#echo ${array[@]//o/}\nne tw three fur\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("替换字符串前端子串")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("#echo ${array[@]/#o/k}\nkne two three four\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("替换字符串后端子串")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("#echo ${array[@]/%o/k}\none twk three four\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h3",{attrs:{id:"关联数组"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#关联数组"}},[s._v("#")]),s._v(" 关联数组")]),s._v(" "),e("p",[e("strong",[s._v("关联数组")]),s._v("从bash 4.0开始被引入，关联数组的索引值可以使用任意的文本。关联数组在很多操作中很有用。")]),s._v(" "),e("p",[e("strong",[s._v("关联数组的声明：")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("declare -A array_var\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("使用内嵌索引-值列表法将元素添加到关联数组：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("array_var=( [one]=one-1 [two]=two-2 [three]=three-3 [four]=four-4 [five]=five-5 [six]=six-6 )\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("使用独立的索引-值进行赋值：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("array_var[one]=one-1\narray_var[two]=two-2\narray_var[three]=three-3\narray_var[four]=four-4\narray_var[five]=five-5\narray_var[six]=six-6\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("p",[s._v("关联数组的打印方法跟普通数组用法一样。")]),s._v(" "),e("p",[e("strong",[s._v("列出数组索引值：")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("#echo ${!array_var[*]}\nfour one five six two three\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("列出索引值的方法也可以用在普通数组上。")]),s._v(" "),e("h3",{attrs:{id:"别名"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#别名"}},[s._v("#")]),s._v(" 别名")]),s._v(" "),e("p",[e("strong",[s._v("别名")]),s._v("就是提供一种便捷的方式来完成某些长串命令的操作。省去不必要的麻烦，提高效率。一般可以是函数或者"),e("code",[s._v("alias命令")]),s._v("来实现。")]),s._v(" "),e("p",[e("strong",[s._v("alias举例")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("alias nginxrestart='/usr/local/webserver/nginx/sbin/nginx -s reload'\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("这样设置之后以后可以使用nginxrestart这个命令来代替"),e("code",[s._v("/usr/local/webserver/nginx/sbin/nginx -s reload")]),s._v("了。这样设置重启之后就会失效，所以需要将它放入"),e("code",[s._v("~/.bashrc")]),s._v("文件中。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("echo 'alias nginxrestart=\"/usr/local/webserver/nginx/sbin/nginx -s reload\"' >> ~/.bashrc \n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[e("strong",[s._v("查看系统已经定义的别名")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("[root@mail text]# alias \nalias cp='cp -i'\nalias l.='ls -d .* --color=tty'\nalias ll='ls -l --color=tty'\nalias ls='ls --color=tty'\nalias mv='mv -i'\nalias rm='rm -i'\nalias vi='vim'\nalias which='alias | /usr/bin/which --tty-only --read-alias --show-dot --show-tilde'\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br")])]),e("p",[e("strong",[s._v("别名转义")])]),s._v(" "),e("p",[s._v("有些命令不是总是希望使用别名，可以在命令之前输入反斜杠"),e("code",[s._v("\\")]),s._v("来忽略所定义过的别名。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("#\\command\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h1",{attrs:{id:"shell函数的定义、执行、传参和递归函数"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#shell函数的定义、执行、传参和递归函数"}},[s._v("#")]),s._v(" Shell函数的定义、执行、传参和递归函数")]),s._v(" "),e("p",[s._v("Bash（Bourne Again shell）也跟其他编程语言一样也支持函数，一般在编写大型脚本中需要用到，它可以将shell脚本程序划分成一个个功能相对独立的代码块，使代码的模块化更好，结构更加清晰，并可以有效地减少程序的代码量。但是bash作为一种解释性语言，bash 在编程能力方面提供的支持并不像其他编译性的语言（例如 C 语言）那样完善，执行效率也会低很多。")]),s._v(" "),e("h3",{attrs:{id:"shell函数的定义、执行与传参"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#shell函数的定义、执行与传参"}},[s._v("#")]),s._v(" shell函数的定义、执行与传参")]),s._v(" "),e("p",[e("strong",[s._v("定义")])]),s._v(" "),e("p",[s._v("格式1")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("function name() {\n command sequence(命令序列);\n}\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("格式2")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("name() {\n Command sequence(命令序列);\n}\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("可以带"),e("code",[s._v("function name()")]),s._v("定义，也可以直接"),e("code",[s._v("name()")]),s._v("定义，不带任何参数。")]),s._v(" "),e("p",[e("strong",[s._v("执行")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("name;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("直接使用函数名称即可调用某个函数。")]),s._v(" "),e("p",[e("strong",[s._v("传递参数")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('#!/bin/bash\naa="this is aa"\nbb="this is bb"\nfunction name() {                  #定义函数name\n        local cc="this is cc"      #定义局部变量$cc\n        local dd="this is dd"      #定义局部变量$dd\n        echo $aa, $bb              #访问参数1和参数2\n        echo $cc                   #打印局部变量\n        return 0                   #shell函数返回值是整形，并且在0~257之间。\n}\n\necho $dd                           #这里将会打印不生效，因为dd是局部变量。\nname                               #使用函数name\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br")])]),e("p",[s._v("上例中：")]),s._v(" "),e("ul",[e("li",[s._v("aa 和 bb 定义的是全局变量。")]),s._v(" "),e("li",[s._v("cc 和 dd 定义的是局部变量，只能在函数 name 中使用。")]),s._v(" "),e("li",[e("code",[s._v("$aa")]),s._v("是第一个参数"),e("code",[s._v("$1")]),s._v("，"),e("code",[s._v("$bb")]),s._v("是第一个参数"),e("code",[s._v("$2")]),s._v("，以此类推"),e("code",[s._v("$n")]),s._v("是第n个参数"),e("code",[s._v("$n")]),s._v("。")]),s._v(" "),e("li",[e("code",[s._v("return 0")]),s._v("参数返回，可以显示加："),e("code",[s._v("return 返回")]),s._v("，如果不加，将以最后一条命令运行结果作为返回值。")])]),s._v(" "),e("h3",{attrs:{id:"递归函数"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#递归函数"}},[s._v("#")]),s._v(" 递归函数")]),s._v(" "),e("p",[s._v("bash也支持递归函数（能够调用自身的函数）例如：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("#!/bin/bash\n\nfunction name() {\n        echo $1\n        name hello\n        sleep 1\n}\nname\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("p",[s._v("运行此脚本后不断打印出hello，按"),e("code",[s._v("Ctrl+C")]),s._v("结束。")]),s._v(" "),e("p",[e("strong",[s._v("递归经典：fork 炸弹")])]),s._v(" "),e("p",[s._v("可能很多人都曾经听说过 fork 炸弹，它实际上只是一个非常简单的递归程序，程序所做的事情只有一样：这个递归函数能够调用自身，不算的生成新的进程，这会导致这个简单的程序迅速耗尽系统里面的所有资源，造成拒绝服务攻击。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v(".()\n{\n.|.&\n}\n;\n.\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("ul",[e("li",[s._v("第 1 行说明下面要定义一个函数，函数名为小数点，没有可选参数。")]),s._v(" "),e("li",[s._v("第 2 行表示函数体开始。")]),s._v(" "),e("li",[s._v("第 3 行是函数体真正要做的事情，首先它递归调用本函数，然后利用管道调用一个新进程（它要做的事情也是递归调用本函数），并将其放到后台执行。")]),s._v(" "),e("li",[s._v("第 4 行表示函数体结束。")]),s._v(" "),e("li",[s._v("第 5 行并不会执行什么操作，在命令行中用来分隔两个命令用。从总体来看，它表明这段程序包含两个部分，首先定义了一个函数，然后调用这个函数。")]),s._v(" "),e("li",[s._v("第 6 行表示调用本函数。")])]),s._v(" "),e("h1",{attrs:{id:"条件测试操作与流程控制语句"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#条件测试操作与流程控制语句"}},[s._v("#")]),s._v(" 条件测试操作与流程控制语句")]),s._v(" "),e("p",[s._v("在编写Shell脚本时候，经常需要判断两个字符串是否相等，检查文件状态或者是数字的测试等。Shell提供了对字符串、文件、数值等内容的条件测试以及逻辑流程控制。")]),s._v(" "),e("h2",{attrs:{id:"条件测试操作"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#条件测试操作"}},[s._v("#")]),s._v(" 条件测试操作")]),s._v(" "),e("p",[s._v("程序中的流程控制是由比较和测试语句来处理的，bash具备多种与UNIX系统级特性相兼容的执行测试方法。")]),s._v(" "),e("h3",{attrs:{id:"常用测试操作"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#常用测试操作"}},[s._v("#")]),s._v(" 常用测试操作")]),s._v(" "),e("p",[e("code",[s._v("test")]),s._v("命令，测试特定的表达式是否成立，当条件成立时，命令执行后的返回值为0，否则为其他数值。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("格式1\ntest 条件表达式\n格式2\n[ 条件表达式 ]       //常用格式，使用方括号时，要注意在条件两边加上空格。\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("p",[s._v("常见测试类型")]),s._v(" "),e("ul",[e("li",[s._v("测试文件状态")]),s._v(" "),e("li",[s._v("字符串的比较")]),s._v(" "),e("li",[s._v("整数值的比较")]),s._v(" "),e("li",[s._v("逻辑测试")])]),s._v(" "),e("h3",{attrs:{id:"测试文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#测试文件"}},[s._v("#")]),s._v(" 测试文件")]),s._v(" "),e("table",[e("thead",[e("tr",[e("th",[s._v("常用的文件测试操作符")]),s._v(" "),e("th",[s._v("说明")])])]),s._v(" "),e("tbody",[e("tr",[e("td",[s._v("-d 文件,d的全称是directory")]),s._v(" "),e("td",[s._v("文件存在且为目录则为真")])]),s._v(" "),e("tr",[e("td",[s._v("-f 文件,f的全称是file")]),s._v(" "),e("td",[s._v("文件存在且为普通文件则为真")])]),s._v(" "),e("tr",[e("td",[s._v("-e 文件,e的全称是exist")]),s._v(" "),e("td",[s._v("文件存在则为真，-e不辨别是文件还是目录")])]),s._v(" "),e("tr",[e("td",[s._v("-r 文件,r的全称是read")]),s._v(" "),e("td",[s._v("文件存在且可读，则为真")])]),s._v(" "),e("tr",[e("td",[s._v("-s 文件,s的全称是size")]),s._v(" "),e("td",[s._v("文件存在且文件大小不为0，则为真")])]),s._v(" "),e("tr",[e("td",[s._v("-w 文件,w的全称是write")]),s._v(" "),e("td",[s._v("文件存在且可写，则为真")])]),s._v(" "),e("tr",[e("td",[s._v("-x 文件,x的全称是executable")]),s._v(" "),e("td",[s._v("文件存在且可执行，则为真")])]),s._v(" "),e("tr",[e("td",[s._v("-L 文件,L的全称是Link")]),s._v(" "),e("td",[s._v("文件存在且为链接文件，则为真")])]),s._v(" "),e("tr",[e("td",[s._v("f1 -nt f2,nt的全称是newer than")]),s._v(" "),e("td",[s._v("文件f1比文件f2新,则为真;根据文件修改时间对比")])]),s._v(" "),e("tr",[e("td",[s._v("f1 -ot f2,nt的全称是older than")]),s._v(" "),e("td",[s._v("文件f1比文件f2旧,则为真;根据文件修改时间对比")])])])]),s._v(" "),e("p",[s._v("如果需要获取更多信息，则使用"),e("code",[s._v("man test")])]),s._v(" "),e("p",[s._v("操作符：")]),s._v(" "),e("ul",[e("li",[s._v("-d：测试是否为目录，是则为真（Directory）")]),s._v(" "),e("li",[s._v("-e：测试目录或文件是否存在，存在则为真（Exist）")]),s._v(" "),e("li",[s._v("-f：测试是否为文件，是则为真（"),e("a",{attrs:{href:"http://man.linuxde.net/file",target:"_blank",rel:"noopener noreferrer"}},[s._v("file"),e("OutboundLink")],1),s._v("）")]),s._v(" "),e("li",[s._v("-r：测试当前用户是否有权限读取，是则为真（"),e("a",{attrs:{href:"http://man.linuxde.net/read",target:"_blank",rel:"noopener noreferrer"}},[s._v("read"),e("OutboundLink")],1),s._v("）")]),s._v(" "),e("li",[s._v("-"),e("a",{attrs:{href:"http://man.linuxde.net/w",target:"_blank",rel:"noopener noreferrer"}},[s._v("w"),e("OutboundLink")],1),s._v("：测试当前用户是否有权限写入，是这为真（"),e("a",{attrs:{href:"http://man.linuxde.net/write",target:"_blank",rel:"noopener noreferrer"}},[s._v("write"),e("OutboundLink")],1),s._v("）")]),s._v(" "),e("li",[s._v("-x：测试当前用户是否可执行该文件，可执行则为真（Excute）")]),s._v(" "),e("li",[s._v("-L：测试是否为符号链接文件，是则为真（Link）")]),s._v(" "),e("li",[s._v("-nt：file1 -nt file2 如果 file1 比 file2 新（修改时间），则为真")]),s._v(" "),e("li",[s._v("-ot：file1 -ot file2 如果 file1 比 file2 旧（修改时间），则为真")])]),s._v(" "),e("h3",{attrs:{id:"字符串比较"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#字符串比较"}},[s._v("#")]),s._v(" 字符串比较")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("格式\n[ 字符串1 = 字符串2 ]\n[ 字符串1 != 字符串2 ]\n[ -z 字符串 ]\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("p",[s._v("操作符：")]),s._v(" "),e("ul",[e("li",[s._v("=：字符串内容相同则为真，就是说包含的文本一摸一样。")]),s._v(" "),e("li",[s._v("!=：字符串内容不同，则为真（!号表示相反的意思）")]),s._v(" "),e("li",[s._v("-z：字符串内容为空（长度为零）则为真")]),s._v(" "),e("li",[s._v("-n：字符串内容非空（长度非零）则为真")]),s._v(" "),e("li",[s._v("<：string1 < string2 如果string1在本地的字典序列中排在string2之前，则为真")]),s._v(" "),e("li",[s._v(">：string2 如果string1在本地的字典序列中排在string2之后，则为真")])]),s._v(" "),e("p",[s._v("注意点：")]),s._v(" "),e("p",[s._v("1、字符串的 “等于” 比较，为了与"),e("a",{attrs:{href:"http://zh.wikipedia.org/wiki/POSIX",target:"_blank",rel:"noopener noreferrer"}},[s._v("POSIX"),e("OutboundLink")],1),s._v("一致，在"),e("code",[s._v("[]")]),s._v("中使用"),e("code",[s._v("=")]),s._v("，（尽管"),e("code",[s._v("==")]),s._v("也可以可以用的）\n2、注意在"),e("code",[s._v("=")]),s._v("前后各有一个空格，如果没有空格就是赋值的关系，不是比较的关系。\n3、字符串的"),e("code",[s._v("> <")]),s._v("比较运算符，一般放在"),e("code",[s._v("[[ ]]")]),s._v("之中，而不是"),e("code",[s._v('test ("[]")')]),s._v("\n4、字符串的"),e("code",[s._v("> <")]),s._v("比较的结果，与本地的locale有关，是按照其字典序列进行比较的")]),s._v(" "),e("h3",{attrs:{id:"整数值比较"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#整数值比较"}},[s._v("#")]),s._v(" 整数值比较")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("格式\n[ 整数1 操作符 整数2 ]\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("ul",[e("li",[s._v("-eq：等于（equal）")]),s._v(" "),e("li",[s._v("-ne：不等于（not equal）")]),s._v(" "),e("li",[s._v("-gt：大于（Greater than）")]),s._v(" "),e("li",[s._v("-lt：小于（lesser than）")]),s._v(" "),e("li",[s._v("-le：小于等于（lesser or equal）")]),s._v(" "),e("li",[s._v("-ge：大于等于（Greater or equal）")])]),s._v(" "),e("h3",{attrs:{id:"逻辑测试"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#逻辑测试"}},[s._v("#")]),s._v(" 逻辑测试")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("格式\n[ 表达式1 ] 操作符 [ 表达式2 ] ...\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("操作符")]),s._v(" "),e("ul",[e("li",[s._v("-a 或 && ：逻辑与，“而且”的意思，前后两个表达式都成立时整个测试结果才为真，否则为假")]),s._v(" "),e("li",[s._v("-o 或 || ： 逻辑或，“或者”的意思，操作符两边至少一个为真时，结果为真，否为为假")]),s._v(" "),e("li",[s._v("! ：逻辑否，当制定条件不成立时，返回结果为真")])]),s._v(" "),e("h2",{attrs:{id:"流程控制语句"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#流程控制语句"}},[s._v("#")]),s._v(" 流程控制语句")]),s._v(" "),e("p",[s._v("Shell有一套自己的流程控制语句，其中包括条件语句、循环语句、选择语句等。")]),s._v(" "),e("h3",{attrs:{id:"if条件语句"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#if条件语句"}},[s._v("#")]),s._v(" if条件语句")]),s._v(" "),e("p",[e("strong",[s._v("if 单分支")]),s._v("：当“条件成立”时执行相应的操作。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("if 条件测试操作\n  then 命令序列\nfi\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[e("img",{attrs:{src:"https://image.aomtop.com/i/2022/06/13/62a6e32e1dbf6.png",alt:"if单分支"}}),s._v("\nif 单分支结构流程图")]),s._v(" "),e("p",[s._v("示例")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('#!/bin/bash\n#当/boot分区的空间使用超过80%，就输出报警信息。\n\nuse=`df -hT | grep "/boot" | awk \'{print $6}\' | cut -d "%" -f1`\nif [ $use -gt 80 ];\n  then\n    echo "Warning!!/boot disk is full"\nfi\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("p",[e("strong",[s._v("if 双分支")]),s._v("：当“条件成立”、“条件不成立”时执行不同操作。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("if 条件测试命令\n  then 命令序列1\n  else 命令序列2\nfi\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("p",[e("img",{attrs:{src:"https://image.aomtop.com/i/2022/06/13/62a6e32e473a2.png",alt:"if双分支"}}),s._v("\nif 双分支结构流程图")]),s._v(" "),e("p",[s._v("示例")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('#!/bin/bash\n#判断iptables是否在运行，如果已经在运行提示信息，如果没有开启它。\nservice iptables status &> /dev/null\nif [ $? -eq 0 ];\n  then\n    echo "iptables service is running"\n  else\n    service iptables restart\nfi\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br")])]),e("p",[e("strong",[s._v("if 多分支")]),s._v("：相当于if语句嵌套，针对多个条件执行不同操作。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("if 条件测试命令1 ; then\n 命令序列1\nelif 条件测试命令2 ; then\n 命令序列2\nelif ...\nelse\n 命令序列n\nfi\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("p",[e("img",{attrs:{src:"https://image.aomtop.com/i/2022/06/13/62a6e32e71706.png",alt:"if多分支"}}),s._v("\nif多分支结构流程图")]),s._v(" "),e("h3",{attrs:{id:"for循环语句"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#for循环语句"}},[s._v("#")]),s._v(" for循环语句")]),s._v(" "),e("p",[s._v("根据标量的不同取值，重复执行一组命令操作。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("for 变量名 in 取值列表\ndo\n 命令序列\ndone\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("p",[e("img",{attrs:{src:"https://image.aomtop.com/i/2022/06/13/62a6e32e9ec86.png",alt:"for循环"}}),s._v("\nfor循环语句流程图")]),s._v(" "),e("p",[e("strong",[s._v("for循环的几种应用形式：")])]),s._v(" "),e("p",[s._v("最基本的for循环： （传统的形式，for var in …)")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("#!/bin/bash\nfor x in one two three four\ndo\n    echo number $x\ndone \n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("p",[e("code",[s._v("for")]),s._v("循环总是接收"),e("code",[s._v("in")]),s._v("语句之后的某种类型的字列表。在本例中，指定了四个英语单词，但是字列表也可以引用磁盘上的文件，甚至文件通配符。")]),s._v(" "),e("p",[s._v("对目录中的文件做for循环")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('#!/bin/bash\nfor x in /var/log/*\ndo\n   #echo "$x is a file living in /var/log"\n   echo $(basename $x) is a file living in /var/log\ndone \n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("p",[s._v("这个"),e("code",[s._v("$x")]),s._v("获得的是绝对路径文件名，可以使用"),e("code",[s._v("basename")]),s._v("可执行程序来除去前面的路径信息。如果只引用当前工作目录中的文件（例如如果输入"),e("code",[s._v("for x in *")]),s._v("），则产生的文件列表将没有路径信息的前缀。")]),s._v(" "),e("p",[s._v("对位置参数做for循环")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('#!/bin/bash\nfor thing in "$@"\ndo\n   echo you typed ${thing}.\ndone \n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("p",[s._v("for循环中用"),e("code",[s._v("seq")]),s._v("产生循环次数，加上C语言形式的for循环语句")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('#!/bin/bash\necho "for: Traditional form: for var in ..."\nfor j in $(seq 1 5)\ndo\n  echo $j\ndone\necho "for: C language form: for (( exp1; exp2; exp3 ))"\nfor (( i=1; i<=5; i++ ))\ndo\n  echo "i=$i"\ndone \n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br")])]),e("p",[s._v("对于固定次数的循环，可以通过"),e("code",[s._v("seq")]),s._v("命令来实现，就不需要变量的自增了，这里的C语言for循环风格是挺熟悉的吧。")]),s._v(" "),e("h3",{attrs:{id:"while循环语句"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#while循环语句"}},[s._v("#")]),s._v(" while循环语句")]),s._v(" "),e("p",[s._v("重复测试指令的条件，只要条件为真则反复执行对应的命令操作，直到条件为假。如果使用"),e("code",[s._v("true")]),s._v("作为循环条件能够产生无限循环。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("while 命令表达式\ndo\n  命令列表\ndone\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("p",[e("img",{attrs:{src:"https://image.aomtop.com/i/2022/06/13/62a6e32ec9bf6.png",alt:"while循环"}}),s._v("\nwhile循环流程图")]),s._v(" "),e("p",[s._v("示例")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('#!/bin/bash\n#批量添加20个系统账户用户名依次为user1~20\ni=1\nwhile [ $i -le 20 ]\ndo\n useradd user$1\n echo "123456" | passwd --stdin user$i &> /dev/null\n i=`expr $i + 1`\ndone\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br")])]),e("p",[s._v("只要特定条件为真，”while” 语句就会循环执行。")]),s._v(" "),e("h3",{attrs:{id:"case多重分支语句"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#case多重分支语句"}},[s._v("#")]),s._v(" case多重分支语句")]),s._v(" "),e("p",[s._v("根据变量的不通取值，分别执行不同的命令操作。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("case 变量值 in\n 模式1)\n 命令序列1\n;;\n 模式2)\n 命令序列2\n;;\n ……\n*)\n 默认执行的命令序列\n;;\nesac\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br")])]),e("p",[e("img",{attrs:{src:"https://image.aomtop.com/i/2022/06/13/62a6e32f015eb.png",alt:"case循环"}}),s._v("\ncase多重分支语句流程图")]),s._v(" "),e("p",[s._v("示例")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('#!/bin/bash\ncase $1 in\nstart)\n  echo "start mysql"\n;;\nstop)\n  echo "stop mysql"\n;;\n*)\n  echo "usage: $0 start|stop"\n;;\nesac\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br")])]),e("h3",{attrs:{id:"until循环语句"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#until循环语句"}},[s._v("#")]),s._v(" until循环语句")]),s._v(" "),e("p",[s._v("根据条件执行重复操作，直到条件成立为止。"),e("code",[s._v("Until")]),s._v("语句提供了与"),e("code",[s._v("while")]),s._v("语句相反的功能：只要特定条件为假，它们就重复循环，直到条件为真。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("until 条件测试命令\ndo\n 命令序列\ndone\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("p",[e("img",{attrs:{src:"https://image.aomtop.com/i/2022/06/13/62a6e32f2f405.png",alt:"until循环"}}),s._v("\nuntil循环流程图")]),s._v(" "),e("p",[s._v("示例")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("#!/bin/bash\nmyvar=1\nuntil [ $myvar -gt 10 ]\ndo\n echo $myvar\n myvar=$(( $myvar + 1 ))\ndone \n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("h3",{attrs:{id:"shift迁移语句"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#shift迁移语句"}},[s._v("#")]),s._v(" shift迁移语句")]),s._v(" "),e("p",[s._v("用于迁移位置变量，将"),e("code",[s._v("$1~$9")]),s._v("依次向左传递。")]),s._v(" "),e("p",[s._v("例如：若当前脚本程序获得的位置变量如下：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("$1=file1、$2=file2、$3=file3、$4=file4\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("执行一次shift命令后，各位置变量为：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("$2=file2、$3=file3、$4=file4\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("在执行一次：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("$3=file3、$4=file4\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("示例")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('#!/bin/bash\nres=0\nwhile [ $# -gt 0 ]\ndo\n res=`expr $res + $1`\n shift\ndone\necho "the sum is:$res"\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("h3",{attrs:{id:"循环控制语句"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#循环控制语句"}},[s._v("#")]),s._v(" 循环控制语句")]),s._v(" "),e("p",[e("strong",[s._v("break语句")]),s._v("：在"),e("code",[s._v("for、while、until")]),s._v("等循环语句中，用于跳出当前所在的循环体，执行循环体之后的语句。")]),s._v(" "),e("p",[s._v("在while中的示例：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("while\n do\ncommands\ncommands\n\n break--------+\n              |\ncommands      |\ncommands      | 跳出当前循环（通常在循环体中与条件语句一起使用）\n              |\n done         |\n              |\ncommands<-----+\ncommands\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br")])]),e("p",[e("strong",[s._v("continue语句")]),s._v("：在"),e("code",[s._v("for、while、until")]),s._v("等循环语句中，用于跳过循环体内余下的语句，重新判断条件以便执行下一次循环。")]),s._v(" "),e("p",[s._v("在while中的示例：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("while<-------+\n do          |\n             |\ncommands     | 跳回当前循环，重新开始下一次循环（通常在循环体中与条件语句一起使用）\ncommands     |\n             |\n continue----+\n\ncommands\ncommands\ncommands\n done\ncommands\ncommands\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br")])]),e("h1",{attrs:{id:"内部字段分隔符ifs、脚本调试debug"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#内部字段分隔符ifs、脚本调试debug"}},[s._v("#")]),s._v(" 内部字段分隔符IFS、脚本调试DEBUG")]),s._v(" "),e("h3",{attrs:{id:"内部字段分隔符"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#内部字段分隔符"}},[s._v("#")]),s._v(" 内部字段分隔符")]),s._v(" "),e("p",[s._v("**内部字段分隔符(Internal Field Separator, IFS)**是shell脚本中的一个特殊变量，在处理文本数据很有用。把单个数据流划分成不同的数据元素的定界符，内部字段分隔符就是用于特定用途的定界符。IFS是存储定界符的环境变量，是shell环境中的默认定界符字符串，默认值为空白字符（换行符、制表符、空格）")]),s._v(" "),e("p",[s._v("迭代一个字符串或者"),e("a",{attrs:{href:"http://zh.wikipedia.org/wiki/CSV",target:"_blank",rel:"noopener noreferrer"}},[s._v("CSV"),e("OutboundLink")],1),s._v("（Comma Separated Value, 逗号分隔型数值）中的单词：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('#!/bin/bash\n\ndata="111,222,333,444,555,666"\n\noldIFS=$IFS  #定义一个变量为默认IFS\nIFS=,        #设置IFS为逗号\n\nfor i in $data\ndo\n echo S:$i\ndone\n\nIFS=$oldIFS  #还原IFS为默认值\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br")])]),e("p",[s._v("执行结果：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("[root@mail text]# ./6.sh\nS:111\nS:222\nS:333\nS:444\nS:555\nS:666\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("p",[s._v("IFS被设置为逗号（,），shell将逗号解释为一个定界符，因此变量$i在每次迭代中读取由逗号分隔的字符串作为变量值。")]),s._v(" "),e("h3",{attrs:{id:"shell脚本的调试"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#shell脚本的调试"}},[s._v("#")]),s._v(" Shell脚本的调试")]),s._v(" "),e("p",[s._v("调式功能是每种编程语言都具备的特性之一，出现一些始料未及的情况，使用调式功能可以弄清楚是什么原因发生了错误或者异常。shell脚本自身已经包含了调式选项，能都打印出脚本接受的参数和输入。")]),s._v(" "),e("p",[e("strong",[s._v("1、使用选项 -x")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("bash -x script.sh\n\n或者\n\nsh -x script.sh\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("p",[s._v("-x 选项是打印所有行的信息。")]),s._v(" "),e("p",[e("strong",[s._v("2、使用 "),e("a",{attrs:{href:"http://man.linuxde.net/set",target:"_blank",rel:"noopener noreferrer"}},[s._v("set"),e("OutboundLink")],1),s._v(" +/-x ;set +/-v")])]),s._v(" "),e("ul",[e("li",[s._v("set -x：在执行时候显示参数和命令。")]),s._v(" "),e("li",[s._v("set +x：禁止调式。")]),s._v(" "),e("li",[s._v("set -v：当命令进入读取时候显示输入。")]),s._v(" "),e("li",[s._v("set +v：禁止打印输入。")])]),s._v(" "),e("p",[s._v("示例")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('#!/bin/bash\n\nfor i in {1..5}\ndo\nset -x\n echo $i\nset +x\ndone\n\necho "end"\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br")])]),e("p",[s._v("上例中，仅在 -x 和 +x 的区域中才会显示调式信息。")]),s._v(" "),e("p",[e("strong",[s._v("3、使用 _DEBUG 环境变量")])]),s._v(" "),e("p",[s._v("如果需要自定义格式显示调式信息可以通过_DEBUG环境变量来建立：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('#!/bin/bash\n\nDEBUG() {\n[ "$_DEBUG" = "on" ] && $@ || :\n}\n\nfor i in {1..5}\ndo\nDEBUG echo $i\ndone\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br")])]),e("p",[s._v("将调试功能设置为“on”来运行脚本：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("_DEBUG=on ./script.sh\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("将需要调式的行前加上DEBUG，运行脚本前没有加_DEBUG=on就不会显示任何信息，脚本中“:”告诉shell不要进行任何操作。")]),s._v(" "),e("p",[e("strong",[s._v("4、使用shebang调式方法")])]),s._v(" "),e("p",[s._v("这是最便捷的方法。把shebang 从#!/bin/bash 修改成 #!/bin/bash -xv ，其他就不用做任何操作了。")]),s._v(" "),e("h1",{attrs:{id:"切分文件名提取文件扩展名或提取文件名"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#切分文件名提取文件扩展名或提取文件名"}},[s._v("#")]),s._v(" 切分文件名提取文件扩展名或提取文件名")]),s._v(" "),e("p",[s._v("有些脚本要根据文件名进行各种处理，有时候需要保留文件名抛弃文件后缀，也有时候需要文件后缀不要文件名，这类提取文件部分的操作使用shell的内建功能就能实现。需要用到的几个操作符有："),e("strong",[s._v("%")]),s._v("、"),e("strong",[s._v("%%")]),s._v("、"),e("strong",[s._v("#")]),s._v("、"),e("strong",[s._v("##")]),s._v("。")]),s._v(" "),e("p",[e("strong",[s._v("从右向左匹配 ：")]),s._v("% 和 %% 操作符的示例")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('#!/bin/bash\n#提取文件名，删除后缀。\n\nfile_name="text.gif"\nname=${file_name%.*}\necho file name is: $name\n\n输出结果：\nfile name is: test\n\n# ${VAR%.* }含义：从$VAR中删除位于 % 右侧的通配符左右匹配的字符串，通配符从右向左进行匹配。现在给变量 name 赋值，name=text.gif，那么通配符从右向左就会匹配到 .gif，所有从 $VAR 中删除匹配结果。\n# % 属于非贪婪操作符，他是从左右向左匹配最短结果；%% 属于贪婪操作符，会从右向左匹配符合条件的最长字符串。\n\nfile_name="text.gif.bak.2012"\nname=${file_name%.*}\nname2=${file_name%%.*}\necho file name is: $name\necho file name is: $name2\n\n输出结果：\nfile name is: test.gif.bak    //使用 %\nfile name is: test            //使用 %%\n\n操作符 %% 使用 .* 从右向左贪婪匹配到 .gif.bak.2012\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br")])]),e("p",[e("strong",[s._v("从左向右匹配：")]),s._v("# 和 ## 操作符示例")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('#!/bin/bash\n#提取后缀，删除文件名。\n\nfile_name="text.gif"\nsuffix=${file_name#*.}\necho suffix is: $suffix\n\n输出结果：\nsuffix is: gif\n\n# ${VAR#*.} 含义：从 $VAR 中删除位于 # 右侧的通配符所匹配的字符串，通配符是左向右进行匹配。\n# 跟 % 一样，# 也有贪婪操作符 ## 。\n\nfile_name="text.gif.bak.2012.txt"\nsuffix=${file_name#*.}\nsuffix2=${file_name##*.}\necho suffix is: $suffix\necho suffix is: $suffix2\n\n输出结果：\nsuffix is: text.gif.bak.2012     //使用 #\nsuffix2 is: txt                  //使用 ##\n\n操作符 ## 使用 *. 从左向右贪婪匹配到 text.gif.bak.2012\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br")])]),e("p",[e("strong",[s._v('示例2，定义变量 url="'),e("a",{attrs:{href:"http://man.linuxde.net/man",target:"_blank",rel:"noopener noreferrer"}},[s._v("man"),e("OutboundLink")],1),s._v('.linuxde.net"')])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("echo ${url%.*}      #移除 .* 所匹配的最右边的内容。\nman.linuxde\necho ${url%%.*}     #将从右边开始一直匹配到最左边的 *. 移除，贪婪操作符。\nman\necho ${url#*.}      #移除 *. 所有匹配的最左边的内容。\nlinuxde.net\necho ${url##*.}     #将从左边开始一直匹配到最右边的 *. 移除，贪婪操作符。\nnet\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("h1",{attrs:{id:"find命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#find命令"}},[s._v("#")]),s._v(" find命令")]),s._v(" "),e("p",[e("strong",[s._v("find命令")]),s._v("用来在指定目录下查找文件。任何位于参数之前的字符串都将被视为欲查找的目录名。如果使用该命令时，不设置任何参数，则find命令将在当前目录下查找子目录与文件。并且将查找到的子目录和文件全部进行显示。")]),s._v(" "),e("h3",{attrs:{id:"语法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#语法"}},[s._v("#")]),s._v(" 语法")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("find(选项)(参数)\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"选项"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#选项"}},[s._v("#")]),s._v(" 选项")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("-amin<分钟>：查找在指定时间曾被存取过的文件或目录，单位以分钟计算；\n-anewer<参考文件或目录>：查找其存取时间较指定文件或目录的存取时间更接近现在的文件或目录；\n-atime<24小时数>：查找在指定时间曾被存取过的文件或目录，单位以24小时计算；\n-cmin<分钟>：查找在指定时间之时被更改过的文件或目录；\n-cnewer<参考文件或目录>查找其更改时间较指定文件或目录的更改时间更接近现在的文件或目录；\n-ctime<24小时数>：查找在指定时间之时被更改的文件或目录，单位以24小时计算；\n-daystart：从本日开始计算时间；\n-depth：从指定目录下最深层的子目录开始查找；\n-empty：寻找文件大小为0 Byte的文件，或目录下没有任何子目录或文件的空目录；\n-exec<执行指令>：假设find指令的回传值为True，就执行该指令；\n-false：将find指令的回传值皆设为False；\n-fls<列表文件>：此参数的效果和指定“-ls”参数类似，但会把结果保存为指定的列表文件；\n-follow：排除符号连接；\n-fprint<列表文件>：此参数的效果和指定“-print”参数类似，但会把结果保存成指定的列表文件；\n-fprint0<列表文件>：此参数的效果和指定“-print0”参数类似，但会把结果保存成指定的列表文件；\n-fprintf<列表文件><输出格式>：此参数的效果和指定“-printf”参数类似，但会把结果保存成指定的列表文件；\n-fstype<文件系统类型>：只寻找该文件系统类型下的文件或目录；\n-gid<群组识别码>：查找符合指定之群组识别码的文件或目录；\n-group<群组名称>：查找符合指定之群组名称的文件或目录；\n-help或——help：在线帮助；\n-ilname<范本样式>：此参数的效果和指定“-lname”参数类似，但忽略字符大小写的差别；\n-iname<范本样式>：此参数的效果和指定“-name”参数类似，但忽略字符大小写的差别；\n-inum<inode编号>：查找符合指定的inode编号的文件或目录；\n-ipath<范本样式>：此参数的效果和指定“-path”参数类似，但忽略字符大小写的差别；\n-iregex<范本样式>：此参数的效果和指定“-regexe”参数类似，但忽略字符大小写的差别；\n-links<连接数目>：查找符合指定的硬连接数目的文件或目录；\n-iname<范本样式>：指定字符串作为寻找符号连接的范本样式；\n-ls：假设find指令的回传值为Ture，就将文件或目录名称列出到标准输出；\n-maxdepth<目录层级>：设置最大目录层级；\n-mindepth<目录层级>：设置最小目录层级；\n-mmin<分钟>：查找在指定时间曾被更改过的文件或目录，单位以分钟计算；\n-mount：此参数的效果和指定“-xdev”相同；\n-mtime<24小时数>：查找在指定时间曾被更改过的文件或目录，单位以24小时计算；\n-name<范本样式>：指定字符串作为寻找文件或目录的范本样式；\n-newer<参考文件或目录>：查找其更改时间较指定文件或目录的更改时间更接近现在的文件或目录；\n-nogroup：找出不属于本地主机群组识别码的文件或目录；\n-noleaf：不去考虑目录至少需拥有两个硬连接存在；\n-nouser：找出不属于本地主机用户识别码的文件或目录；\n-ok<执行指令>：此参数的效果和指定“-exec”类似，但在执行指令之前会先询问用户，若回答“y”或“Y”，则放弃执行命令；\n-path<范本样式>：指定字符串作为寻找目录的范本样式；\n-perm<权限数值>：查找符合指定的权限数值的文件或目录；\n-print：假设find指令的回传值为Ture，就将文件或目录名称列出到标准输出。格式为每列一个名称，每个名称前皆有“./”字符串；\n-print0：假设find指令的回传值为Ture，就将文件或目录名称列出到标准输出。格式为全部的名称皆在同一行；\n-printf<输出格式>：假设find指令的回传值为Ture，就将文件或目录名称列出到标准输出。格式可以自行指定；\n-prune：不寻找字符串作为寻找文件或目录的范本样式;\n-regex<范本样式>：指定字符串作为寻找文件或目录的范本样式；\n-size<文件大小>：查找符合指定的文件大小的文件；\n-true：将find指令的回传值皆设为True；\n-type<文件类型>：只寻找符合指定的文件类型的文件；\n-uid<用户识别码>：查找符合指定的用户识别码的文件或目录；\n-used<日数>：查找文件或目录被更改之后在指定时间曾被存取过的文件或目录，单位以日计算；\n-user<拥有者名称>：查找符和指定的拥有者名称的文件或目录；\n-version或——version：显示版本信息；\n-xdev：将范围局限在先行的文件系统中；\n-xtype<文件类型>：此参数的效果和指定“-type”参数类似，差别在于它针对符号连接检查。\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br"),e("span",{staticClass:"line-number"},[s._v("29")]),e("br"),e("span",{staticClass:"line-number"},[s._v("30")]),e("br"),e("span",{staticClass:"line-number"},[s._v("31")]),e("br"),e("span",{staticClass:"line-number"},[s._v("32")]),e("br"),e("span",{staticClass:"line-number"},[s._v("33")]),e("br"),e("span",{staticClass:"line-number"},[s._v("34")]),e("br"),e("span",{staticClass:"line-number"},[s._v("35")]),e("br"),e("span",{staticClass:"line-number"},[s._v("36")]),e("br"),e("span",{staticClass:"line-number"},[s._v("37")]),e("br"),e("span",{staticClass:"line-number"},[s._v("38")]),e("br"),e("span",{staticClass:"line-number"},[s._v("39")]),e("br"),e("span",{staticClass:"line-number"},[s._v("40")]),e("br"),e("span",{staticClass:"line-number"},[s._v("41")]),e("br"),e("span",{staticClass:"line-number"},[s._v("42")]),e("br"),e("span",{staticClass:"line-number"},[s._v("43")]),e("br"),e("span",{staticClass:"line-number"},[s._v("44")]),e("br"),e("span",{staticClass:"line-number"},[s._v("45")]),e("br"),e("span",{staticClass:"line-number"},[s._v("46")]),e("br"),e("span",{staticClass:"line-number"},[s._v("47")]),e("br"),e("span",{staticClass:"line-number"},[s._v("48")]),e("br"),e("span",{staticClass:"line-number"},[s._v("49")]),e("br"),e("span",{staticClass:"line-number"},[s._v("50")]),e("br"),e("span",{staticClass:"line-number"},[s._v("51")]),e("br"),e("span",{staticClass:"line-number"},[s._v("52")]),e("br"),e("span",{staticClass:"line-number"},[s._v("53")]),e("br"),e("span",{staticClass:"line-number"},[s._v("54")]),e("br"),e("span",{staticClass:"line-number"},[s._v("55")]),e("br")])]),e("h3",{attrs:{id:"参数"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参数"}},[s._v("#")]),s._v(" 参数")]),s._v(" "),e("p",[s._v("起始目录：查找文件的起始目录。")]),s._v(" "),e("h3",{attrs:{id:"实例"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#实例"}},[s._v("#")]),s._v(" 实例")]),s._v(" "),e("h4",{attrs:{id:"根据文件或者正则表达式进行匹配"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#根据文件或者正则表达式进行匹配"}},[s._v("#")]),s._v(" 根据文件或者正则表达式进行匹配")]),s._v(" "),e("p",[s._v("列出当前目录及子目录下所有文件和文件夹")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("find .\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("在"),e("code",[s._v("/home")]),s._v("目录下查找以.txt结尾的文件名")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('find /home -name "*.txt"\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("同上，但忽略大小写")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('find /home -iname "*.txt"\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("当前目录及子目录下查找所有以.txt和.pdf结尾的文件")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('find . \\( -name "*.txt" -o -name "*.pdf" \\)\n\n或\n\nfind . -name "*.txt" -o -name "*.pdf"\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("p",[s._v("匹配文件路径或者文件")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('find /usr/ -path "*local*"\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("基于正则表达式匹配文件路径")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('find . -regex ".*\\(\\.txt\\|\\.pdf\\)$"\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("同上，但忽略大小写")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('find . -iregex ".*\\(\\.txt\\|\\.pdf\\)$"\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h4",{attrs:{id:"否定参数"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#否定参数"}},[s._v("#")]),s._v(" 否定参数")]),s._v(" "),e("p",[s._v("找出/home下不是以.txt结尾的文件")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('find /home ! -name "*.txt"\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h4",{attrs:{id:"根据文件类型进行搜索"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#根据文件类型进行搜索"}},[s._v("#")]),s._v(" 根据文件类型进行搜索")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("find . -type 类型参数\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("类型参数列表：")]),s._v(" "),e("ul",[e("li",[e("strong",[s._v("f")]),s._v(" 普通文件")]),s._v(" "),e("li",[e("strong",[s._v("l")]),s._v(" 符号连接")]),s._v(" "),e("li",[e("strong",[s._v("d")]),s._v(" 目录")]),s._v(" "),e("li",[e("strong",[s._v("c")]),s._v(" 字符设备")]),s._v(" "),e("li",[e("strong",[s._v("b")]),s._v(" 块设备")]),s._v(" "),e("li",[e("strong",[s._v("s")]),s._v(" 套接字")]),s._v(" "),e("li",[e("strong",[s._v("p")]),s._v(" Fifo")])]),s._v(" "),e("h4",{attrs:{id:"基于目录深度搜索"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#基于目录深度搜索"}},[s._v("#")]),s._v(" 基于目录深度搜索")]),s._v(" "),e("p",[s._v("向下最大深度限制为3")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("find . -maxdepth 3 -type f\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("搜索出深度距离当前目录至少2个子目录的所有文件")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("find . -mindepth 2 -type f\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h4",{attrs:{id:"根据文件时间戳进行搜索"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#根据文件时间戳进行搜索"}},[s._v("#")]),s._v(" 根据文件时间戳进行搜索")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("find . -type f 时间戳\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("UNIX/Linux文件系统每个文件都有三种时间戳：")]),s._v(" "),e("ul",[e("li",[e("strong",[s._v("访问时间")]),s._v("（-atime/天，-amin/分钟）：用户最近一次访问时间。")]),s._v(" "),e("li",[e("strong",[s._v("修改时间")]),s._v("（-mtime/天，-mmin/分钟）：文件最后一次修改时间。")]),s._v(" "),e("li",[e("strong",[s._v("变化时间")]),s._v("（-ctime/天，-cmin/分钟）：文件数据元（例如权限等）最后一次修改时间。")])]),s._v(" "),e("p",[s._v("搜索最近七天内被访问过的所有文件")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("find . -type f -atime -7\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("搜索恰好在七天前被访问过的所有文件")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("find . -type f -atime 7\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("搜索超过七天内被访问过的所有文件")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("find . -type f -atime +7\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("搜索访问时间超过10分钟的所有文件")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("find . -type f -amin +10\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("找出比"),e("a",{attrs:{href:"http://man.linuxde.net/file",target:"_blank",rel:"noopener noreferrer"}},[s._v("file"),e("OutboundLink")],1),s._v(".log修改时间更长的所有文件")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("find . -type f -newer file.log\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h4",{attrs:{id:"根据文件大小进行匹配"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#根据文件大小进行匹配"}},[s._v("#")]),s._v(" 根据文件大小进行匹配")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("find . -type f -size 文件大小单元\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("文件大小单元：")]),s._v(" "),e("ul",[e("li",[e("strong",[s._v("b")]),s._v(" —— 块（512字节）")]),s._v(" "),e("li",[e("strong",[s._v("c")]),s._v(" —— 字节")]),s._v(" "),e("li",[e("strong",[e("a",{attrs:{href:"http://man.linuxde.net/w",target:"_blank",rel:"noopener noreferrer"}},[s._v("w"),e("OutboundLink")],1)]),s._v(" —— 字（2字节）")]),s._v(" "),e("li",[e("strong",[s._v("k")]),s._v(" —— 千字节")]),s._v(" "),e("li",[e("strong",[s._v("M")]),s._v(" —— 兆字节")]),s._v(" "),e("li",[e("strong",[s._v("G")]),s._v(" —— 吉字节")])]),s._v(" "),e("p",[s._v("搜索大于10KB的文件")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("find . -type f -size +10k\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("搜索小于10KB的文件")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("find . -type f -size -10k\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("搜索等于10KB的文件")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("find . -type f -size 10k\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h4",{attrs:{id:"删除匹配文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#删除匹配文件"}},[s._v("#")]),s._v(" 删除匹配文件")]),s._v(" "),e("p",[s._v("删除当前目录下所有.txt文件")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('find . -type f -name "*.txt" -delete\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h4",{attrs:{id:"根据文件权限-所有权进行匹配"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#根据文件权限-所有权进行匹配"}},[s._v("#")]),s._v(" 根据文件权限/所有权进行匹配")]),s._v(" "),e("p",[s._v("当前目录下搜索出权限为777的文件")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("find . -type f -perm 777\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("找出当前目录下权限不是644的"),e("a",{attrs:{href:"http://man.linuxde.net/php",target:"_blank",rel:"noopener noreferrer"}},[s._v("php"),e("OutboundLink")],1),s._v("文件")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('find . -type f -name "*.php" ! -perm 644\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("找出当前目录用户tom拥有的所有文件")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("find . -type f -user tom\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("找出当前目录用户组sunk拥有的所有文件")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("find . -type f -group sunk\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h4",{attrs:{id:"借助-exec选项与其他命令结合使用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#借助-exec选项与其他命令结合使用"}},[s._v("#")]),s._v(" 借助"),e("code",[s._v("-exec")]),s._v("选项与其他命令结合使用")]),s._v(" "),e("p",[s._v("找出当前目录下所有root的文件，并把所有权更改为用户tom")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("find .-type f -user root -exec chown tom {} \\;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("上例中，"),e("strong",[s._v("{}")]),s._v(" 用于与**-exec**选项结合使用来匹配所有文件，然后会被替换为相应的文件名。")]),s._v(" "),e("p",[s._v("找出自己家目录下所有的.txt文件并删除")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('find $HOME/. -name "*.txt" -ok rm {} \\;\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("上例中，"),e("strong",[s._v("-ok")]),s._v("和**-exec**行为一样，不过它会给出提示，是否执行相应的操作。")]),s._v(" "),e("p",[s._v("查找当前目录下所有.txt文件并把他们拼接起来写入到all.txt文件中")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('find . -type f -name "*.txt" -exec cat {} \\;> all.txt\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("将30天前的.log文件移动到old目录中")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('find . -type f -mtime +30 -name "*.log" -exec cp {} old \\;\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("找出当前目录下所有.txt文件并以“File:文件名”的形式打印出来")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('find . -type f -name "*.txt" -exec printf "File: %s\\n" {} \\;\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("因为单行命令中-exec参数中无法使用多个命令，以下方法可以实现在-exec之后接受多条命令")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("-exec ./text.sh {} \\;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h4",{attrs:{id:"搜索但跳出指定的目录"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#搜索但跳出指定的目录"}},[s._v("#")]),s._v(" 搜索但跳出指定的目录")]),s._v(" "),e("p",[s._v("查找当前目录或者子目录下所有.txt文件，但是跳过子目录sk")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('find . -path "./sk" -prune -o -name "*.txt" -print\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h4",{attrs:{id:"find其他技巧收集"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#find其他技巧收集"}},[s._v("#")]),s._v(" find其他技巧收集")]),s._v(" "),e("p",[s._v("要列出所有长度为零的文件")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("find . -empty\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("find -print0表示在find的每一个结果之后加一个NULL字符，而不是默认加一个换行符。find的默认在每一个结果后加一个'\\n'，所以输出结果是一行一行的。当使用了-print0之后，就变成一行了")]),s._v(" "),e("p",[s._v("然后xargs -0表示xargs用NULL来作为分隔符。这样前后搭配就不会出现空格和换行符的错误了。选择NULL做分隔符，是因为一般编程语言把NULL作为字符串结束的标志，所以文件名不可能以NULL结尾，这样确保万无一失。")]),s._v(" "),e("p",[s._v('find . -name "*.txt" -print0 | xargs -0 rm')]),s._v(" "),e("p",[s._v("查找类型文件并修改内容")]),s._v(" "),e("p",[s._v('find ./ -type f -regex ".*.tpl" | xargs sed -i "s#MinDoc文档在线管理系统#小诺运维、运维笔记#g"')]),s._v(" "),e("p",[s._v('find ./ -type f -regex ".*.tpl" | xargs grep "meta name="description" content="')]),s._v(" "),e("h1",{attrs:{id:"xargs命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#xargs命令"}},[s._v("#")]),s._v(" xargs命令")]),s._v(" "),e("p",[e("strong",[s._v("xargs命令")]),s._v("是给其他命令传递参数的一个过滤器，也是组合多个命令的一个工具。它擅长将标准输入数据转换成命令行参数，xargs能够处理管道或者stdin并将其转换成特定命令的命令参数。xargs也可以将单行或多行文本输入转换为其他格式，例如多行变单行，单行变多行。xargs的默认命令是"),e("a",{attrs:{href:"http://man.linuxde.net/echo",target:"_blank",rel:"noopener noreferrer"}},[s._v("echo"),e("OutboundLink")],1),s._v("，空格是默认定界符。这意味着通过管道传递给xargs的输入将会包含换行和空白，不过通过xargs的处理，换行和空白将被空格取代。xargs是构建单行命令的重要组件之一。")]),s._v(" "),e("h3",{attrs:{id:"xargs命令用法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#xargs命令用法"}},[s._v("#")]),s._v(" xargs命令用法")]),s._v(" "),e("p",[s._v("xargs用作替换工具，读取输入数据重新格式化后输出。")]),s._v(" "),e("p",[s._v("定义一个测试文件，内有多行文本数据：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("cat test.txt\n\na b c d e f g\nh i j k l m n\no p q\nr s t\nu v w x y z\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("p",[s._v("多行输入单行输出：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("cat test.txt | xargs\n\na b c d e f g h i j k l m n o p q r s t u v w x y z\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[e("strong",[s._v("-n选项")]),s._v("多行输出：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("cat test.txt | xargs -n3\n\na b c\nd e f\ng h i\nj k l\nm n o\np q r\ns t u\nv w x\ny z\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br")])]),e("p",[e("strong",[s._v("-d选项")]),s._v("可以自定义一个定界符：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('echo "nameXnameXnameXname" | xargs -dX\n\nname name name name\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("结合**-n选项**使用：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('echo "nameXnameXnameXname" | xargs -dX -n2\n\nname name\nname name\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("p",[e("strong",[s._v("读取stdin，将格式化后的参数传递给命令")])]),s._v(" "),e("p",[s._v("假设一个命令为 sk.sh 和一个保存参数的文件arg.txt：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("#!/bin/bash\n#sk.sh命令内容，打印出所有参数。\n\necho $*\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("p",[s._v("arg.txt文件内容：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("cat arg.txt\n\naaa\nbbb\nccc\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("p",[s._v("xargs的一个"),e("strong",[s._v("选项-I")]),s._v("，使用-I指定一个替换字符串{}，这个字符串在xargs扩展时会被替换掉，当-I与xargs结合使用，每一个参数命令都会被执行一次：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("cat arg.txt | xargs -I {} ./sk.sh -p {} -l\n\n-p aaa -l\n-p bbb -l\n-p ccc -l\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("p",[s._v("复制所有图片文件到 /data/images 目录下：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("ls *.jpg | xargs -n1 -I cp {} /data/images\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[e("strong",[s._v("xargs结合"),e("a",{attrs:{href:"http://man.linuxde.net/find",target:"_blank",rel:"noopener noreferrer"}},[s._v("find"),e("OutboundLink")],1),s._v("使用")])]),s._v(" "),e("p",[s._v("用"),e("a",{attrs:{href:"http://man.linuxde.net/rm",target:"_blank",rel:"noopener noreferrer"}},[s._v("rm"),e("OutboundLink")],1),s._v(" 删除太多的文件时候，可能得到一个错误信息：/bin/rm Argument list too long. 用xargs去避免这个问题：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('find . -type f -name "*.log" -print0 | xargs -0 rm -f\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("xargs -0将\\0作为定界符。")]),s._v(" "),e("p",[s._v("统计一个源代码目录中所有"),e("a",{attrs:{href:"http://man.linuxde.net/php",target:"_blank",rel:"noopener noreferrer"}},[s._v("php"),e("OutboundLink")],1),s._v("文件的行数：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('find . -type f -name "*.php" -print0 | xargs -0 wc -l\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("查找所有的jpg 文件，并且压缩它们：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('find . -type f -name "*.jpg" -print | xargs tar -czvf images.tar.gz\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[e("strong",[s._v("xargs其他应用")])]),s._v(" "),e("p",[s._v("假如你有一个文件包含了很多你希望下载的URL，你能够使用xargs下载所有链接：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("cat url-list.txt | xargs wget -c\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"子shell-subshells"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#子shell-subshells"}},[s._v("#")]),s._v(" 子Shell（Subshells）")]),s._v(" "),e("p",[s._v("运行一个shell脚本时会启动另一个命令解释器.，就好像你的命令是在命令行提示下被解释的一样，类似于批处理文件里的一系列命令。每个shell脚本有效地运行在父shell(parent shell)的一个子进程里。这个父shell是指在一个控制终端或在一个xterm窗口中给你命令指示符的进程。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("cmd1 | ( cmd2; cmd3; cmd4 ) | cmd5\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("如果cmd2 是"),e("a",{attrs:{href:"http://man.linuxde.net/cd",target:"_blank",rel:"noopener noreferrer"}},[s._v("cd"),e("OutboundLink")],1),s._v(" /，那么就会改变子Shell的工作目录，这种改变只是局限于子shell内部，cmd5则完全不知道工作目录发生的变化。子shell是嵌在圆括号()内部的命令序列，子Shell内部定义的变量为局部变量。")]),s._v(" "),e("p",[s._v("子shell可用于为一组命令设定临时的环境变量：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("COMMAND1\nCOMMAND2\nCOMMAND3\n(\n  IFS=:\n  PATH=/bin\n  unset TERMINFO\n  set -C\n  shift 5\n  COMMAND4\n  COMMAND5\n  exit 3 # 只是从子shell退出。\n)\n# 父shell不受影响，变量值没有更改。\nCOMMAND6\nCOMMAND7\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br")])]),e("h1",{attrs:{id:"tar命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#tar命令"}},[s._v("#")]),s._v(" tar命令")]),s._v(" "),e("p",[e("strong",[s._v("tar命令")]),s._v("可以为linux的文件和目录创建档案。利用tar，可以为某一特定文件创建档案（备份文件），也可以在档案中改变文件，或者向档案中加入新的文件。tar最初被用来在磁带上创建档案，现在，用户可以在任何设备上创建档案。利用tar命令，可以把一大堆的文件和目录全部打包成一个文件，这对于备份文件或将几个文件组合成为一个文件以便于网络传输是非常有用的。")]),s._v(" "),e("p",[s._v("首先要弄清两个概念：打包和压缩。打包是指将一大堆文件或目录变成一个总的文件；压缩则是将一个大的文件通过一些压缩算法变成一个小文件。")]),s._v(" "),e("p",[s._v("为什么要区分这两个概念呢？这源于Linux中很多压缩程序只能针对一个文件进行压缩，这样当你想要压缩一大堆文件时，你得先将这一大堆文件先打成一个包（tar命令），然后再用压缩程序进行压缩（"),e("a",{attrs:{href:"http://man.linuxde.net/gzip",target:"_blank",rel:"noopener noreferrer"}},[s._v("gzip"),e("OutboundLink")],1),s._v(" "),e("a",{attrs:{href:"http://man.linuxde.net/bzip2",target:"_blank",rel:"noopener noreferrer"}},[s._v("bzip2"),e("OutboundLink")],1),s._v("命令）。")]),s._v(" "),e("h3",{attrs:{id:"语法-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#语法-2"}},[s._v("#")]),s._v(" 语法")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("tar(选项)(参数)\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"选项-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#选项-2"}},[s._v("#")]),s._v(" 选项")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("-A或--catenate：新增文件到以存在的备份文件；\n-B：设置区块大小；\n-c或--create：建立新的备份文件；\n-C <目录>：这个选项用在解压缩，若要在特定目录解压缩，可以使用这个选项。\n-d：记录文件的差别；\n-x或--extract或--get：从备份文件中还原文件；\n-t或--list：列出备份文件的内容；\n-z或--gzip或--ungzip：通过gzip指令处理备份文件；\n-Z或--compress或--uncompress：通过compress指令处理备份文件；\n-f<备份文件>或--file=<备份文件>：指定备份文件；\n-v或--verbose：显示指令执行过程；\n-r：添加文件到已经压缩的文件；\n-u：添加改变了和现有的文件到已经存在的压缩文件；\n-j：支持bzip2解压文件；\n-v：显示操作过程；\n-l：文件系统边界设置；\n-k：保留原有文件不覆盖；\n-m：保留文件不被覆盖；\n-w：确认压缩文件的正确性；\n-p或--same-permissions：用原来的文件权限还原文件；\n-P或--absolute-names：文件名使用绝对名称，不移除文件名称前的“/”号；\n-N <日期格式> 或 --newer=<日期时间>：只将较指定日期更新的文件保存到备份文件里；\n--exclude=<范本样式>：排除符合范本样式的文件。\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br")])]),e("h3",{attrs:{id:"参数-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参数-2"}},[s._v("#")]),s._v(" 参数")]),s._v(" "),e("p",[s._v("文件或目录：指定要打包的文件或目录列表。")]),s._v(" "),e("h3",{attrs:{id:"实例-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#实例-2"}},[s._v("#")]),s._v(" 实例")]),s._v(" "),e("p",[e("strong",[s._v("将文件全部打包成tar包")]),s._v("：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("tar -cvf log.tar log2012.log    仅打包，不压缩！ \ntar -zcvf log.tar.gz log2012.log   打包后，以 gzip 压缩 \ntar -jcvf log.tar.bz2 log2012.log  打包后，以 bzip2 压缩 \n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("在选项"),e("code",[s._v("f")]),s._v("之后的文件档名是自己取的，我们习惯上都用 .tar 来作为辨识。 如果加"),e("code",[s._v("z")]),s._v("选项，则以.tar.gz或.tgz来代表gzip压缩过的tar包；如果加"),e("code",[s._v("j")]),s._v("选项，则以.tar.bz2来作为tar包名。")]),s._v(" "),e("p",[e("strong",[s._v("查阅上述tar包内有哪些文件")]),s._v("：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("tar -ztvf log.tar.gz\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("由于我们使用 gzip 压缩的log.tar.gz，所以要查阅log.tar.gz包内的文件时，就得要加上"),e("code",[s._v("z")]),s._v("这个选项了。")]),s._v(" "),e("p",[e("strong",[s._v("将tar包解压缩")]),s._v("：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("tar -zxvf /opt/soft/test/log.tar.gz\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("在预设的情况下，我们可以将压缩档在任何地方解开的")]),s._v(" "),e("p",[e("strong",[s._v("只将tar内的部分文件解压出来")]),s._v("：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("tar -zxvf /opt/soft/test/log30.tar.gz log2013.log\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("我可以透过"),e("code",[s._v("tar -ztvf")]),s._v("来查阅 tar 包内的文件名称，如果单只要一个文件，就可以透过这个方式来解压部分文件！")]),s._v(" "),e("p",[e("strong",[s._v("文件备份下来，并且保存其权限")]),s._v("：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("tar -zcvpf log31.tar.gz log2014.log log2015.log log2016.log\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("这个"),e("code",[s._v("-p")]),s._v("的属性是很重要的，尤其是当您要保留原本文件的属性时。")]),s._v(" "),e("p",[e("strong",[s._v("在文件夹当中，比某个日期新的文件才备份")]),s._v("：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('tar -N "2012/11/13" -zcvf log17.tar.gz test\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[e("strong",[s._v("备份文件夹内容是排除部分文件：")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("tar --exclude scf/service -zcvf scf.tar.gz scf/*\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[e("strong",[s._v("其实最简单的使用 tar 就只要记忆底下的方式即可：")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("压　缩：tar -jcv -f filename.tar.bz2 要被压缩的文件或目录名称\n查　询：tar -jtv -f filename.tar.bz2\n解压缩：tar -jxv -f filename.tar.bz2 -C 欲解压缩的目录\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h1",{attrs:{id:"date命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#date命令"}},[s._v("#")]),s._v(" date命令")]),s._v(" "),e("p",[e("strong",[s._v("date命令")]),s._v("是显示或设置系统时间与日期。")]),s._v(" "),e("p",[s._v("很多shell脚本里面需要打印不同格式的时间或日期，以及要根据时间和日期执行操作。延时通常用于脚本执行过程中提供一段等待的时间。日期可以以多种格式去打印，也可以使用命令设置固定的格式。在类UNIX系统中，日期被存储为一个整数，其大小为自世界标准时间（UTC）1970年1月1日0时0分0秒起流逝的秒数。")]),s._v(" "),e("h3",{attrs:{id:"语法-3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#语法-3"}},[s._v("#")]),s._v(" 语法")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("date(选项)(参数)\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"选项-3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#选项-3"}},[s._v("#")]),s._v(" 选项")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("-d<字符串>：显示字符串所指的日期与时间。字符串前后必须加上双引号；\n-s<字符串>：根据字符串来设置日期与时间。字符串前后必须加上双引号；\n-u：显示GMT；\n--help：在线帮助；\n--version：显示版本信息。\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("h3",{attrs:{id:"参数-3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参数-3"}},[s._v("#")]),s._v(" 参数")]),s._v(" "),e("p",[s._v("<+时间日期格式>：指定显示时使用的日期时间格式。")]),s._v(" "),e("h3",{attrs:{id:"日期格式字符串列表"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#日期格式字符串列表"}},[s._v("#")]),s._v(" 日期格式字符串列表")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("%H 小时，24小时制（00~23）\n%I 小时，12小时制（01~12）\n%k 小时，24小时制（0~23）\n%l 小时，12小时制（1~12）\n%M 分钟（00~59）\n%p 显示出AM或PM\n%r 显示时间，12小时制（hh:mm:ss %p）\n%s 从1970年1月1日00:00:00到目前经历的秒数\n%S 显示秒（00~59）\n%T 显示时间，24小时制（hh:mm:ss）\n%X 显示时间的格式（%H:%M:%S）\n%Z 显示时区，日期域（CST）\n%a 星期的简称（Sun~Sat）\n%A 星期的全称（Sunday~Saturday）\n%h,%b 月的简称（Jan~Dec）\n%B 月的全称（January~December）\n%c 日期和时间（Tue Nov 20 14:12:58 2012）\n%d 一个月的第几天（01~31）\n%x,%D 日期（mm/dd/yy）\n%j 一年的第几天（001~366）\n%m 月份（01~12）\n%w 一个星期的第几天（0代表星期天）\n%W 一年的第几个星期（00~53，星期一为第一天）\n%y 年的最后两个数字（1999则是99）\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br")])]),e("h3",{attrs:{id:"实例-3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#实例-3"}},[s._v("#")]),s._v(" 实例")]),s._v(" "),e("p",[s._v("格式化输出：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('date +"%Y-%m-%d"\n2009-12-07\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("输出昨天日期：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('date -d "1 day ago" +"%Y-%m-%d"\n2012-11-19\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("2秒后输出：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('date -d "2 second" +"%Y-%m-%d %H:%M.%S"\n2012-11-20 14:21.31\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("传说中的 1234567890 秒：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('date -d "1970-01-01 1234567890 seconds" +"%Y-%m-%d %H:%m:%S"\n2009-02-13 23:02:30\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("普通转格式：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('date -d "2009-12-12" +"%Y/%m/%d %H:%M.%S"\n2009/12/12 00:00.00\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("apache格式转换：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('date -d "Dec 5, 2009 12:00:37 AM" +"%Y-%m-%d %H:%M.%S"\n2009-12-05 00:00.37\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("格式转换后时间游走：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('date -d "Dec 5, 2009 12:00:37 AM 2 year ago" +"%Y-%m-%d %H:%M.%S"\n2007-12-05 00:00.37\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("加减操作：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('date +%Y%m%d                   //显示前天年月日\ndate -d "+1 day" +%Y%m%d       //显示前一天的日期\ndate -d "-1 day" +%Y%m%d       //显示后一天的日期\ndate -d "-1 month" +%Y%m%d     //显示上一月的日期\ndate -d "+1 month" +%Y%m%d     //显示下一月的日期\ndate -d "-1 year" +%Y%m%d      //显示前一年的日期\ndate -d "+1 year" +%Y%m%d      //显示下一年的日期\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("p",[s._v("设定时间：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('date -s                        //设置当前时间，只有root权限才能设置，其他只能查看\ndate -s 20120523               //设置成20120523，这样会把具体时间设置成空00:00:00\ndate -s 01:01:01               //设置具体时间，不会对日期做更改\ndate -s "01:01:01 2012-05-23"  //这样可以设置全部时间\ndate -s "01:01:01 20120523"    //这样可以设置全部时间\ndate -s "2012-05-23 01:01:01"  //这样可以设置全部时间\ndate -s "20120523 01:01:01"    //这样可以设置全部时间\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("p",[s._v("有时需要检查一组命令花费的时间，举例：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("#!/bin/bash\n\nstart=$(date +%s)\nnmap man.linuxde.net &> /dev/null\n\nend=$(date +%s)\ndifference=$(( end - start ))\necho $difference seconds.\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("h1",{attrs:{id:"dd命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#dd命令"}},[s._v("#")]),s._v(" dd命令")]),s._v(" "),e("p",[e("strong",[s._v("dd命令")]),s._v("用于复制文件并对原文件的内容进行转换和格式化处理。dd命令功能很强大的，对于一些比较底层的问题，使用dd命令往往可以得到出人意料的效果。用的比较多的还是用dd来备份裸设备。但是不推荐，如果需要备份oracle裸设备，可以使用rman备份，或使用第三方软件备份，使用dd的话，管理起来不太方便。")]),s._v(" "),e("p",[s._v("建议在有需要的时候使用dd 对物理磁盘操作，如果是文件系统的话还是使用"),e("a",{attrs:{href:"http://man.linuxde.net/tar",target:"_blank",rel:"noopener noreferrer"}},[s._v("tar"),e("OutboundLink")],1),s._v(" backup "),e("a",{attrs:{href:"http://man.linuxde.net/cpio",target:"_blank",rel:"noopener noreferrer"}},[s._v("cpio"),e("OutboundLink")],1),s._v("等其他命令更加方便。另外，使用dd对磁盘操作时，最好使用块设备文件。")]),s._v(" "),e("h3",{attrs:{id:"语法-4"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#语法-4"}},[s._v("#")]),s._v(" 语法")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("dd(选项)\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"选项-4"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#选项-4"}},[s._v("#")]),s._v(" 选项")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("bs=<字节数>：将 ibs（输入）与 obs（输出）设成指定的字节数；\ncbs=<字节数>：转换时，每次只转换指定的字节数；\nconv=<关键字>：指定文件转换的方式；\ncount=<区块数>：仅读取指定的区块数；\nibs=<字节数>：每次读取的字节数；\nobs=<字节数>：每次输出的字节数；\nof=<文件>：输出到文件；\nseek=<区块数>：一开始输出时，跳过指定的区块数；\nskip=<区块数>：一开始读取时，跳过指定的区块数；\n--help：帮助；\n--version：显示版本信息。\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br")])]),e("h3",{attrs:{id:"实例-4"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#实例-4"}},[s._v("#")]),s._v(" 实例")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("[root@localhost text]# dd if=/dev/zero of=sun.txt bs=1M count=1\n1+0 records in\n1+0 records out\n1048576 bytes (1.0 MB) copied, 0.006107 seconds, 172 MB/s\n\n[root@localhost text]# du -sh sun.txt \n1.1M    sun.txt\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("p",[s._v("该命令创建了一个1M大小的文件sun.txt，其中参数解释：")]),s._v(" "),e("ul",[e("li",[e("strong",[s._v("if")]),s._v(" 代表输入文件。如果不指定if，默认就会从stdin中读取输入。")]),s._v(" "),e("li",[e("strong",[s._v("of")]),s._v(" 代表输出文件。如果不指定of，默认就会将stdout作为默认输出。")]),s._v(" "),e("li",[e("strong",[s._v("bs")]),s._v(" 代表字节为单位的块大小。")]),s._v(" "),e("li",[e("strong",[s._v("count")]),s._v(" 代表被复制的块数。")]),s._v(" "),e("li",[e("strong",[s._v("/dev/zero")]),s._v(" 是一个字符设备，会不断返回0值字节（\\0）。")])]),s._v(" "),e("p",[s._v("块大小可以使用的计量单位表")]),s._v(" "),e("table",[e("thead",[e("tr",[e("th",[s._v("单元大小")]),s._v(" "),e("th",[s._v("代码")])])]),s._v(" "),e("tbody",[e("tr",[e("td",[s._v("字节（1B）")]),s._v(" "),e("td",[s._v("c")])]),s._v(" "),e("tr",[e("td",[s._v("字节（2B）")]),s._v(" "),e("td",[e("a",{attrs:{href:"http://man.linuxde.net/w",target:"_blank",rel:"noopener noreferrer"}},[s._v("w"),e("OutboundLink")],1)])]),s._v(" "),e("tr",[e("td",[s._v("块（512B）")]),s._v(" "),e("td",[s._v("b")])]),s._v(" "),e("tr",[e("td",[s._v("千字节（1024B）")]),s._v(" "),e("td",[s._v("k")])]),s._v(" "),e("tr",[e("td",[s._v("兆字节（1024KB）")]),s._v(" "),e("td",[s._v("M")])]),s._v(" "),e("tr",[e("td",[s._v("吉字节（1024MB）")]),s._v(" "),e("td",[s._v("G")])])])]),s._v(" "),e("p",[s._v("以上命令可以看出dd命令来测试内存操作速度：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("1048576 bytes (1.0 MB) copied, 0.006107 seconds, 172 MB/s\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h1",{attrs:{id:"curl命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#curl命令"}},[s._v("#")]),s._v(" curl命令")]),s._v(" "),e("p",[e("strong",[s._v("curl命令")]),s._v("是一个利用URL规则在命令行下工作的文件传输工具。它支持文件的上传和下载，所以是综合传输工具，但按传统，习惯称curl为下载工具。作为一款强力工具，curl支持包括HTTP、HTTPS、"),e("a",{attrs:{href:"http://man.linuxde.net/ftp",target:"_blank",rel:"noopener noreferrer"}},[s._v("ftp"),e("OutboundLink")],1),s._v("等众多协议，还支持POST、cookies、认证、从指定偏移处下载部分文件、用户代理字符串、限速、文件大小、进度条等特征。做网页处理流程和数据检索自动化，curl可以祝一臂之力。")]),s._v(" "),e("h3",{attrs:{id:"语法-5"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#语法-5"}},[s._v("#")]),s._v(" 语法")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("curl(选项)(参数)\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"选项-5"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#选项-5"}},[s._v("#")]),s._v(" 选项")]),s._v(" "),e("table",[e("thead",[e("tr",[e("th",[s._v("-a/--append")]),s._v(" "),e("th",[s._v("上传文件时，附加到目标文件")])])]),s._v(" "),e("tbody",[e("tr",[e("td",[s._v("-A/--user-agent "),e("string")],1),s._v(" "),e("td",[s._v("设置用户代理发送给服务器")])]),s._v(" "),e("tr",[e("td",[s._v("-anyauth")]),s._v(" "),e("td",[s._v("可以使用“任何”身份验证方法")])]),s._v(" "),e("tr",[e("td",[s._v("-b/--cookie <name=string/"),e("a",{attrs:{href:"http://man.linuxde.net/file",target:"_blank",rel:"noopener noreferrer"}},[s._v("file"),e("OutboundLink")],1),s._v(">")]),s._v(" "),e("td",[s._v("cookie字符串或文件读取位置")])]),s._v(" "),e("tr",[e("td",[s._v("--basic")]),s._v(" "),e("td",[s._v("使用HTTP基本验证")])]),s._v(" "),e("tr",[e("td",[s._v("-B/--use-ascii")]),s._v(" "),e("td",[s._v("使用ASCII /文本传输")])]),s._v(" "),e("tr",[e("td",[s._v("-c/--cookie-jar "),e("file")],1),s._v(" "),e("td",[s._v("操作结束后把cookie写入到这个文件中")])]),s._v(" "),e("tr",[e("td",[s._v("-C/--continue-"),e("a",{attrs:{href:"http://man.linuxde.net/at",target:"_blank",rel:"noopener noreferrer"}},[s._v("at"),e("OutboundLink")],1),s._v(" "),e("offset")],1),s._v(" "),e("td",[s._v("断点续转")])]),s._v(" "),e("tr",[e("td",[s._v("-d/--data "),e("data")]),s._v(" "),e("td",[s._v("HTTP POST方式传送数据")])]),s._v(" "),e("tr",[e("td",[s._v("--data-ascii "),e("data")]),s._v(" "),e("td",[s._v("以ascii的方式post数据")])]),s._v(" "),e("tr",[e("td",[s._v("--data-binary "),e("data")]),s._v(" "),e("td",[s._v("以二进制的方式post数据")])]),s._v(" "),e("tr",[e("td",[s._v("--negotiate")]),s._v(" "),e("td",[s._v("使用HTTP身份验证")])]),s._v(" "),e("tr",[e("td",[s._v("--digest")]),s._v(" "),e("td",[s._v("使用数字身份验证")])]),s._v(" "),e("tr",[e("td",[s._v("--disable-eprt")]),s._v(" "),e("td",[s._v("禁止使用EPRT或LPRT")])]),s._v(" "),e("tr",[e("td",[s._v("--disable-epsv")]),s._v(" "),e("td",[s._v("禁止使用EPSV")])]),s._v(" "),e("tr",[e("td",[s._v("-D/--"),e("a",{attrs:{href:"http://man.linuxde.net/dump",target:"_blank",rel:"noopener noreferrer"}},[s._v("dump"),e("OutboundLink")],1),s._v("-header "),e("file")],1),s._v(" "),e("td",[s._v("把header信息写入到该文件中")])]),s._v(" "),e("tr",[e("td",[s._v("--egd-file "),e("file")],1),s._v(" "),e("td",[s._v("为随机数据(SSL)设置EGD socket路径")])]),s._v(" "),e("tr",[e("td",[s._v("--tcp-nodelay")]),s._v(" "),e("td",[s._v("使用TCP_NODELAY选项")])]),s._v(" "),e("tr",[e("td",[s._v("-e/--referer")]),s._v(" "),e("td",[s._v("来源网址")])]),s._v(" "),e("tr",[e("td",[s._v("-E/--cert <cert[:"),e("a",{attrs:{href:"http://man.linuxde.net/passwd",target:"_blank",rel:"noopener noreferrer"}},[s._v("passwd"),e("OutboundLink")],1),s._v("]>")]),s._v(" "),e("td",[s._v("客户端证书文件和密码 (SSL)")])]),s._v(" "),e("tr",[e("td",[s._v("--cert-"),e("a",{attrs:{href:"http://man.linuxde.net/type",target:"_blank",rel:"noopener noreferrer"}},[s._v("type"),e("OutboundLink")],1),s._v(" "),e("type")],1),s._v(" "),e("td",[s._v("证书文件类型 (DER/PEM/ENG) (SSL)")])]),s._v(" "),e("tr",[e("td",[s._v("--key "),e("key")],1),s._v(" "),e("td",[s._v("私钥文件名 (SSL)")])]),s._v(" "),e("tr",[e("td",[s._v("--key-type "),e("type")],1),s._v(" "),e("td",[s._v("私钥文件类型 (DER/PEM/ENG) (SSL)")])]),s._v(" "),e("tr",[e("td",[s._v("--pass "),e("pass")],1),s._v(" "),e("td",[s._v("私钥密码 (SSL)")])]),s._v(" "),e("tr",[e("td",[s._v("--engine "),e("eng")],1),s._v(" "),e("td",[s._v('加密引擎使用 (SSL). "--engine list" for list')])]),s._v(" "),e("tr",[e("td",[s._v("--cacert "),e("file")],1),s._v(" "),e("td",[s._v("CA证书 (SSL)")])]),s._v(" "),e("tr",[e("td",[s._v("--capath "),e("directory")],1),s._v(" "),e("td",[s._v("CA目录 (made using c_rehash) to verify peer against (SSL)")])]),s._v(" "),e("tr",[e("td",[s._v("--ciphers "),e("list")],1),s._v(" "),e("td",[s._v("SSL密码")])]),s._v(" "),e("tr",[e("td",[s._v("--compressed")]),s._v(" "),e("td",[s._v("要求返回是压缩的形势 (using deflate or "),e("a",{attrs:{href:"http://man.linuxde.net/gzip",target:"_blank",rel:"noopener noreferrer"}},[s._v("gzip"),e("OutboundLink")],1),s._v(")")])]),s._v(" "),e("tr",[e("td",[s._v("--connect-timeout "),e("seconds")],1),s._v(" "),e("td",[s._v("设置最大请求时间")])]),s._v(" "),e("tr",[e("td",[s._v("--create-"),e("a",{attrs:{href:"http://man.linuxde.net/dirs",target:"_blank",rel:"noopener noreferrer"}},[s._v("dirs"),e("OutboundLink")],1)]),s._v(" "),e("td",[s._v("建立本地目录的目录层次结构")])]),s._v(" "),e("tr",[e("td",[s._v("--crlf")]),s._v(" "),e("td",[s._v("上传是把LF转变成CRLF")])]),s._v(" "),e("tr",[e("td",[s._v("-f/--fail")]),s._v(" "),e("td",[s._v("连接失败时不显示http错误")])]),s._v(" "),e("tr",[e("td",[s._v("--ftp-create-dirs")]),s._v(" "),e("td",[s._v("如果远程目录不存在，创建远程目录")])]),s._v(" "),e("tr",[e("td",[s._v("--ftp-method [multicwd/nocwd/singlecwd]")]),s._v(" "),e("td",[s._v("控制CWD的使用")])]),s._v(" "),e("tr",[e("td",[s._v("--ftp-pasv")]),s._v(" "),e("td",[s._v("使用 PASV/EPSV 代替端口")])]),s._v(" "),e("tr",[e("td",[s._v("--ftp-skip-pasv-"),e("a",{attrs:{href:"http://man.linuxde.net/ip",target:"_blank",rel:"noopener noreferrer"}},[s._v("ip"),e("OutboundLink")],1)]),s._v(" "),e("td",[s._v("使用PASV的时候,忽略该IP地址")])]),s._v(" "),e("tr",[e("td",[s._v("--ftp-ssl")]),s._v(" "),e("td",[s._v("尝试用 SSL/TLS 来进行ftp数据传输")])]),s._v(" "),e("tr",[e("td",[s._v("--ftp-ssl-reqd")]),s._v(" "),e("td",[s._v("要求用 SSL/TLS 来进行ftp数据传输")])]),s._v(" "),e("tr",[e("td",[s._v("-F/--form <name=content>")]),s._v(" "),e("td",[s._v("模拟http表单提交数据")])]),s._v(" "),e("tr",[e("td",[s._v("--form-string <name=string>")]),s._v(" "),e("td",[s._v("模拟http表单提交数据")])]),s._v(" "),e("tr",[e("td",[s._v("-g/--globoff")]),s._v(" "),e("td",[s._v("禁用网址序列和范围使用{}和[]")])]),s._v(" "),e("tr",[e("td",[s._v("-G/--get")]),s._v(" "),e("td",[s._v("以get的方式来发送数据")])]),s._v(" "),e("tr",[e("td",[s._v("-H/--header "),e("line")]),s._v(" "),e("td",[s._v("自定义头信息传递给服务器")])]),s._v(" "),e("tr",[e("td",[s._v("--ignore-content-length")]),s._v(" "),e("td",[s._v("忽略的HTTP头信息的长度")])]),s._v(" "),e("tr",[e("td",[s._v("-i/--include")]),s._v(" "),e("td",[s._v("输出时包括protocol头信息")])]),s._v(" "),e("tr",[e("td",[s._v("-I/--"),e("a",{attrs:{href:"http://man.linuxde.net/head",target:"_blank",rel:"noopener noreferrer"}},[s._v("head"),e("OutboundLink")],1)]),s._v(" "),e("td",[s._v("只显示请求头信息")])]),s._v(" "),e("tr",[e("td",[s._v("-j/--junk-session-cookies")]),s._v(" "),e("td",[s._v("读取文件进忽略session cookie")])]),s._v(" "),e("tr",[e("td",[s._v("--interface "),e("interface")],1),s._v(" "),e("td",[s._v("使用指定网络接口/地址")])]),s._v(" "),e("tr",[e("td",[s._v("--krb4 "),e("level")],1),s._v(" "),e("td",[s._v("使用指定安全级别的krb4")])]),s._v(" "),e("tr",[e("td",[s._v("-k/--insecure")]),s._v(" "),e("td",[s._v("允许不使用证书到SSL站点")])]),s._v(" "),e("tr",[e("td",[s._v("-K/--config")]),s._v(" "),e("td",[s._v("指定的配置文件读取")])]),s._v(" "),e("tr",[e("td",[s._v("-l/--list-only")]),s._v(" "),e("td",[s._v("列出ftp目录下的文件名称")])]),s._v(" "),e("tr",[e("td",[s._v("--limit-rate "),e("rate")],1),s._v(" "),e("td",[s._v("设置传输速度")])]),s._v(" "),e("tr",[e("td",[s._v("--local-port"),e("NUM")],1),s._v(" "),e("td",[s._v("强制使用本地端口号")])]),s._v(" "),e("tr",[e("td",[s._v("-m/--max-"),e("a",{attrs:{href:"http://man.linuxde.net/time",target:"_blank",rel:"noopener noreferrer"}},[s._v("time"),e("OutboundLink")],1),s._v(" "),e("seconds")],1),s._v(" "),e("td",[s._v("设置最大传输时间")])]),s._v(" "),e("tr",[e("td",[s._v("--max-redirs "),e("num")],1),s._v(" "),e("td",[s._v("设置最大读取的目录数")])]),s._v(" "),e("tr",[e("td",[s._v("--max-filesize "),e("bytes")],1),s._v(" "),e("td",[s._v("设置最大下载的文件总量")])]),s._v(" "),e("tr",[e("td",[s._v("-M/--manual")]),s._v(" "),e("td",[s._v("显示全手动")])]),s._v(" "),e("tr",[e("td",[s._v("-n/--netrc")]),s._v(" "),e("td",[s._v("从netrc文件中读取用户名和密码")])]),s._v(" "),e("tr",[e("td",[s._v("--netrc-optional")]),s._v(" "),e("td",[s._v("使用 .netrc 或者 URL来覆盖-n")])]),s._v(" "),e("tr",[e("td",[s._v("--ntlm")]),s._v(" "),e("td",[s._v("使用 HTTP NTLM 身份验证")])]),s._v(" "),e("tr",[e("td",[s._v("-N/--no-buffer")]),s._v(" "),e("td",[s._v("禁用缓冲输出")])]),s._v(" "),e("tr",[e("td",[s._v("-o/--output")]),s._v(" "),e("td",[s._v("把输出写到该文件中")])]),s._v(" "),e("tr",[e("td",[s._v("-O/--remote-name")]),s._v(" "),e("td",[s._v("把输出写到该文件中，保留远程文件的文件名")])]),s._v(" "),e("tr",[e("td",[s._v("-p/--proxytunnel")]),s._v(" "),e("td",[s._v("使用HTTP代理")])]),s._v(" "),e("tr",[e("td",[s._v("--proxy-anyauth")]),s._v(" "),e("td",[s._v("选择任一代理身份验证方法")])]),s._v(" "),e("tr",[e("td",[s._v("--proxy-basic")]),s._v(" "),e("td",[s._v("在代理上使用基本身份验证")])]),s._v(" "),e("tr",[e("td",[s._v("--proxy-digest")]),s._v(" "),e("td",[s._v("在代理上使用数字身份验证")])]),s._v(" "),e("tr",[e("td",[s._v("--proxy-ntlm")]),s._v(" "),e("td",[s._v("在代理上使用ntlm身份验证")])]),s._v(" "),e("tr",[e("td",[s._v("-P/--ftp-port "),e("address")]),s._v(" "),e("td",[s._v("使用端口地址，而不是使用PASV")])]),s._v(" "),e("tr",[e("td",[s._v("-q")]),s._v(" "),e("td",[s._v("作为第一个参数，关闭 .curlrc")])]),s._v(" "),e("tr",[e("td",[s._v("-Q/--quote "),e("cmd")],1),s._v(" "),e("td",[s._v("文件传输前，发送命令到服务器")])]),s._v(" "),e("tr",[e("td",[s._v("-r/--range "),e("range")],1),s._v(" "),e("td",[s._v("检索来自HTTP/1.1或FTP服务器字节范围")])]),s._v(" "),e("tr",[e("td",[s._v("--range-file")]),s._v(" "),e("td",[s._v("读取（SSL）的随机文件")])]),s._v(" "),e("tr",[e("td",[s._v("-R/--remote-time")]),s._v(" "),e("td",[s._v("在本地生成文件时，保留远程文件时间")])]),s._v(" "),e("tr",[e("td",[s._v("--retry "),e("num")],1),s._v(" "),e("td",[s._v("传输出现问题时，重试的次数")])]),s._v(" "),e("tr",[e("td",[s._v("--retry-delay "),e("seconds")],1),s._v(" "),e("td",[s._v("传输出现问题时，设置重试间隔时间")])]),s._v(" "),e("tr",[e("td",[s._v("--retry-max-time "),e("seconds")],1),s._v(" "),e("td",[s._v("传输出现问题时，设置最大重试时间")])]),s._v(" "),e("tr",[e("td",[s._v("-s/--silent")]),s._v(" "),e("td",[s._v("静默模式。不输出任何东西")])]),s._v(" "),e("tr",[e("td",[s._v("-S/--show-error")]),s._v(" "),e("td",[s._v("显示错误")])]),s._v(" "),e("tr",[e("td",[s._v("--socks4 <"),e("a",{attrs:{href:"http://man.linuxde.net/host",target:"_blank",rel:"noopener noreferrer"}},[s._v("host"),e("OutboundLink")],1),s._v("[:port]>")]),s._v(" "),e("td",[s._v("用socks4代理给定主机和端口")])]),s._v(" "),e("tr",[e("td",[s._v("--socks5 <host[:port]>")]),s._v(" "),e("td",[s._v("用socks5代理给定主机和端口")])]),s._v(" "),e("tr",[e("td",[s._v("--stderr "),e("file")],1),s._v(" "),e("td")]),s._v(" "),e("tr",[e("td",[s._v("-t/--"),e("a",{attrs:{href:"http://man.linuxde.net/telnet",target:"_blank",rel:"noopener noreferrer"}},[s._v("telnet"),e("OutboundLink")],1),s._v("-option <OPT=val>")]),s._v(" "),e("td",[s._v("Telnet选项设置")])]),s._v(" "),e("tr",[e("td",[s._v("--trace "),e("file")],1),s._v(" "),e("td",[s._v("对指定文件进行debug")])]),s._v(" "),e("tr",[e("td",[s._v("--trace-ascii "),e("file")],1),s._v(" "),e("td",[s._v("Like --跟踪但没有hex输出")])]),s._v(" "),e("tr",[e("td",[s._v("--trace-time")]),s._v(" "),e("td",[s._v("跟踪/详细输出时，添加时间戳")])]),s._v(" "),e("tr",[e("td",[s._v("-T/--upload-file "),e("file")],1),s._v(" "),e("td",[s._v("上传文件")])]),s._v(" "),e("tr",[e("td",[s._v("--url "),e("URL")],1),s._v(" "),e("td",[s._v("Spet URL to work with")])]),s._v(" "),e("tr",[e("td",[s._v("-u/--user <user[:password]>")]),s._v(" "),e("td",[s._v("设置服务器的用户和密码")])]),s._v(" "),e("tr",[e("td",[s._v("-U/--proxy-user <user[:password]>")]),s._v(" "),e("td",[s._v("设置代理用户名和密码")])]),s._v(" "),e("tr",[e("td",[s._v("-"),e("a",{attrs:{href:"http://man.linuxde.net/w",target:"_blank",rel:"noopener noreferrer"}},[s._v("w"),e("OutboundLink")],1),s._v("/--"),e("a",{attrs:{href:"http://man.linuxde.net/write",target:"_blank",rel:"noopener noreferrer"}},[s._v("write"),e("OutboundLink")],1),s._v("-out [format]")]),s._v(" "),e("td",[s._v("什么输出完成后")])]),s._v(" "),e("tr",[e("td",[s._v("-x/--proxy <host[:port]>")]),s._v(" "),e("td",[s._v("在给定的端口上使用HTTP代理")])]),s._v(" "),e("tr",[e("td",[s._v("-X/--request <"),e("a",{attrs:{href:"http://man.linuxde.net/command",target:"_blank",rel:"noopener noreferrer"}},[s._v("command"),e("OutboundLink")],1),s._v(">")]),s._v(" "),e("td",[s._v("指定什么命令")])]),s._v(" "),e("tr",[e("td",[s._v("-y/--speed-time")]),s._v(" "),e("td",[s._v("放弃限速所要的时间，默认为30")])]),s._v(" "),e("tr",[e("td",[s._v("-Y/--speed-limit")]),s._v(" "),e("td",[s._v("停止传输速度的限制，速度时间")])])])]),s._v(" "),e("h3",{attrs:{id:"实例-5"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#实例-5"}},[s._v("#")]),s._v(" 实例")]),s._v(" "),e("p",[e("strong",[s._v("文件下载")])]),s._v(" "),e("p",[s._v("curl命令可以用来执行下载、发送各种HTTP请求，指定HTTP头部等操作。如果系统没有curl可以使用"),e("code",[s._v("yum install curl")]),s._v("安装，也可以下载安装。curl是将下载文件输出到stdout，将进度信息输出到stderr，不显示进度信息使用"),e("code",[s._v("--silent")]),s._v("选项。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("curl URL --silent\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("这条命令是将下载文件输出到终端，所有下载的数据都被写入到stdout。")]),s._v(" "),e("p",[s._v("使用选项"),e("code",[s._v("-O")]),s._v("将下载的数据写入到文件，必须使用文件的绝对地址：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("curl http://man.linuxde.net/text.iso --silent -O\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("选项"),e("code",[s._v("-o")]),s._v("将下载数据写入到指定名称的文件中，并使用"),e("code",[s._v("--progress")]),s._v("显示进度条：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("curl http://man.linuxde.net/test.iso -o filename.iso --progress\n######################################### 100.0%\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[e("strong",[s._v("断点续传")])]),s._v(" "),e("p",[s._v("curl能够从特定的文件偏移处继续下载，它可以通过指定一个便移量来下载部分文件：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("curl URL/File -C 偏移量\n\n#偏移量是以字节为单位的整数，如果让curl自动推断出正确的续传位置使用-C -：\ncurl -C -URL\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("p",[e("strong",[s._v("使用curl设置参照页字符串")])]),s._v(" "),e("p",[s._v("参照页是位于HTTP头部中的一个字符串，用来表示用户是从哪个页面到达当前页面的，如果用户点击网页A中的某个连接，那么用户就会跳转到B网页，网页B头部的参照页字符串就包含网页A的URL。")]),s._v(" "),e("p",[s._v("使用"),e("code",[s._v("--referer")]),s._v("选项指定参照页字符串：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("curl --referer http://www.google.com http://man.linuxde.net\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[e("strong",[s._v("用curl设置cookies")])]),s._v(" "),e("p",[s._v("使用"),e("code",[s._v('--cookie "COKKIES"')]),s._v("选项来指定cookie，多个cookie使用分号分隔：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('curl http://man.linuxde.net --cookie "user=root;pass=123456"\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("将cookie另存为一个文件，使用"),e("code",[s._v("--cookie-jar")]),s._v("选项：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("curl URL --cookie-jar cookie_file\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[e("strong",[s._v("用curl设置用户代理字符串")])]),s._v(" "),e("p",[s._v("有些网站访问会提示只能使用IE浏览器来访问，这是因为这些网站设置了检查用户代理，可以使用curl把用户代理设置为IE，这样就可以访问了。使用"),e("code",[s._v("--user-agent")]),s._v("或者"),e("code",[s._v("-A")]),s._v("选项：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('curl URL --user-agent "Mozilla/5.0"\ncurl URL -A "Mozilla/5.0"\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("其他HTTP头部信息也可以使用curl来发送，使用"),e("code",[s._v("-H")]),s._v('"头部信息" 传递多个头部信息，例如：')]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('curl -H "Host:man.linuxde.net" -H "accept-language:zh-cn" URL\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[e("strong",[s._v("curl的带宽控制和下载配额")])]),s._v(" "),e("p",[s._v("使用"),e("code",[s._v("--limit-rate")]),s._v("限制curl的下载速度：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("curl URL --limit-rate 50k\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("命令中用k（千字节）和m（兆字节）指定下载速度限制。")]),s._v(" "),e("p",[s._v("使用"),e("code",[s._v("--max-filesize")]),s._v("指定可下载的最大文件大小：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("curl URL --max-filesize bytes\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("如果文件大小超出限制，命令则返回一个非0退出码，如果命令正常则返回0。")]),s._v(" "),e("p",[e("strong",[s._v("用curl进行认证")])]),s._v(" "),e("p",[s._v("使用curl选项 -u 可以完成HTTP或者FTP的认证，可以指定密码，也可以不指定密码在后续操作中输入密码：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("curl -u user:pwd http://man.linuxde.net\ncurl -u user http://man.linuxde.net\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[e("strong",[s._v("只打印响应头部信息")])]),s._v(" "),e("p",[s._v("通过"),e("code",[s._v("-I")]),s._v("或者"),e("code",[s._v("-head")]),s._v("可以只打印出HTTP头部信息：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("[root@localhost text]# curl -I http://man.linuxde.net\nHTTP/1.1 200 OK\nServer: nginx/1.2.5\ndate: Mon, 10 Dec 2012 09:24:34 GMT\nContent-Type: text/html; charset=UTF-8\nConnection: keep-alive\nVary: Accept-Encoding\nX-Pingback: http://man.linuxde.net/xmlrpc.php\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("h1",{attrs:{id:"shell脚本中的while-getopts用法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#shell脚本中的while-getopts用法"}},[s._v("#")]),s._v(" Shell脚本中的while getopts用法")]),s._v(" "),e("p",[s._v("getpots是Shell命令行参数解析工具，旨在从Shell Script的命令行当中解析参数。getopts被Shell程序用来分析位置参数，option包含需要被识别的选项字符，"),e("strong",[s._v("如果这里的字符后面跟着一个冒号，表明该字符选项需要一个参数，其参数需要以空格分隔")]),s._v("。冒号和问号不能被用作选项字符。getopts每次被调用时，它会将下一个选项字符放置到变量中，OPTARG则可以拿到参数值；如果option前面加冒号，则代表忽略错误；")]),s._v(" "),e("p",[e("strong",[s._v("命令格式：")])]),s._v(" "),e("div",{staticClass:"language-javascript line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[s._v("getopts optstring name "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("arg"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("...")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[e("strong",[s._v("命令描述：")]),s._v(" optstring列出了对应的Shell Script可以识别的所有参数。比如：如果 Shell Script可以识别-a，-f以及-s参数，则optstring就是afs；如果对应的参数后面还跟随一个值，则在相应的optstring后面加冒号。比如，a:fs 表示a参数后面会有一个值出现，-a value的形式。另外，getopts执行匹配到a的时候，会把value存放在一个叫OPTARG的Shell Variable当中。如果 optstring是以冒号开头的，命令行当中出现了optstring当中没有的参数将不会提示错误信息。")]),s._v(" "),e("p",[s._v("name表示的是参数的名称，每次执行getopts，会从命令行当中获取下一个参数，然后存放到name当中。如果获取到的参数不在optstring当中列出，则name的值被设置为?。命令行当中的所有参数都有一个index，第一个参数从1开始，依次类推。 另外有一个名为OPTIND的Shell Variable存放下一个要处理的参数的index。")]),s._v(" "),e("h1",{attrs:{id:"shell编程之expect自动化交互程序"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#shell编程之expect自动化交互程序"}},[s._v("#")]),s._v(" Shell编程之Expect自动化交互程序")]),s._v(" "),e("h2",{attrs:{id:"expect自动化交互程序"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#expect自动化交互程序"}},[s._v("#")]),s._v(" Expect自动化交互程序")]),s._v(" "),e("h3",{attrs:{id:"_1-spawn命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-spawn命令"}},[s._v("#")]),s._v(" 1.spawn命令")]),s._v(" "),e("p",[s._v("通过spawn执行一个命令或程序，之后所有的Expect操作都会在这个执行过的命令或程序进程中进行，包括自动交互功能。")]),s._v(" "),e("p",[s._v("语法：\nspawn [ 选项 ] [ 需要自动交互的命令或程序 ]")]),s._v(" "),e("ul",[e("li",[s._v("-open 表示启动文件进程")]),s._v(" "),e("li",[s._v("-ignore 表示忽略某些信号")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("spawn ssh root@192.168.1.1 uptime\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"_2-expect命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-expect命令"}},[s._v("#")]),s._v(" 2.expect命令")]),s._v(" "),e("p",[s._v("获取spawn命令执行后的信息，看卡是否和其事先指定的相匹配，一旦匹配上指定的内容就执行expect")]),s._v(" "),e("p",[s._v("语法：\nexpect 表达式 [ 动作 ]")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('spawn ssh root@192.168.1.1 uptime\nexpect "*password" {sshd "123456\\r"}\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h3",{attrs:{id:"_3-expect实践"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-expect实践"}},[s._v("#")]),s._v(" 3.expect实践")]),s._v(" "),e("p",[s._v("（1）执行ssh命令远程获取服务器负载，并实现自动输入密码")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('[root@codis-178 ~]# cat 18_1.sh \n#!/bin/expect\n#Author:xiaoda\n#Time:2017-09-06 11:53:30\n#Name:18_1.sh\n#Version:V1.0\n#Description:This is a test script\n\nspawn ssh -p12541 test@192.168.1.22 uptime\nexpect "*password" {send "123456\\n"}\n\nexpect eof\n[root@codis-178 ~]# expect 18_1.sh \nspawn ssh -p12541 test@192.168.1.22 uptime\nAddress 192.168.1.22 maps to localhost, but this does not map back to the address - POSSIBLE BREAK-IN ATTEMPT!\ntest@192.168.1.22\'s password: \n 11:56:01 up 1754 days, 23:53,  0 users,  load average: 0.00, 0.00, 0.00\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br")])]),e("p",[s._v("说明：\n通过spawn执行ssh后，系统会提示输入密码，expect按照匹配password字符串，之后根据send或exp_send动作执行。")]),s._v(" "),e("p",[s._v("（2）执行ssh命令远程获取服务器负载，并自动输入“yes”及用户密码")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('[root@codis-178 ~]# cat 18_2.sh \n#!/bin/expect\n#Author:xiaoda\n#Time:2017-09-06 11:53:30\n#Name:18_1.sh\n#Version:V1.0\n#Description:This is a test script\n\nspawn ssh -p12541 test@192.168.1.22 uptime\nexpect {\n\t"yes/no" {exp_send "yes\\r";exp_continue}\n\t"*password" {exp_send "12345465\\r"}\n}\nexpect eof\n \n[root@codis-178 ~]# expect 18_2.sh \nspawn ssh -p12541 test@192.168.1.22 uptime\nAddress 192.168.1.22 maps to localhost, but this does not map back to the address - POSSIBLE BREAK-IN ATTEMPT!\ntest@192.168.1.22\'s password: \n 12:03:18 up 1755 days, 1 min,  0 users,  load average: 0.00, 0.00, 0.00\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br")])]),e("p",[s._v("（3）利用expect响应Shell脚本中的多个read读入")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('[root@codis-178 ~]# cat 18_3_1.sh\n#!/bin/bash\n#Author:xiaoda\n#Time:2017-09-06 12:05:38\n#Name:18_3_1.sh\n#Version:V1.0\n#Description:This is a test script\n\nread -p \'Please input your username:\' name\nread -p \'Please input your password:\' pass\nread -p \'Please input your email:\' email\necho -n "your name is $name."\necho -n "your password is $pass."\necho "your email is $email."\n\n[root@codis-178 ~]# cat 18_3_2.sh\n#!/bin/expect\n#Author:xiaoda\n#Time:2017-09-06 12:07:37\n#Name:18_3_2.sh\n#Version:V1.0\n#Description:This is a test script\n\nspawn /bin/sh 18_3_1.sh\nexpect {\n\t"username" {exp_send "oldboy\\r";exp_continue}\n\t"*pass*" {send "123456\\r";exp_continue}\n\t"*email*" {exp_send "12313@.qq.com\\r"}\n}\nexpect eof\'\n\n[root@codis-178 ~]# expect 18_3_2.sh \nspawn /bin/sh 18_3_1.sh\nPlease input your username:oldboy\nPlease input your password:123456\nPlease input your email:12313@.qq.com\nyour name is oldboy.your password is 123456.your email is 12313@.qq.com.\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br"),e("span",{staticClass:"line-number"},[s._v("29")]),e("br"),e("span",{staticClass:"line-number"},[s._v("30")]),e("br"),e("span",{staticClass:"line-number"},[s._v("31")]),e("br"),e("span",{staticClass:"line-number"},[s._v("32")]),e("br"),e("span",{staticClass:"line-number"},[s._v("33")]),e("br"),e("span",{staticClass:"line-number"},[s._v("34")]),e("br"),e("span",{staticClass:"line-number"},[s._v("35")]),e("br"),e("span",{staticClass:"line-number"},[s._v("36")]),e("br"),e("span",{staticClass:"line-number"},[s._v("37")]),e("br")])]),e("h3",{attrs:{id:"_4-命令简介"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-命令简介"}},[s._v("#")]),s._v(" 4.命令简介")]),s._v(" "),e("p",[s._v("（1）send命令\n发送指定的字符串给系统")]),s._v(" "),e("p",[s._v("（2）exp_continue命令\n让Expect程序继续匹配")]),s._v(" "),e("p",[s._v("（3）send_user命令\n用来打印Expect脚本信息，类似echo")]),s._v(" "),e("p",[s._v("（4）exit命令\n直接退出Expect脚本")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://image.aomtop.com/i/2022/06/13/62a6e32f60228.png",alt:"img"}})]),s._v(" "),e("h3",{attrs:{id:"_5-expect关键字"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-expect关键字"}},[s._v("#")]),s._v(" 5.Expect关键字")]),s._v(" "),e("p",[s._v("（1）eof\n用于匹配结束符")]),s._v(" "),e("p",[s._v("（2）timeout\n控制时间，是一个全局性的时间控制开关，可以通过为这个变量赋值来规定整个Expect操作的时间\n（即使命令没有任何错误，到了时间仍然会激活这个变量）")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('spqwn ssh root@192.168.1.1 uptime\nset timeout 30\nexpect "yes/no" {exp_send "yes\\r";exp_continue}\nexpect timeout {puts "Request timeout by oldboy.";return}\nspqwn ssh root@192.168.1.1 uptime\nexpect {\n    -timeout 3\n    expect "yes/no" {exp_send "yes\\r";exp_continue}\n    expect timeout {puts "Request timeout by oldboy.";return}\n}\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br")])]),e("h3",{attrs:{id:"_6-企业应用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_6-企业应用"}},[s._v("#")]),s._v(" 6.企业应用")]),s._v(" "),e("p",[s._v("（1）实现Expect自动交互")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('#!/usr/bin/expect\nif [ $argc != 2 ] {\n    puts "usage: expect $argv0 ip command"\n    exit\n}\n\nset ip [lindex $argv 0]\nset cmd [lindex $argv 1]\nset password "123456"\n\nspawn ssh root@192.168.1.1 $cmd\nexpect {\n    expect "yes/no" {exp_send "yes\\r";exp_continue}\n    "*password" {send "$password\\r"}\n}\nexport eof\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br")])]),e("p",[s._v("（2）批量发送文件")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('#!/usr/bin/expect\nif [ $argc != 3 ] {\n    puts "usage: expect $argv0 file host dir"\n    exit\n}\n\nset file [lindex $argv 0]\nset host [lindex $argv 1]\nset dir [lindex $argv 2]\nset password "123456"\n\nspawn ssh -P22 root@192.168.1.1 $cmd\nexpect {\n    expect "yes/no" {exp_send "yes\\r";exp_continue}\n    "*password" {send "$password\\r"}\n}\nexport eof\n\n#!/bin/bash\nif [ $# -ne 2 ];then\n    echo $"Usage:$0 file dir"\n    exit 1\nfi\nfile=$1\ndir=$2\nfor n in 128 129 130\ndo\n    expect 18_13_1.exp $file 192.168.1.$n $dir\ndone\n\n\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br"),e("span",{staticClass:"line-number"},[s._v("29")]),e("br"),e("span",{staticClass:"line-number"},[s._v("30")]),e("br"),e("span",{staticClass:"line-number"},[s._v("31")]),e("br")])]),e("h3",{attrs:{id:"_7-关于使用expect自动退出"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_7-关于使用expect自动退出"}},[s._v("#")]),s._v(" 7.关于使用expect自动退出")]),s._v(" "),e("p",[s._v("interact:表示登录远程机器后保留在登录的机器。如果不加这个interact,则登录后立马退出。或者使用 expect eof 这个命令，则会在登录机器后的2-3s后退出")]),s._v(" "),e("p",[s._v("不支持在EOF中使用")]),s._v(" "),e("h3",{attrs:{id:"_8-设置变量"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_8-设置变量"}},[s._v("#")]),s._v(" 8.设置变量")]),s._v(" "),e("p",[s._v("set host 192.168.200.200")]),s._v(" "),e("h1",{attrs:{id:"脚本开发练习"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#脚本开发练习"}},[s._v("#")]),s._v(" 脚本开发练习")]),s._v(" "),e("p",[s._v("1、各类监控脚本，文件、内存、磁盘、端口,URL 监控报警。\n2、如何监控网站目录文件是否被篡改，以及站点目录批量被篡改后如何恢复。\n3、如何开发各类服务rsync、nginx、mysql等的启动及停止专业脚本（使用chkconfig管理)。\n4、如何开发MySQL主从复制监控报警以及自动处理不复制的脚本。·\n5、一键配置mysql 多实例、一键配置mysql主从，N多一键部署脚本\n6、监控http/mysql/rsync/nfs/memcached等服务是否异常的生产脚本。。\n7、一键软件安装及优化，lanmp, linux一键优化，一键数据库安装，优化，配置主从。\n8、MySQL多实例启动脚本，分库、分表自动备份脚本。\n9、根据网络连接数以及根据 web日志PV封IP的脚本。\n10、监控网站的pv以及流量，并且对流量信息进行统计。\n11、检查web 服务器多个URL地址是否异常，要可以批量及通用。\n12、系统的基础优化一键优化的脚本。\n13、清理系统垃圾及文件(过期备份，clientmquene目录等）脚本。\n14、tcp连接状态统计。\n15、批量创建用户并设置随机8位密码。\n16、批量获取服务器信息、批量分发文件。·")]),s._v(" "),e("p",[s._v("脚本注释规范")])])}),[],!1,null,null,null);a.default=t.exports}}]);