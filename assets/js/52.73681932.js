(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{543:function(s,n,a){"use strict";a.r(n);var e=a(22),t=Object(e.a)({},(function(){var s=this,n=s.$createElement,a=s._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[a("strong",[s._v("支持的硬件平台")])]),s._v(" "),a("p",[s._v("openGauss支持运行在鲲鹏服务器和通用的x86服务器上：")]),s._v(" "),a("p",[s._v("支持鲲鹏服务器和基于x86_64的通用PC服务器。")]),s._v(" "),a("p",[s._v("支持本地存储（SATA、SAS、SSD）。")]),s._v(" "),a("p",[s._v("支持千兆、万兆Ethernet网络。")]),s._v(" "),a("p",[a("strong",[s._v("支持的操作系统")])]),s._v(" "),a("p",[s._v("ARM:")]),s._v(" "),a("p",[s._v("openEuler 20.03 LTS （推荐采用此操作系统）")]),s._v(" "),a("p",[s._v("麒麟V10")]),s._v(" "),a("p",[s._v("X86:")]),s._v(" "),a("p",[s._v("openEuler 20.03 LTS")]),s._v(" "),a("p",[s._v("CentOS 7.6")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://image.aomtop.com/i/2022/06/24/62b52d5ad6040.png",alt:"img"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"https://image.aomtop.com/i/2022/06/24/62b52d5b1e325.png",alt:"img"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"https://image.aomtop.com/i/2022/06/24/62b52d5b5a80b.png",alt:"img"}})]),s._v(" "),a("p",[s._v("最小内存")]),s._v(" "),a("p",[s._v("功能调试32GB以上。")]),s._v(" "),a("p",[s._v("CPU")]),s._v(" "),a("p",[s._v("功能调试最小1×8 核 2.0GHz。")]),s._v(" "),a("p",[s._v("安装")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://image.aomtop.com/i/2022/06/24/62b52d5b97f95.png",alt:"img"}})]),s._v(" "),a("p",[a("strong",[s._v("安装****openGauss")])]),s._v(" "),a("p",[a("a",{attrs:{href:"https://opengauss.org/zh/docs/1.0.1/docs/installation/%E5%88%9B%E5%BB%BAXML%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6.html",target:"_blank",rel:"noopener noreferrer"}},[a("strong",[s._v("创建XML****配置文件")]),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("安装openGauss前需要创建cluster_config.xml文件。cluster_config.xml文件包含部署openGauss的服务器信息、安装路径、IP地址以及端口号等。用于告知openGauss如何部署。用户需根据不同场配置对应的XML文件。")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://opengauss.org/zh/docs/1.0.1/docs/installation/%E5%88%9D%E5%A7%8B%E5%8C%96%E5%AE%89%E8%A3%85%E7%8E%AF%E5%A2%83.html",target:"_blank",rel:"noopener noreferrer"}},[a("strong",[s._v("初始化安装环境")]),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("为了保证openGauss的正确安装，请首先对主机环境进行配置。")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://opengauss.org/zh/docs/1.0.1/docs/installation/%E6%89%A7%E8%A1%8C%E5%AE%89%E8%A3%85.html",target:"_blank",rel:"noopener noreferrer"}},[a("strong",[s._v("执行安装")]),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("执行前置脚本准备好openGauss安装环境之后，按照启动安装过程部署openGauss。")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://opengauss.org/zh/docs/1.0.1/docs/installation/%E5%88%9D%E5%A7%8B%E5%8C%96%E6%95%B0%E6%8D%AE%E5%BA%93.html",target:"_blank",rel:"noopener noreferrer"}},[a("strong",[s._v("初始化数据库")]),a("OutboundLink")],1)]),s._v(" "),a("p",[a("a",{attrs:{href:"https://opengauss.org/zh/docs/1.0.1/docs/installation/%E5%8F%AF%E9%80%89_%E8%AE%BE%E7%BD%AE%E5%A4%87%E6%9C%BA%E5%8F%AF%E8%AF%BB.html",target:"_blank",rel:"noopener noreferrer"}},[a("strong",[s._v("（可选）设置备机可读")]),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("备机可读特性为可选特性，需要修改配置参数并重启主备机器后才能使用。在开启备机可读之后，备机将支持读操作，并满足数据一致性要求。")]),s._v(" "),a("p",[s._v("yum install python36 bzip2 libaio-devel flex bison ncurses-devel glibc-devel patch")]),s._v(" "),a("p",[s._v("1.6 修改操作系统配置")]),s._v(" "),a("p",[s._v("（1）关闭防火墙和SeLinux")]),s._v(" "),a("p",[s._v("systemctl disable firewalld.service")]),s._v(" "),a("p",[s._v("systemctl stop firewalld.service")]),s._v(" "),a("p",[s._v("sed -i 's/^SELINUX=.*/SELINUX=disabled/' /etc/selinux/config")]),s._v(" "),a("p",[s._v("setenforce 0")]),s._v(" "),a("p",[s._v("（2）设置字符集参数")]),s._v(" "),a("p",[s._v('if [ "$LANG" != "en_US.UTF-8" ];then')]),s._v(" "),a("p",[s._v("export LANG=en_US.UTF-8")]),s._v(" "),a("p",[s._v("echo export LANG=en_US.UTF-8 >> /etc/profile")]),s._v(" "),a("p",[s._v("fi")]),s._v(" "),a("p",[s._v("（3）检查设置时区")]),s._v(" "),a("p",[s._v("ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime")]),s._v(" "),a("p",[s._v("（4）关闭swap交换区")]),s._v(" "),a("p",[s._v("swapoff -a")]),s._v(" "),a("p",[s._v("（5）检查设置网卡MTU值")]),s._v(" "),a("p",[s._v("推荐值是1500<MTU<8192，但默认的虚拟机环境是1500，不用修改")]),s._v(" "),a("p",[s._v("1 [root@localhost ~]# ifconfig | grep ens32")]),s._v(" "),a("p",[s._v("2 ens32: flags=4163<UP,BROADCAST,RUNNING,MULTICAST> mtu 1500")]),s._v(" "),a("p",[s._v("（6）设置root用户远程登录配置")]),s._v(" "),a("p",[s._v("sed -i 's/^Banner .*/Banner none/' /etc/selinux/config")]),s._v(" "),a("p",[s._v("sed -i 's/^#PermitRootLogin .*/PermitRootLogin yes/' /etc/selinux/config")]),s._v(" "),a("p",[s._v("sed -i 's/^PermitRootLogin no/PermitRootLogin yes/' /etc/selinux/config")]),s._v(" "),a("p",[s._v("systemctl restart sshd")]),s._v(" "),a("p",[s._v("（7）修改操作系统参数（可选）")]),s._v(" "),a("p",[s._v("​    有部分内核参数建议手动修改。")]),s._v(" "),a("p",[s._v("echo 5 > /proc/sys/net/ipv4/tcp_retries1")]),s._v(" "),a("p",[s._v("echo 5 > /proc/sys/net/ipv4/tcp_syn_retries")]),s._v(" "),a("p",[s._v("echo 10 > /proc/sys/net/sctp/path_max_retrans")]),s._v(" "),a("p",[s._v("echo 10 > /proc/sys/net/sctp/max_init_retransmits")]),s._v(" "),a("p",[s._v("echo net.ipv4.tcp_retries1 = 5 >>/etc/sysctl.conf")]),s._v(" "),a("p",[s._v("echo net.ipv4.tcp_syn_retries = 5 >>/etc/sysctl.conf")]),s._v(" "),a("p",[s._v("echo net.sctp.path_max_retrans = 10 >>/etc/sysctl.conf")]),s._v(" "),a("p",[s._v("echo net.sctp.max_init_retransmits = 10 >>/etc/sysctl.conf")]),s._v(" "),a("p",[s._v('echo "* soft nofile 1000000" >>/etc/security/limits.conf')]),s._v(" "),a("p",[s._v('echo "* hard nofile 1000000" >>/etc/security/limits.conf')]),s._v(" "),a("p",[s._v('echo "* soft nproc 60000" >> /etc/security/limits.d/90‐nproc.conf')]),s._v(" "),a("p",[s._v("关闭透明大页")]),s._v(" "),a("p",[s._v("设置后需要重启生效")]),s._v(" "),a("p",[s._v("vim /etc/rc.d/rc.local")]),s._v(" "),a("p",[s._v("if test -f /sys/kernel/mm/transparent_hugepage/enabled; then")]),s._v(" "),a("p",[s._v("echo never > /sys/kernel/mm/transparent_hugepage/enabled")]),s._v(" "),a("p",[s._v("fi")]),s._v(" "),a("p",[s._v("if test -f /sys/kernel/mm/transparent_hugepage/defrag; then")]),s._v(" "),a("p",[s._v("echo never > /sys/kernel/mm/transparent_hugepage/defrag")]),s._v(" "),a("p",[s._v("fi")]),s._v(" "),a("p",[s._v("chmod +x /etc/rc.d/rc.local")]),s._v(" "),a("p",[s._v("查看是否关闭")]),s._v(" "),a("p",[s._v("cat /sys/kernel/mm/transparent_hugepage/enabled")]),s._v(" "),a("p",[s._v("cat /sys/kernel/mm/transparent_hugepage/defrag")]),s._v(" "),a("p",[s._v("1.14 修改主机名")]),s._v(" "),a("p",[s._v('echo "gaussdb" > /etc/hostname')]),s._v(" "),a("p",[s._v('echo "192.168.10.112 gaussdb" >>/etc/hosts')]),s._v(" "),a("p",[s._v("hostnamectl set-hostname gaussdb")]),s._v(" "),a("p",[s._v("（8）NTP配置（可选）")]),s._v(" "),a("p",[s._v("​    系统可能没有安装NTP时间同步服务，需要手动安装并开启。")]),s._v(" "),a("p",[s._v("yum install -y ntp")]),s._v(" "),a("p",[s._v("systemctl start ntpd && systemctl enable ntpd")]),s._v(" "),a("p",[s._v("修改系统版本为7.6")]),s._v(" "),a("p",[s._v("vim /etc/redhat-release")]),s._v(" "),a("p",[s._v("CentOS Linux release 7.6 (Core)")]),s._v(" "),a("p",[s._v("groupadd dbgrp")]),s._v(" "),a("p",[s._v("useradd -g dbgrp omm")]),s._v(" "),a("p",[s._v("mkdir -p /opt/software/openGauss")]),s._v(" "),a("p",[s._v("chmod 755 -R /opt/software")]),s._v(" "),a("p",[s._v("cd /opt/software/openGauss")]),s._v(" "),a("p",[s._v("tar -zxvf openGauss-1.0.1-openEULER-64bit.tar.gz")]),s._v(" "),a("p",[s._v("vi /tmp/clusterconfig.xml")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('单节点配置文件示例：\n\n<?xml version="1.0" encoding="UTF-8"?>\n\n<ROOT>\n\n  \x3c!-- openGauss整体信息 --\x3e\n\n  <CLUSTER>\n\n​    <PARAM name="clusterName" value="dbCluster" />\n\n​    <PARAM name="nodeNames" value="gaussdb" />\n\n​    <PARAM name="backIp1s" value="192.168.1.227"/>\n\n​    <PARAM name="gaussdbAppPath" value="/opt/huawei/install/app" />\n\n​    <PARAM name="gaussdbLogPath" value="/var/log/omm" />\n\n​    <PARAM name="tmpMppdbPath" value="/opt/huawei/tmp" />\n\n​    <PARAM name="gaussdbToolPath" value="/opt/huawei/install/om" />\n\n​    <PARAM name="corePath" value="/opt/huawei/corefile" />\n\n​    <PARAM name="clusterType" value="single-inst"/>\n\n  </CLUSTER>\n\n  \x3c!-- 每台服务器上的节点部署信息 --\x3e\n\n  <DEVICELIST>\n\n​    \x3c!-- node1上的节点部署信息 --\x3e\n\n​    <DEVICE sn="1000001">\n\n​      <PARAM name="name" value="gaussdb"/>\n\n​      <PARAM name="azName" value="AZ1"/>\n\n​      <PARAM name="azPriority" value="1"/>\n\n​      \x3c!-- 如果服务器只有一个网卡可用，将backIP1和sshIP1配置成同一个IP --\x3e\n\n​      <PARAM name="backIp1" value="192.168.1.227"/>\n\n​      <PARAM name="sshIp1" value="192.168.1.227"/>\n\n​      \n\n​      \x3c!--dbnode--\x3e\n\n​      <PARAM name="dataNum" value="1"/>\n\n​      <PARAM name="dataPortBase" value="26000"/>\n\n​      <PARAM name="dataNode1" value="/opt/huawei/install/data/db1"/>\n\n​    </DEVICE>\n\n  </DEVICELIST>\n\n</ROOT>\n\n​    一主一备配置文件示例：\n\n<?xml version="1.0" encoding="UTF-8"?>\n\n<ROOT>\n\n  \x3c!-- openGauss整体信息 --\x3e\n\n  <CLUSTER>\n\n​    <PARAM name="clusterName" value="dbCluster" />\n\n​    <PARAM name="nodeNames" value="gaussdb1.sugon.com,gaussdb2.sugon.com" />\n\n​    <PARAM name="backIp1s" value="192.168.5.11,192.168.5.12"/>\n\n​    <PARAM name="gaussdbAppPath" value="/opt/huawei/install/app" />\n\n​    <PARAM name="gaussdbLogPath" value="/var/log/omm" />\n\n​    <PARAM name="tmpMppdbPath" value="/opt/huawei/tmp"/>\n\n​    <PARAM name="gaussdbToolPath" value="/opt/huawei/install/om" />\n\n​    <PARAM name="corePath" value="/opt/huawei/corefile"/>\n\n​    <PARAM name="clusterType" value="single-inst"/>\n\n  </CLUSTER>\n\n  \x3c!-- 每台服务器上的节点部署信息 --\x3e\n\n  <DEVICELIST>\n\n​    \x3c!-- node1上的节点部署信息 --\x3e\n\n​    <DEVICE sn="1000001">\n\n​      <PARAM name="name" value="gaussdb1.sugon.com"/>\n\n​      <PARAM name="azName" value="AZ1"/>\n\n​      <PARAM name="azPriority" value="1"/>\n\n​      \x3c!-- 如果服务器只有一个网卡可用，将backIP1和sshIP1配置成同一个IP --\x3e\n\n​      <PARAM name="backIp1" value="192.168.5.11"/>\n\n​      <PARAM name="sshIp1" value="192.168.5.11"/>\n\n​      \n\n​      \x3c!--dbnode--\x3e\n\n​      <PARAM name="dataNum" value="1"/>\n\n​      <PARAM name="dataPortBase" value="26000"/>\n\n​      <PARAM name="dataNode1" value="/opt/huawei/install/data/db1,gaussdb2.sugon.com,/opt/huawei/install/data/db1"/>\n\n​    </DEVICE>\n\n​    \x3c!-- node2上的节点部署信息，其中“name”的值配置为主机名称 --\x3e\n\n​    <DEVICE sn="1000002">\n\n​      <PARAM name="name" value="gaussdb2.sugon.com"/>\n\n​      <PARAM name="azName" value="AZ1"/>\n\n​      <PARAM name="azPriority" value="1"/>\n\n​      \x3c!-- 如果服务器只有一个网卡可用，将backIP1和sshIP1配置成同一个IP --\x3e\n\n​      <PARAM name="backIp1" value="192.168.5.12"/>\n\n​      <PARAM name="sshIp1" value="192.168.5.12"/>\n\n​    </DEVICE>\n\n  </DEVICELIST>\n\n</ROOT>\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br"),a("span",{staticClass:"line-number"},[s._v("74")]),a("br"),a("span",{staticClass:"line-number"},[s._v("75")]),a("br"),a("span",{staticClass:"line-number"},[s._v("76")]),a("br"),a("span",{staticClass:"line-number"},[s._v("77")]),a("br"),a("span",{staticClass:"line-number"},[s._v("78")]),a("br"),a("span",{staticClass:"line-number"},[s._v("79")]),a("br"),a("span",{staticClass:"line-number"},[s._v("80")]),a("br"),a("span",{staticClass:"line-number"},[s._v("81")]),a("br"),a("span",{staticClass:"line-number"},[s._v("82")]),a("br"),a("span",{staticClass:"line-number"},[s._v("83")]),a("br"),a("span",{staticClass:"line-number"},[s._v("84")]),a("br"),a("span",{staticClass:"line-number"},[s._v("85")]),a("br"),a("span",{staticClass:"line-number"},[s._v("86")]),a("br"),a("span",{staticClass:"line-number"},[s._v("87")]),a("br"),a("span",{staticClass:"line-number"},[s._v("88")]),a("br"),a("span",{staticClass:"line-number"},[s._v("89")]),a("br"),a("span",{staticClass:"line-number"},[s._v("90")]),a("br"),a("span",{staticClass:"line-number"},[s._v("91")]),a("br"),a("span",{staticClass:"line-number"},[s._v("92")]),a("br"),a("span",{staticClass:"line-number"},[s._v("93")]),a("br"),a("span",{staticClass:"line-number"},[s._v("94")]),a("br"),a("span",{staticClass:"line-number"},[s._v("95")]),a("br"),a("span",{staticClass:"line-number"},[s._v("96")]),a("br"),a("span",{staticClass:"line-number"},[s._v("97")]),a("br"),a("span",{staticClass:"line-number"},[s._v("98")]),a("br"),a("span",{staticClass:"line-number"},[s._v("99")]),a("br"),a("span",{staticClass:"line-number"},[s._v("100")]),a("br"),a("span",{staticClass:"line-number"},[s._v("101")]),a("br"),a("span",{staticClass:"line-number"},[s._v("102")]),a("br"),a("span",{staticClass:"line-number"},[s._v("103")]),a("br"),a("span",{staticClass:"line-number"},[s._v("104")]),a("br"),a("span",{staticClass:"line-number"},[s._v("105")]),a("br"),a("span",{staticClass:"line-number"},[s._v("106")]),a("br"),a("span",{staticClass:"line-number"},[s._v("107")]),a("br"),a("span",{staticClass:"line-number"},[s._v("108")]),a("br"),a("span",{staticClass:"line-number"},[s._v("109")]),a("br"),a("span",{staticClass:"line-number"},[s._v("110")]),a("br"),a("span",{staticClass:"line-number"},[s._v("111")]),a("br"),a("span",{staticClass:"line-number"},[s._v("112")]),a("br"),a("span",{staticClass:"line-number"},[s._v("113")]),a("br"),a("span",{staticClass:"line-number"},[s._v("114")]),a("br"),a("span",{staticClass:"line-number"},[s._v("115")]),a("br"),a("span",{staticClass:"line-number"},[s._v("116")]),a("br"),a("span",{staticClass:"line-number"},[s._v("117")]),a("br"),a("span",{staticClass:"line-number"},[s._v("118")]),a("br"),a("span",{staticClass:"line-number"},[s._v("119")]),a("br"),a("span",{staticClass:"line-number"},[s._v("120")]),a("br"),a("span",{staticClass:"line-number"},[s._v("121")]),a("br"),a("span",{staticClass:"line-number"},[s._v("122")]),a("br"),a("span",{staticClass:"line-number"},[s._v("123")]),a("br"),a("span",{staticClass:"line-number"},[s._v("124")]),a("br"),a("span",{staticClass:"line-number"},[s._v("125")]),a("br"),a("span",{staticClass:"line-number"},[s._v("126")]),a("br"),a("span",{staticClass:"line-number"},[s._v("127")]),a("br"),a("span",{staticClass:"line-number"},[s._v("128")]),a("br"),a("span",{staticClass:"line-number"},[s._v("129")]),a("br"),a("span",{staticClass:"line-number"},[s._v("130")]),a("br"),a("span",{staticClass:"line-number"},[s._v("131")]),a("br"),a("span",{staticClass:"line-number"},[s._v("132")]),a("br"),a("span",{staticClass:"line-number"},[s._v("133")]),a("br"),a("span",{staticClass:"line-number"},[s._v("134")]),a("br"),a("span",{staticClass:"line-number"},[s._v("135")]),a("br"),a("span",{staticClass:"line-number"},[s._v("136")]),a("br"),a("span",{staticClass:"line-number"},[s._v("137")]),a("br"),a("span",{staticClass:"line-number"},[s._v("138")]),a("br"),a("span",{staticClass:"line-number"},[s._v("139")]),a("br"),a("span",{staticClass:"line-number"},[s._v("140")]),a("br"),a("span",{staticClass:"line-number"},[s._v("141")]),a("br"),a("span",{staticClass:"line-number"},[s._v("142")]),a("br"),a("span",{staticClass:"line-number"},[s._v("143")]),a("br"),a("span",{staticClass:"line-number"},[s._v("144")]),a("br"),a("span",{staticClass:"line-number"},[s._v("145")]),a("br"),a("span",{staticClass:"line-number"},[s._v("146")]),a("br"),a("span",{staticClass:"line-number"},[s._v("147")]),a("br"),a("span",{staticClass:"line-number"},[s._v("148")]),a("br"),a("span",{staticClass:"line-number"},[s._v("149")]),a("br")])]),a("p",[s._v("cd /opt/software/openGauss/script")]),s._v(" "),a("p",[s._v("./gs_preinstall -U omm -G dbgrp -L -X /opt/software/openGauss/cluster_config.xml")]),s._v(" "),a("p",[s._v("2.2 初始化安装环境")]),s._v(" "),a("p",[s._v("（1）openEuler需修改脚本")]),s._v(" "),a("p",[s._v("# openEuler 需要执行以下操作，注释掉vm.min_free_kbytes=112640行")]),s._v(" "),a("p",[s._v("# sed -i 's/^sysctl -w vm.min_free_kbytes=112640/#&/' /etc/profile.d/performance.sh")]),s._v(" "),a("p",[s._v("（2）配置LD_LIBRARY_PATH环境变量，否则密码验证会报错")]),s._v(" "),a("p",[s._v("export LD_LIBRARY_PATH=/opt/soft/opengauss/script/gspylib/clib:$LD_LIBRARY_PATH")]),s._v(" "),a("p",[s._v("（3）执行gs_preinstall初始化安装环境")]),s._v(" "),a("p",[s._v("cd /opt/software/opengauss/script")]),s._v(" "),a("p",[s._v("./gs_preinstall -U omm -G dbgrp -X /tmp/clusterconfig.xml")]),s._v(" "),a("p",[s._v("2.3 执行安装")]),s._v(" "),a("p",[s._v("强制释放cache")]),s._v(" "),a("p",[s._v("sync;echo 1 > /proc/sys/vm/drop_caches")]),s._v(" "),a("p",[s._v("修改postgressql.conf")]),s._v(" "),a("p",[s._v("vim /opt/huawei/install/data/db1/postgresql.conf")]),s._v(" "),a("p",[s._v("修改")]),s._v(" "),a("p",[s._v("shared_buffers = 256MB")]),s._v(" "),a("p",[s._v("chown -R omm.dbgrp /opt/software")]),s._v(" "),a("p",[s._v("chown -R omm.dbgrp /home/omm")]),s._v(" "),a("p",[s._v("su - omm")]),s._v(" "),a("p",[s._v("ssh-keygen -t rsa")]),s._v(" "),a("p",[s._v("cat ~/.ssh/id_rsa.pub >> ~/.ssh/authorized_keys")]),s._v(" "),a("p",[s._v("gs_install -X /tmp/clusterconfig.xml")]),s._v(" "),a("p",[s._v("启动数据库")]),s._v(" "),a("p",[s._v("gs_ctl start -D /opt/huawei/install/data/db1")]),s._v(" "),a("p",[a("strong",[s._v("数据库操作指南")])]),s._v(" "),a("p",[s._v("连接数据库")]),s._v(" "),a("p",[s._v("gsql -d postgres -p 26000")]),s._v(" "),a("p",[s._v("设置密码")]),s._v(" "),a("p",[s._v("=# ALTER ROLE omm IDENTIFIED BY 'New_Password' REPLACE ' Old_Password';")]),s._v(" "),a("p",[s._v("ALTER ROLE omm IDENTIFIED BY 'leden' REPLACE '2021@abcd';")]),s._v(" "),a("p",[s._v("（3） 检查数据库状态，性能")]),s._v(" "),a("p",[s._v("gs_om -t status --detail")]),s._v(" "),a("p",[s._v("gs_om -t status --all")]),s._v(" "),a("p",[s._v("gs_checkperf")]),s._v(" "),a("p",[s._v("卸载重装")]),s._v(" "),a("p",[s._v("4.1 卸载")]),s._v(" "),a("p",[s._v("​    在主节点，登录omm用户，执行gs_uninstall脚本即可完成openGauss卸载。")]),s._v(" "),a("p",[s._v("su – omm")]),s._v(" "),a("p",[s._v("gs_uninstall --delete-data")]),s._v(" "),a("p",[s._v("userdel -r omm")]),s._v(" "),a("p",[s._v("远程登录数据库")]),s._v(" "),a("p",[s._v('gs_guc set -N all -I all -h "host all leden 192.168.1.0/24 sha256"')]),s._v(" "),a("p",[s._v("登陆数据库")]),s._v(" "),a("p",[s._v("gsql -d postgres -p 26000")]),s._v(" "),a("p",[s._v("postgres=# CREATE USER xinjiang PASSWORD '2020@abcd';")]),s._v(" "),a("p",[s._v("授权")]),s._v(" "),a("p",[s._v("新建权限")]),s._v(" "),a("p",[s._v("alter user leden createrole;")]),s._v(" "),a("p",[s._v("系统权限")]),s._v(" "),a("p",[s._v("grant all privileges to leden;")]),s._v(" "),a("p",[s._v("新建用户")]),s._v(" "),a("p",[s._v("CREATE USER presoninfo PASSWORD '2020@abcd';")]),s._v(" "),a("p",[s._v("修改密码")]),s._v(" "),a("p",[s._v("alter user xinjiang identified by 'Aa123456' replace '2020@abcd';")]),s._v(" "),a("p",[s._v("例如，下面示例中配置允许IP地址为10.10.0.30的客户端访问本机。")]),s._v(" "),a("p",[s._v('gs_guc set -N all -I all -h "host all jack 10.10.0.30/32 sha256"')]),s._v(" "),a("p",[s._v("修改数据库的最大连接数。")]),s._v(" "),a("p",[s._v("ALTER DATABASE database_name")]),s._v(" "),a("p",[s._v("[ [ WITH ] CONNECTION LIMIT connlimit ];")]),s._v(" "),a("p",[s._v("修改数据库名称。")]),s._v(" "),a("p",[s._v("ALTER DATABASE database_name")]),s._v(" "),a("p",[s._v("RENAME TO new_name;")]),s._v(" "),a("p",[s._v("修改数据库所属者。")]),s._v(" "),a("p",[s._v("ALTER DATABASE database_name")]),s._v(" "),a("p",[s._v("OWNER TO new_owner;")]),s._v(" "),a("p",[s._v("修改数据库默认表空间。")]),s._v(" "),a("p",[s._v("ALTER DATABASE database_name")]),s._v(" "),a("p",[s._v("SET TABLESPACE new_tablespace;")]),s._v(" "),a("p",[s._v("修改数据库指定会话参数值。")]),s._v(" "),a("p",[s._v("ALTER DATABASE database_name")]),s._v(" "),a("p",[s._v("SET configuration_parameter { { TO | = } { value | DEFAULT } | FROM CURRENT };")]),s._v(" "),a("p",[s._v("数据库配置参数重置。")]),s._v(" "),a("p",[s._v("ALTER DATABASE database_name RESET")]),s._v(" "),a("p",[s._v("{ configuration_parameter | ALL };")]),s._v(" "),a("p",[s._v("修改数据库对象隔离属性。")]),s._v(" "),a("p",[s._v("ALTER DATABASE database_name [ WITH ] { ENABLE | DISABLE } PRIVATE OBJECT;")]),s._v(" "),a("p",[s._v("使用gs_dump导出postgres数据库")]),s._v(" "),a("p",[s._v("gs_dump -W 2020@abcd -U xinjiang -f /tmp/postgres_backup.tar -p 26000 postgres -F t")]),s._v(" "),a("p",[s._v("使用gs_dump同时导出hr和public模式")]),s._v(" "),a("p",[s._v("gs_dump -W Bigdata@123 -U jack -f /home/omm/backup/MPPDB_schema_backup -p 8000 human_resource -n hr -F d")])])}),[],!1,null,null,null);n.default=t.exports}}]);