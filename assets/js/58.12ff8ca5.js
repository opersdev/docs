(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{550:function(t,e,n){"use strict";n.r(e);var a=n(22),o=Object(a.a)({},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h4",{attrs:{id:"三、解析方案"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#三、解析方案"}},[t._v("#")]),t._v(" 三、解析方案")]),t._v(" "),n("p",[t._v("一般修复方法参考：")]),t._v(" "),n("h5",{attrs:{id:"第一种方法"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第一种方法"}},[t._v("#")]),t._v(" 第一种方法")]),t._v(" "),n("p",[t._v("建立一张新表：\ncreate table demo_bak  #和原表结构一样，只是把INNODB改成了MYISAM。\n把数据导进去\ninsert into demo_bak select * from demo;\n删除掉原表：\ndrop table demo;\n注释掉 innodb_force_recovery 之后，重启。\n重命名：\nrename table demo_bak to demo;\n最后改回存储引擎：\nalter table demo engine = innodb")]),t._v(" "),n("h5",{attrs:{id:"第二种方法"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第二种方法"}},[t._v("#")]),t._v(" 第二种方法")]),t._v(" "),n("p",[t._v("另一个方法是使用mysqldump将表格导出，然后再导回到InnoDB表中。这两种方法的结果是相同的。\n备份导出(包括结构和数据)：\nmysqldump -uroot -p123 test > test.sql\n还原方法1：\nuse test;\nsource test.sql\n还原方法2（系统命令行）：\nmysql -uroot -p123 test < test.sql;\n注意，CHECK TABLE命令在InnoDB数据库中基本上是没有用的。")]),t._v(" "),n("h5",{attrs:{id:"第三种方法"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第三种方法"}},[t._v("#")]),t._v(" 第三种方法")]),t._v(" "),n("p",[t._v("1、配置my.cnf\n配置innodb_force_recovery = 1或2——6几个数字，重启MySQL")]),t._v(" "),n("p",[t._v("2、导出数据脚本\nmysqldump -uroot -p123 test > test.sql\n导出SQL脚本。或者用Navicat将所有数据库/表导入到其他服务器的数据库中。\n注意：这里的数据一定要备份成功。然后删除原数据库中的数据。")]),t._v(" "),n("p",[t._v("3、删除ib_logfile0、ib_logfile1、ibdata1\n备份MySQL数据目录下的ib_logfile0、ib_logfile1、ibdata1三个文件，然后将这三个文件删除")]),t._v(" "),n("p",[t._v("4、配置my.cnf\n将my.cnf中innodb_force_recovery = 1或2——6几个数字这行配置删除或者配置为innodb_force_recovery = 0，重启MySQL服务")]),t._v(" "),n("p",[t._v("5、将数据导入MySQL数据库\nmysql -uroot -p123 test < test.sql; 或者用Navicat将备份的数据导入到数据库中。\n此种方法下要注意的问题：\n1、ib_logfile0、ib_logfile1、ibdata1这三个文件一定要先备份后删除；\n2、一定要确认原数据导出成功了\n3、当数据导出成功后，删除原数据库中的数据时，如果提示不能删除，可在命令行进入MySQL的数据目录，手动删除相关数据库的文件夹或者数据库文件夹下的数据表文件，前提是数据一定导出或备份成功。")])])}),[],!1,null,null,null);e.default=o.exports}}]);