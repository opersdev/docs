(window.webpackJsonp=window.webpackJsonp||[]).push([[92],{584:function(n,v,_){"use strict";_.r(v);var l=_(22),p=Object(l.a)({},(function(){var n=this,v=n.$createElement,_=n._self._c||v;return _("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[_("p",[n._v("首先结合软件生命周期、项目的开展，数据库的生命周期大致可分为这么几个阶段：\n项目生命周期")]),n._v(" "),_("p",[n._v("其中“规划”、“开发”、“实施”所要做的主要工作如下：")]),n._v(" "),_("ol",[_("li",[_("p",[n._v("规划：在立项后，对于数据库平台的软硬件选型，以及大致的数据库架构。\n1.1 配置多少台服务器，服务器的内存大小/磁盘空间、IOPS/CPU核数/网络带宽等；\n1.2 选择的操作系统/数据库产品/第三方工具，及相应版本；\n1.3 整体架构，比如是否考虑：HA, Scale out, load balance, 读写分离等策略。")])]),n._v(" "),_("li",[_("p",[n._v("开发：开发的工作，通常是在开发/测试环境上进行的，测试结束后搬到生产环境。\n2.1 数据库设计；\n2.2 SQL编程及调试；\n2.3 开发过程中的SQL优化。")])]),n._v(" "),_("li",[_("p",[n._v("实施：开发的数据库程序到生产环境的部署。到这里，基本是项目上线了。后面就进入了运维阶段。\n3.1 前期规划时数据库物理架构的部署；\n3.2 开发/测试完成的数据库程序部署。")])])]),n._v(" "),_("p",[n._v("接下来，对于运维工程师来说，这是你的主要工作了，我们详细介绍下：")]),n._v(" "),_("p",[n._v("一. 数据库运维做些什么？\n从上面的图来看，运维是项目上线后的工作。看看从项目上线开始，运维都做了什么。")]),n._v(" "),_("ol",[_("li",[_("p",[n._v("部署环境\n1.1 数据库安装（如果服务器太多，可以选择静默安装）；\n1.2 参数配置（操作系统、数据库实例、数据库参数）；\n1.3 权限分配（登录、数据库用户权限）。")])]),n._v(" "),_("li",[_("p",[n._v("备份/还原\n对于数据库来说，有个可用的备份是非常重要的，防止有数据损坏，用户误操作等造成的数据丢失。保证了数据的存在，运维才有意义，否则其他工作做的再好也是白搭。")])]),n._v(" "),_("li",[_("p",[n._v("监控\n对于运维来说，首先要保证数据库的运行，然后就是运行中系统的性能。所以监控主要分为这两点：\n3.1 数据库运行状态，有没有什么数据库中断或异常、错误或警告？\n3.2 数据库性能，有没有什么性能问题或者性能隐患？")])]),n._v(" "),_("li",[_("p",[n._v("故障处理\n在监控过程中发现，或者系统用户反馈出来的数据库错误或者警告，进行诊断并修复。")])]),n._v(" "),_("li",[_("p",[n._v("性能优化\n在监控过程中发现，或者系统用户反馈出来的数据库性能问题，进行优化。")])]),n._v(" "),_("li",[_("p",[n._v("容灾\n容灾只是手段，最终还是为了保证系统的可用性，通常选择的策略有：故障转移集群、镜像、日志传送、异地备份等。\n如果在实施时，已经部署了容灾策略，那么这时只要做一些状态监视即可。\n也有系统是在上线一段时间之后，才补充部署容灾策略的。")])]),n._v(" "),_("li",[_("p",[n._v("升级/迁移\n7.1 升级\n通常是在本机进行，硬件不变，比如：更换操作系统、数据库的版本、打补丁；\n7.2 迁移\n通常是需要升级硬件，比如：更换新的服务器，所以把数据库搬到新的服务器上；\n也有在本机“迁移”，只是为了移动数据库文件的位置。\n7.3 迁移+升级\n不过很多时候，都是在迁移中做升级，也就是换了新的服务器，也换了软件版本。")])]),n._v(" "),_("li",[_("p",[n._v("健康检查\n通常叫做巡检或者Health Check。可能是每天、每月、每年的。\n事实上如果把巡检的内容做到每天、每小时、甚至每X分钟，那就是一个准实时的系统监控。")])]),n._v(" "),_("li",[_("p",[n._v("系统用户反馈的数据库问题\n用户反馈出来的任何数据库问题，需要DBA去做处理，即便有时诊断出来并非数据库的问题。\n从广义上来看，除去数据库开发外的其他任务，都应该算在运维职责之内。")])])]),n._v(" "),_("p",[n._v("问：那么数据库运维到底都有哪些日常任务？\n答：把上面的每项任务要做的事情一个个罗列出来就可以了。\n比如，3.1 数据库运行状态监控包括：\n(1) 数据库服务器是否可用；\n(2) 数据库服务是否启用/中断；\n(3) 磁盘空间；\n(4) 错误日志检查；\n(5) 数据库一致性检查；\n(6) 作业运行状态；\n(7) 索引碎片检查\n(8) ……\n后面会逐个分解各项任务的详细清单。")]),n._v(" "),_("p",[n._v("二. 如何解决数据库运维过程中的问题？\n运维过程中遇到问题时，如果能够通过自己/他人的经验解决，那么固然好；")]),n._v(" "),_("p",[n._v("但如果没有解决思路的话，通常是这样去查：")]),n._v(" "),_("ol",[_("li",[n._v("查日志：操作系统/数据库/应用程序日志中，有没有相关的错误/信息提示；")]),n._v(" "),_("li",[n._v("查错误号：官方文档/网友分享中，有没有解决方案；")]),n._v(" "),_("li",[n._v("如果都没有找到，那么就中奖了，自己分析不出就团队分析，团队分析不出找官方支持，当然有的时候，官方支持也不是一定能解决。")])]),n._v(" "),_("p",[n._v("注意：对于在线系统，这么慢慢查下去，时间可能消耗太久，会影响用户体验。通常是优先快速解决问题，那怕只是用临时应急方案，以保证系统的可用性，然后再去分析根本原因，以彻底解决，防止下次再发生。")])])}),[],!1,null,null,null);v.default=p.exports}}]);