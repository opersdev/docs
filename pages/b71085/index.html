<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>万人规模互联网公司的企业IT基础架构概览 | 小诺文档中心</title>
    <meta name="generator" content="VuePress 1.9.5">
    <link rel="icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="https://at.alicdn.com/t/font_3077305_pt8umhrn4k9.css">
    <meta name="description" content="运维技术文档,mysql,k8s,docker,linux,shell,python等技术文章。">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <meta name="keywords" content="运维技术文档,mysql,k8s,docker,linux,shell,python,技术文档,学习,面试,git,github,markdown">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.92233c96.css" as="style"><link rel="preload" href="/assets/js/app.38f1b0a4.js" as="script"><link rel="preload" href="/assets/js/2.6beb1dc7.js" as="script"><link rel="preload" href="/assets/js/86.06ff7ec2.js" as="script"><link rel="prefetch" href="/assets/js/10.4365b950.js"><link rel="prefetch" href="/assets/js/100.8dac6c81.js"><link rel="prefetch" href="/assets/js/101.a5556ac1.js"><link rel="prefetch" href="/assets/js/102.e3ff38b9.js"><link rel="prefetch" href="/assets/js/103.3bcf44f5.js"><link rel="prefetch" href="/assets/js/104.6d56e53e.js"><link rel="prefetch" href="/assets/js/105.4fc9762e.js"><link rel="prefetch" href="/assets/js/106.f507561a.js"><link rel="prefetch" href="/assets/js/107.6c94c756.js"><link rel="prefetch" href="/assets/js/108.f7ff1945.js"><link rel="prefetch" href="/assets/js/109.aeb1e532.js"><link rel="prefetch" href="/assets/js/11.fe1ff844.js"><link rel="prefetch" href="/assets/js/110.dda67b83.js"><link rel="prefetch" href="/assets/js/111.5b990f24.js"><link rel="prefetch" href="/assets/js/112.0a27d3a0.js"><link rel="prefetch" href="/assets/js/113.972cd001.js"><link rel="prefetch" href="/assets/js/114.875814a1.js"><link rel="prefetch" href="/assets/js/115.ec235d59.js"><link rel="prefetch" href="/assets/js/116.03bd2386.js"><link rel="prefetch" href="/assets/js/117.68765825.js"><link rel="prefetch" href="/assets/js/118.9d6d0255.js"><link rel="prefetch" href="/assets/js/119.ff84a82f.js"><link rel="prefetch" href="/assets/js/12.aa21f453.js"><link rel="prefetch" href="/assets/js/120.20639785.js"><link rel="prefetch" href="/assets/js/121.6c546150.js"><link rel="prefetch" href="/assets/js/122.48e85de5.js"><link rel="prefetch" href="/assets/js/123.fc931745.js"><link rel="prefetch" href="/assets/js/124.797d5fda.js"><link rel="prefetch" href="/assets/js/125.b23a31c7.js"><link rel="prefetch" href="/assets/js/126.d7a182fd.js"><link rel="prefetch" href="/assets/js/127.167a63d6.js"><link rel="prefetch" href="/assets/js/128.878d4a7e.js"><link rel="prefetch" href="/assets/js/129.a8957dfa.js"><link rel="prefetch" href="/assets/js/13.161be064.js"><link rel="prefetch" href="/assets/js/130.3961a295.js"><link rel="prefetch" href="/assets/js/131.9c4e7a56.js"><link rel="prefetch" href="/assets/js/132.41d26584.js"><link rel="prefetch" href="/assets/js/133.6d91047e.js"><link rel="prefetch" href="/assets/js/134.121ecf0e.js"><link rel="prefetch" href="/assets/js/135.6e30234c.js"><link rel="prefetch" href="/assets/js/136.6fab7ce4.js"><link rel="prefetch" href="/assets/js/137.209af36e.js"><link rel="prefetch" href="/assets/js/138.660f236e.js"><link rel="prefetch" href="/assets/js/139.81c29d19.js"><link rel="prefetch" href="/assets/js/14.d0f13635.js"><link rel="prefetch" href="/assets/js/140.d8f594ca.js"><link rel="prefetch" href="/assets/js/141.89fbea1c.js"><link rel="prefetch" href="/assets/js/142.643bccec.js"><link rel="prefetch" href="/assets/js/143.f270bffc.js"><link rel="prefetch" href="/assets/js/144.cf6f4c9a.js"><link rel="prefetch" href="/assets/js/145.093699b5.js"><link rel="prefetch" href="/assets/js/146.876575d0.js"><link rel="prefetch" href="/assets/js/147.dc120635.js"><link rel="prefetch" href="/assets/js/148.4a3ba80f.js"><link rel="prefetch" href="/assets/js/149.4afb7469.js"><link rel="prefetch" href="/assets/js/15.af46dbb5.js"><link rel="prefetch" href="/assets/js/150.4eb38cf2.js"><link rel="prefetch" href="/assets/js/151.4fe6a931.js"><link rel="prefetch" href="/assets/js/16.4cbf8beb.js"><link rel="prefetch" href="/assets/js/17.1da2b6ae.js"><link rel="prefetch" href="/assets/js/18.0402bfbf.js"><link rel="prefetch" href="/assets/js/19.230bfe93.js"><link rel="prefetch" href="/assets/js/20.0d20ddb2.js"><link rel="prefetch" href="/assets/js/21.9dbdbc8b.js"><link rel="prefetch" href="/assets/js/22.1410508d.js"><link rel="prefetch" href="/assets/js/23.63089216.js"><link rel="prefetch" href="/assets/js/24.e6fe9306.js"><link rel="prefetch" href="/assets/js/25.1240d0c9.js"><link rel="prefetch" href="/assets/js/26.0f4fb46d.js"><link rel="prefetch" href="/assets/js/27.5b193a22.js"><link rel="prefetch" href="/assets/js/28.90e27733.js"><link rel="prefetch" href="/assets/js/29.cdb75f6c.js"><link rel="prefetch" href="/assets/js/3.1229de89.js"><link rel="prefetch" href="/assets/js/30.23c0524a.js"><link rel="prefetch" href="/assets/js/31.bc292e1e.js"><link rel="prefetch" href="/assets/js/32.79645dcf.js"><link rel="prefetch" href="/assets/js/33.53e29142.js"><link rel="prefetch" href="/assets/js/34.7ce01d2e.js"><link rel="prefetch" href="/assets/js/35.bcdc888c.js"><link rel="prefetch" href="/assets/js/36.00ce19aa.js"><link rel="prefetch" href="/assets/js/37.e53fea30.js"><link rel="prefetch" href="/assets/js/38.1b84e50f.js"><link rel="prefetch" href="/assets/js/39.ed0470cb.js"><link rel="prefetch" href="/assets/js/4.93dbb352.js"><link rel="prefetch" href="/assets/js/40.010f2420.js"><link rel="prefetch" href="/assets/js/41.7aefa9d2.js"><link rel="prefetch" href="/assets/js/42.eadeaa1f.js"><link rel="prefetch" href="/assets/js/43.012419aa.js"><link rel="prefetch" href="/assets/js/44.aa86bffd.js"><link rel="prefetch" href="/assets/js/45.b7ce8c1a.js"><link rel="prefetch" href="/assets/js/46.bd51c47b.js"><link rel="prefetch" href="/assets/js/47.71d2a52e.js"><link rel="prefetch" href="/assets/js/48.71b9430b.js"><link rel="prefetch" href="/assets/js/49.d92deee5.js"><link rel="prefetch" href="/assets/js/5.9228d2a8.js"><link rel="prefetch" href="/assets/js/50.2827e7a9.js"><link rel="prefetch" href="/assets/js/51.94c41d82.js"><link rel="prefetch" href="/assets/js/52.73681932.js"><link rel="prefetch" href="/assets/js/53.4db7ebcf.js"><link rel="prefetch" href="/assets/js/54.8e6699ab.js"><link rel="prefetch" href="/assets/js/55.3d832a8c.js"><link rel="prefetch" href="/assets/js/56.43282683.js"><link rel="prefetch" href="/assets/js/57.ea8d4f37.js"><link rel="prefetch" href="/assets/js/58.12ff8ca5.js"><link rel="prefetch" href="/assets/js/59.47100612.js"><link rel="prefetch" href="/assets/js/6.341b2c5d.js"><link rel="prefetch" href="/assets/js/60.914e7e2d.js"><link rel="prefetch" href="/assets/js/61.d9414480.js"><link rel="prefetch" href="/assets/js/62.a3747f73.js"><link rel="prefetch" href="/assets/js/63.1a2e54c1.js"><link rel="prefetch" href="/assets/js/64.d9f9224a.js"><link rel="prefetch" href="/assets/js/65.53e3f7bd.js"><link rel="prefetch" href="/assets/js/66.92d44566.js"><link rel="prefetch" href="/assets/js/67.67aba1d2.js"><link rel="prefetch" href="/assets/js/68.acce7dfb.js"><link rel="prefetch" href="/assets/js/69.3dacbd45.js"><link rel="prefetch" href="/assets/js/7.3d063b98.js"><link rel="prefetch" href="/assets/js/70.b40c0f61.js"><link rel="prefetch" href="/assets/js/71.51b34635.js"><link rel="prefetch" href="/assets/js/72.498f4ff0.js"><link rel="prefetch" href="/assets/js/73.b22c0978.js"><link rel="prefetch" href="/assets/js/74.823f2a12.js"><link rel="prefetch" href="/assets/js/75.d24d261d.js"><link rel="prefetch" href="/assets/js/76.44db605e.js"><link rel="prefetch" href="/assets/js/77.efce42e9.js"><link rel="prefetch" href="/assets/js/78.11405a06.js"><link rel="prefetch" href="/assets/js/79.9f0076d7.js"><link rel="prefetch" href="/assets/js/8.812a9a47.js"><link rel="prefetch" href="/assets/js/80.4fc1dc52.js"><link rel="prefetch" href="/assets/js/81.f8963444.js"><link rel="prefetch" href="/assets/js/82.627d5503.js"><link rel="prefetch" href="/assets/js/83.49c45765.js"><link rel="prefetch" href="/assets/js/84.b2045805.js"><link rel="prefetch" href="/assets/js/85.420cfd4a.js"><link rel="prefetch" href="/assets/js/87.4dfb234a.js"><link rel="prefetch" href="/assets/js/88.079f044f.js"><link rel="prefetch" href="/assets/js/89.bb76f78f.js"><link rel="prefetch" href="/assets/js/9.8be13208.js"><link rel="prefetch" href="/assets/js/90.ae61c8f3.js"><link rel="prefetch" href="/assets/js/91.8728eb6a.js"><link rel="prefetch" href="/assets/js/92.0d8581e8.js"><link rel="prefetch" href="/assets/js/93.e05baea5.js"><link rel="prefetch" href="/assets/js/94.c661a216.js"><link rel="prefetch" href="/assets/js/95.5414604a.js"><link rel="prefetch" href="/assets/js/96.529def2c.js"><link rel="prefetch" href="/assets/js/97.fb2d6168.js"><link rel="prefetch" href="/assets/js/98.69e544d7.js"><link rel="prefetch" href="/assets/js/99.a7993a79.js">
    <link rel="stylesheet" href="/assets/css/0.styles.92233c96.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.png" alt="小诺文档中心" class="logo"> <span class="site-name can-hide">小诺文档中心</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="https://opersdev.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  小诺博客
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/devops/" class="nav-link">DevOps</a></div><div class="nav-item"><a href="/k8s/" class="nav-link">云原生</a></div><div class="nav-item"><a href="/technology/" class="nav-link">技术</a></div><div class="nav-item"><a href="/more/" class="nav-link">更多</a></div><div class="nav-item"><a href="/wzdh/" class="nav-link">网址导航</a></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/opersdev" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://cdn.jsdelivr.net/gh/opersdev/docs/img/touxiang.jpg"> <div class="blogger-info"><h3>kevin</h3> <span>运维界的菜鸟</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="https://opersdev.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  小诺博客
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/devops/" class="nav-link">DevOps</a></div><div class="nav-item"><a href="/k8s/" class="nav-link">云原生</a></div><div class="nav-item"><a href="/technology/" class="nav-link">技术</a></div><div class="nav-item"><a href="/more/" class="nav-link">更多</a></div><div class="nav-item"><a href="/wzdh/" class="nav-link">网址导航</a></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/opersdev" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>踩坑</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>技术文章</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/70d0a5/" class="sidebar-link">5年运维经验分享：一个小白走向高级运维工程师之路</a></li><li><a href="/pages/77cd5f/" class="sidebar-link">10 个免费的服务器监控工具</a></li><li><a href="/pages/b3ddea/" class="sidebar-link">23个从零成长为运维技术大牛的必备秘诀！</a></li><li><a href="/pages/59bcdc/" class="sidebar-link">IT运维是打杂吗</a></li><li><a href="/pages/eeaddd/" class="sidebar-link">QQ与微信架构的惊天密码</a></li><li><a href="/pages/2ac929/" class="sidebar-link">Linux系统管理员必备的监控工具</a></li><li><a href="/pages/76cc16/" class="sidebar-link">你应当定期更改密码吗</a></li><li><a href="/pages/1e85da/" class="sidebar-link">你做过的最有效的提高你的编程水平的一件事</a></li><li><a href="/pages/c9cd0e/" class="sidebar-link">如何打造一个TB级微服务海量日志监控平台</a></li><li><a href="/pages/bf7d78/" class="sidebar-link">十条远离故障的运维工作经验分享</a></li><li><a href="/pages/3b2463/" class="sidebar-link">web服务器性能估计</a></li><li><a href="/pages/a9c892/" class="sidebar-link">故障发生前我们能做什么？</a></li><li><a href="/pages/40fe41/" class="sidebar-link">京东：10万规模容器的实践及运营之道</a></li><li><a href="/pages/9e4dcf/" class="sidebar-link">企业互联网+转型实战：如何进行PB级别数据的架构变迁</a></li><li><a href="/pages/72791d/" class="sidebar-link">如烹小虾： 运维自动化闭环，腾讯是这样做的</a></li><li><a href="/pages/b7938f/" class="sidebar-link">使用 supervisor 管理进程</a></li><li><a href="/pages/b71085/" aria-current="page" class="active sidebar-link">万人规模互联网公司的企业IT基础架构概览</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/pages/963d3f/" class="sidebar-link">用最少的机器支撑万亿级访问，微博6年Redis优化历程</a></li><li><a href="/pages/ba9e35/" class="sidebar-link">运维不得不知的 Linux 性能监控、测试、优化工具</a></li><li><a href="/pages/f1b789/" class="sidebar-link">运维利器：万能的strace</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>运维文档</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>计算机网络</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>开源应用</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JAVA应用</span> <span class="arrow right"></span></p> <!----></section></li></ul> <div class="sidebar-slot sidebar-slot-bottom"><!-- 正方形 -->
      <ins class="adsbygoogle"
          style="display:block"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="3508773082"
          data-ad-format="auto"
          data-full-width-responsive="true"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div></aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/technology/#技术" data-v-06225672>技术</a></li><li data-v-06225672><a href="/technology/#技术文章" data-v-06225672>技术文章</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/opersdev" target="_blank" title="作者" class="beLink" data-v-06225672>xiaonuo</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2022-06-19</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABGpJREFUSA3tVVtoXFUU3fvOI53UlmCaKIFmwEhsE7QK0ipFEdHEKpXaZGrp15SINsXUWvBDpBgQRKi0+KKoFeJHfZA+ED9KKoIU2gYD9UejTW4rVIzm0VSTziPzuNu1z507dibTTjL4U/DAzLn3nL3X2o91ziX6f9wMFdh6Jvbm9nNSV0msViVO6tN1Rm7NMu2OpeJ9lWBUTDxrJbYTS0hInuwciu9eLHlFxCLCZEk3MegsJmZ5K/JD6t7FkFdEvGUo1g7qJoG3MHImqRIn8/nzY1K9UPKKiJmtnUqHVE3Gbuay6vJE/N2FEmuxFjW2nUuE0yQXRRxLiTUAzs36zhZvOXJPdX850EVnnLZkB8prodQoM5JGj7Xk2mvC7JB8tG04Ef5PiXtG0UtxupRQSfTnBoCy554x18yJHI6I+G5Eru4LHmPJZEQsrvPUbMiA8G/WgMK7w7I+ez7++o2ANfbrjvaOl1tFMs+htG3IrZH9/hDX1Pr8Tc0UvH8tcX29KzAgIGcEkINyW5BF9x891hw6VYqgJHEk0huccS7vh3C6gTiODL+26huuBtbct8eZnqLML8PkxGYpuPZBqtqwkSjgc4mB5gbgig5i+y0UDK35LMxXisn9xQtK+nd26gTIHsHe/oblK/b29fUmN/8Y+9jAQrnBp56m1LcDlDp9irKTExSKduXJVWSqdBMA08pEJnEIOB3FPPMybu/oeV8zFeYN3xx576Q6RH+VmplE4ncQV5v+5rzSoyOU7PuEAg8g803PwBJ0CExno/jcMbN8tONYeOmHiuUNryvm3fRUy4tMPVLdAGkUhNWuggGrJcXPv+ouCjz0MKUHz1J2/E8IC9nqTabcxgaBYM0hPhD5Y65FsbxRQKxCQrDjDctW7PUM3HuZunFyifSAqEfuzCp48Il24luWUWZoyJCaPR82jE0+kFA643wRFVni4RYSq3ohJO2pZ7B5dO4xkDWbEpossJPLSrPjYID8rS2UHTlvyNxqIGsg674XJJ7vnh5L7PNwC4hh2sjCI96mzszOTpxLF0T7l88Yz7lAuK6OnL8gXLOnTvpzSb22YG8W7us3jSebFHeeqnXRG1vt+MoUM84LQIBmMsCTAcOauTh0T0l0neQK7m2bLMt2mGxU3HYssS0J2cdv5wljlPsrIuZLAG/2DOZIXgCYT8uMGZN+e2kSirfxZOPCsC0f24nTZzspnVn9VePS1Z5vubmAGGXG8ZFno9Hel0yfA5ZPhF7Dh972BQJ2qCpgH67lmWtBYbvk6sz02wjky2vXyz0XErP/kFB619js1BtwfOV4OPRqOQBjy3Qbk18vigUPPSD5ceHnwck7W9bhAqZdd7SuG7w4/P2F/GaJh8c7e9qgow+Q7cGBo+98WsLkuktFqiZabtXuQTu/Y5ETbR0v7tNSFnvrmu6pjdoan2KjMu8q/Hmj1EfCO2ZGfEIbIXKUlw8qaX9/b2oeSJmFksSeT/Fn0V3nSypChh4Gjh74ybO9aeZ/AN2dwciu2/MhAAAAAElFTkSuQmCC">万人规模互联网公司的企业IT基础架构概览<!----></h1> <div class="page-slot page-slot-top"><!-- 固定100% * 90px可显示，max-height:90px未见显示-->
     <ins class="adsbygoogle"
          style="display:inline-block;width:100%;max-height:90px"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="6625304284"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div> <div class="theme-vdoing-content content__default"><h5 id="嘉宾简介"><a href="#嘉宾简介" class="header-anchor">#</a> 嘉宾简介</h5> <h5 id="陈贻泰"><a href="#陈贻泰" class="header-anchor">#</a> 陈贻泰</h5> <h5 id="凡客诚品运维部高级经理-负责idc机房和网站业务的技术运营-及内部企业it的系统网络运维。"><a href="#凡客诚品运维部高级经理-负责idc机房和网站业务的技术运营-及内部企业it的系统网络运维。" class="header-anchor">#</a> 凡客诚品运维部高级经理，负责IDC机房和网站业务的技术运营，及内部企业IT的系统网络运维。</h5> <h5 id="从事it基础设施方面的工作十多年。曾在武汉微软技术中心专门为多种行业、大中小企业做it规划和建设-后来加入了凡客诚品-全程深度参与了公司的系统及网络基础设施的建设。"><a href="#从事it基础设施方面的工作十多年。曾在武汉微软技术中心专门为多种行业、大中小企业做it规划和建设-后来加入了凡客诚品-全程深度参与了公司的系统及网络基础设施的建设。" class="header-anchor">#</a> 从事IT基础设施方面的工作十多年。曾在武汉微软技术中心专门为多种行业、大中小企业做IT规划和建设；后来加入了凡客诚品，全程深度参与了公司的系统及网络基础设施的建设。</h5> <p>今天很高兴在这里跟大家交流，我演讲的题目是《大中型互联网企业IT基础架构概览》。</p> <p>我个人作为凡客诚品2011到2013年快速的发展的见证者和亲历者，凡客作为一个互联网企业最高峰时，仅员工规模就超过一万三千人。这样的发展速度和企业规模的内部IT基础设施会有什么特色呢？</p> <h3 id="主题介绍"><a href="#主题介绍" class="header-anchor">#</a> 主题介绍</h3> <p><img src="https://cdn.jsdelivr.net/gh/opersdev/image/i/2022/06/19/62aec87a20055.jpg" alt="img"></p> <p>我们从根本上谈起，IT的本质是服务。IT的服务对象是企业，所以企业的业务决定了企业信息化的方向，也决定了IT基础架构的特征。</p> <p>我将要介绍的IT基础架构设计思想就是这样一个以服务企业业务为目标的信息化建设模型，并且会以模型为框架来介绍具体应用。</p> <h3 id="tcp-ip模型给的启示"><a href="#tcp-ip模型给的启示" class="header-anchor">#</a> TCP/IP模型给的启示</h3> <p><img src="https://cdn.jsdelivr.net/gh/opersdev/image/i/2022/06/19/62aec87a23fdb.jpg" alt="img"></p> <p>我们先来看看这个，想必都很熟悉这两张图：TCP/IP模型和OSI模型。我们经常用他们来指导我们解决遇到的技术问题。</p> <p>以TCP/IP模型来讲，最上面的是应用层，然后是传输层、网络层、数据链路层和物理层，我们知道每个层面为上面的层面提供服务。</p> <p>这是一个很好的自顶向下的设计思想，以及分层和模块化的设计思想。</p> <h3 id="it设计模型与实现"><a href="#it设计模型与实现" class="header-anchor">#</a> IT设计模型与实现</h3> <p><img src="https://cdn.jsdelivr.net/gh/opersdev/image/i/2022/06/19/62aec87a29a50.jpg" alt="img"></p> <p>如果我们在TCP/IP的应用层再加上一个层面，就是咱公司的业务层，就变成了这样5个层面：业务层、应用系统层、基础系统层、网络层，以及机房层，再加上左右两个竖条，资源管理与监控、审计与安全，这就是我归纳的IT设计模型。</p> <p><strong>我先简单介绍下这个模型：</strong></p> <p>\1.   业务层，公司的业务情况，比如公司行政、财务业务，销售业务</p> <p>\2.   应用系统层，公司业务的技术化体现，指应用系统，比如一般企业的ERP，OA，CRM</p> <p>\3.   基础系统层，这个层面开始往下，应该是我们IT运维人员最为熟悉的了。比如dns、dhcp、文件、邮件就属于系统层</p> <p>\4.   网络层，就是路由器、交换机、防火墙组成的互联网络</p> <p>\5.   机房层，狭义上可以理解就是咱服务器、交换机存放的机房
广义上应该还包括IT所有物理层面相关的东西</p> <p>对于资源管理与监控，以及安全与审计，应该是贯穿各个层面的。</p> <p>总之，这个分成模型是帮忙我们理解整个企业IT系统的，对于不同的IT人员有不同的切入角度。作为我们运维人员，我们就需要从运维的角度去看待各个层面对我们自身工作的影响。</p> <p>简单的说，企业IT基础架构，按照这个模型，就涵盖了基础系统层、网络层、机房层，所以在实际工作中，更多的要考虑业务层、应用系统层对这下三层的影响，下三层，也就是IT基础架构层面要怎么设计和建设才能满足公司业务发展，才能满足应用系统正常运行。</p> <p>在凡客具体的IT建设中，我们总结出一套方法，来实现一个满足上层要求的IT基础架构，也就是我这里提到的贯彻五化。服务化、标准化、自动化、自助化、技术化，后面我会详细讲到。</p> <h3 id="历史背景"><a href="#历史背景" class="header-anchor">#</a> 历史背景</h3> <p><img src="https://cdn.jsdelivr.net/gh/opersdev/image/i/2022/06/19/62aec87a21280.jpg" alt="img"></p> <p>按照刚才的模型，我将以凡客诚品这个公司为样本来讲述。从上而下，从历史背景和业务开始，最后落实到我们一个个系统网络的设计上。</p> <p>这张图里面列了三组数字，意思是：2011~2013是凡客快速发展的年月。其中员工从300多最终到达13000多。站点也从北京大约4个办公点+仓储扩张到全国约40个，其中28个仓储、6个办公室，6个数据中心。</p> <p>所以我们技术有很大很大的压力，刚才列举的一些数字可能大家没有直观的感受，我就举个例子，记得当时会议室都成了固定办公的场地，通道上都是人，我们IT每天做大的工作就是拆纸箱子，发电脑，创建账户，一次发个上百台电脑是家常便饭。</p> <h3 id="业务层和应用系统层"><a href="#业务层和应用系统层" class="header-anchor">#</a> 业务层和应用系统层</h3> <p><img src="https://cdn.jsdelivr.net/gh/opersdev/image/i/2022/06/19/62aec87a22fed.jpg" alt="img"></p> <p>我们了解了凡客当时的历史背景，再看看业务情况，主要分四大块：</p> <ol><li><p>企业办公</p></li> <li><p>仓储中心</p></li> <li><p>呼叫中心</p></li> <li><p>快递物流</p></li></ol> <p>重点讲讲仓储，我们知道凡客是个网站，网站上有各种虚拟商品，这些虚拟商品是真实存在于全国三十来个仓库中的。</p> <p>当客户从网站上下完单，对应的商品就会从被分配给离客户最近的仓库，有仓库的工人拣货，打包，然后发给物流快递，最终送到到客户手里。</p> <p>客户对整个流程也是一目了然的，后台会有对应的若干系统，通过各种方式展示给客户，比如网页、手机短信、邮件。</p> <p>这个就是我们业务和应用系统的冰山一角，它对我们的基础IT架构有什么影响呢？马上给大家介绍。</p> <p><img src="https://cdn.jsdelivr.net/gh/opersdev/image/i/2022/06/19/62aec87a21ffa.jpg" alt="img"></p> <p><strong>我们先看看基础系统层面的具体设计和实践。基础系统层我认为包含这些：</strong></p> <ol><li><p>网络基础服务：DNS、DHCP</p></li> <li><p>基础办公：文件、打印</p></li> <li><p>企业沟通：邮件、即时通讯、电话</p></li> <li><p>信息安全：账户管理、权限</p> <p>5、IT运维：桌面管理、虚拟机管理等</p></li></ol> <h3 id="基础系统层之dns和dhcp"><a href="#基础系统层之dns和dhcp" class="header-anchor">#</a> 基础系统层之DNS和DHCP</h3> <p><img src="https://cdn.jsdelivr.net/gh/opersdev/image/i/2022/06/19/62aec87ab11af.jpg" alt="img"></p> <p>由于我们仓储业务和呼叫中心业务的特点，对高可用性要求相当高。</p> <p>这个我亲身有体会，刚入职没多久，我们团队对上海的一个仓库的域控制器进行升级，导致了运行在上面的DNS服务器出现了中断，大约半个小时吧。当时领导没说话，看大家正忙着恢复呢。但是领导事后告诉我说，你不知道当时库房流水线上有上千个人都不能干活。</p> <p>所以，其实我现在讲的整个凡客IT基础架构。由于业务的关系，最大的特点之一，就是对IT基础设施的可用性要求非常高。整个大家后面还会看到，可以说是无处不在。</p> <p>我们基本上主体都是使用windows服务器来提供DNS和DHCP服务。</p> <p>为什么呢，主要是windows活动目录的普及，所有计算机都加入域，windows AD本身就有DNS了，当然加个DHCP服务也很容易，windows上面管理DHCP还是比网络设备上管理要方便太多。</p> <p>除了windows AD的先发优势和既有资源的优势外，windows上的DNS和DHCP在高可用性上也符合业务的要求。</p> <p>拿dns来讲，dns服务器每个站点就有2台，这2台是通过AD复制服务保持状态和数据同步的，而且AD复制机制是双向的，比dns自身主从复制更有优势，当然，linux的bind也是主从单向复制。</p> <p>对于客户端，当然网卡上需要设置本地的2个DNS服务器地址作为冗余了。</p> <p>DNS使用中还有一个中国人都会遇到的问题，就是电信和联通的问题，因为我们仓库系统、内部管理系统有时需要调取网站的图片，比如某个单品页，衣服的图片，由于cdn和各地站点网络出口不同的问题，为了提高访问这个图片的效率，需要就近访问该图片CDN的缓存，所以对于internet的访问，需要转发到本地ISP提供的DNS。</p> <p>不过这个需要注意，由于各地ISP服务质量不一样，你需要仔细观察线路和实际命中情况，为此我们有时不得不使用自己部署的专门负责电信或者联通线路解析的dns。不过现在好了，可以考虑用阿里或者百度的智能DNS server。</p> <p>域名使用中，有使用内部和外部dns问题，我们的情况是内部和外部域名是不一样的，这样做会省掉因为内外部域名一样导致的麻烦，具体麻烦就不细说了，一般推荐内外部域名不一样比较好。</p> <p>然后在日常dns注册过程中，内部的系统就用内部的域名，千万不要内外部域名随便用。这样根据整洁，也更加安全，不至于将某个外部域名解析成内部ip。</p> <h4 id="关于dhcp"><a href="#关于dhcp" class="header-anchor">#</a> 关于Dhcp</h4> <p>首先是子网和IP池的规划，要注意的是要和网络人员一起考虑，不要太小气，要充分考虑到业务的发展和架构的伸缩。我们整个内网基本上采用10.0.0.0整个私有网络。</p> <p>高可用性方面也是两台DHCP服务器，分别部署在各地2台域控上，我记得DHCP设计高可用性设计原则上一般是说2、8原则，我们在实际中其实是55原则。</p> <p>比如，一个子网，前半段的IP有第一台服务器分配，后半段的由第二段分配。为什么每台分配一部分，而且不重叠，就是考虑到分配ip的时候避免分配同一个ip，导致ip冲突。实际我们测试过程中，两台服务器分配范围完全一样，也没有遇到问题。</p> <p>对于DHCP高可用性，windows官方做法有DHCP 集群，就是windows cluster到windows 2008 R2的时候支持DHCP服务器了，比如之前一般只支持SQL集群提高可用性。但是这种cluter有个致命的问题，就是两个节点的服务器群集需要一个共享磁盘来作为仲裁盘和数据盘，虽然服务器层面没有了单点故障，但是共享磁盘是个单点故障。</p> <p>而且共享磁盘这资源要求其实不低。。专业的磁盘阵列很贵，模拟的也不放心。当然，本质上dhcp服务实际上在节点故障后并不需要特别快速的切换，所以我们采用这种55原则这种架构更简单的方案。</p> <h3 id="基础系统层之文件打印"><a href="#基础系统层之文件打印" class="header-anchor">#</a> 基础系统层之文件打印</h3> <p><img src="https://cdn.jsdelivr.net/gh/opersdev/image/i/2022/06/19/62aec87add9fc.jpg" alt="img"></p> <p><strong>关于办公用文件系统采用的是windows标准的文件服务器解决方案，细节不谈了，主要有这些特色：</strong></p> <ol><li><p>全公司内访问路径统一：\vancloa.cn\file\；</p></li> <li><p>按照部门所需进行磁盘空间配额</p></li> <li><p>支持数据热备和可回滚</p></li> <li><p>基于角色的权限设计</p></li> <li><p>集中的打印系统</p></li></ol> <h3 id="基础系统层之邮件"><a href="#基础系统层之邮件" class="header-anchor">#</a> 基础系统层之邮件</h3> <p><img src="https://cdn.jsdelivr.net/gh/opersdev/image/i/2022/06/19/62aec87b9272d.jpg" alt="img"></p> <p>由于业务上我们有企业办公、凡客网站、vjia网站、如风达快递，所以我们exchange对应接收有vancl.cn、vancl.com、vjia.com、rufengda.com等域名后缀的邮件。</p> <p><strong>凡客的邮件业务可以基本分为：</strong></p> <ol><li><p>一般办公人员收发；</p></li> <li><p>大量的业务邮件收取，比如service@vancl.com用来接受投诉的邮箱的，通过程序收取给后台客服系统进行处理，特点是量大。</p></li> <li><p>更大量的报警内部邮件投递给内部相关人员；</p></li> <li><p>更大大量的广告邮件、订单状态邮件等发送给外部客户；</p></li></ol> <p>从技术上看，邮件除了收，就是发，所以凡客的邮件系统主要基于这两个软件，一个是微软的Exchange Server 2010，我们Exchange用于办公协作，和邮件的收取。一个是开源软件Postfix，用于邮件投递以及过滤垃圾邮件这块。</p> <h3 id="基础系统层之exchange架构"><a href="#基础系统层之exchange架构" class="header-anchor">#</a> 基础系统层之Exchange架构</h3> <p><img src="https://cdn.jsdelivr.net/gh/opersdev/image/i/2022/06/19/62aec87bcc174.jpg" alt="img"></p> <p>Exchange作为企业内部邮件是非常优秀的，众多大中型企业在用它就说明了这一点。</p> <p>Exchange和桌面outlook配合的确是办公协作的利器，对移动手机支持也非常不错，现在我们的安卓苹果手机邮件同步基本上也都是用exchange模式。</p> <p>其他exchange在会议室管理、通讯录、通讯组方面也很不错。如果必须选择自建办公邮件系统的话，exchange应该是最佳选择了。</p> <p>另外为什么业务也采用exchange作为邮件收取，主要是它的高可用性和可扩展性。</p> <p>各位可以看看我们的exchange系统架构示意图，前端各个模块角色扩展性很好，后端数据库可用性和扩展性也很好。</p> <p>这里有一个小技巧，数据库这块尽量多分，从安全的角度考量，多个鸡蛋不要放在同一个篮子上，多个用户平均分布。</p> <p>另外我们的邮件服务器全部是虚拟主机。</p> <h3 id="基础系统层之邮件发送流"><a href="#基础系统层之邮件发送流" class="header-anchor">#</a> 基础系统层之邮件发送流</h3> <p><img src="https://cdn.jsdelivr.net/gh/opersdev/image/i/2022/06/19/62aec87bcd6bd.jpg" alt="img"></p> <p>我们知道exchange本身就可以作为投递，为什么要单独拿出来再做一个邮件投递系统了。</p> <p>原因是我们的业务模式决定了。而且从技术上开，邮件投递只需要很轻便的smtp服务就可以了，所以postfix非常适合，可以极大的降低exchange的负载。</p> <p>而且各类邮件是分开的，避免交叉影响。尤其是影响邮件投递的成功率。比如EDM大量的投递，那么对应的IP地址池很可能信誉度会降低，就会影响正常办公邮件和其他业务邮件的投递，假如投递系统没有分开的话。</p> <h3 id="基础系统之即时通讯"><a href="#基础系统之即时通讯" class="header-anchor">#</a> 基础系统之即时通讯</h3> <p><img src="https://cdn.jsdelivr.net/gh/opersdev/image/i/2022/06/19/62aec87bd612c.jpg" alt="img"></p> <p>刚才我们了解了邮件异步通讯这块，那么凡客的即时通讯是个什么情况？</p> <p>简单的一句话，我们打通了传统电话和IP电话、打通了PC和手机、打通了即时通讯和邮件、打通了开源Sipx和微软Lync、打通了PSTN电话网络和VOIP计算机网络，形成了一个统一的企业沟通系统。</p> <p><img src="https://cdn.jsdelivr.net/gh/opersdev/image/i/2022/06/19/62aec87c3abcc.jpg" alt="img"></p> <p><strong>这个张图是当时的Lync系统架构部署图。从这个图里可以了解整个统一沟通平台的大致情况：</strong></p> <ol><li><p>Lync自身的高可用设计，杜绝单点故障</p></li> <li><p>这是一个分布式的电话系统，全国各地都有自身的SIPX来管理电话机，以及从通过当地语音网关从当地ISP出局，Lync负责PC终端</p></li> <li><p>手机、电话、PC是互联互通的</p></li></ol> <p>企业统一沟通。从沟通来讲，手机、电脑、电话合一，从技术来讲，我们使用IP网络，传统电话网络和内部的计算机网络是合二为一的。</p> <h3 id="基础系统层之账户与权限"><a href="#基础系统层之账户与权限" class="header-anchor">#</a> 基础系统层之账户与权限</h3> <p><img src="https://cdn.jsdelivr.net/gh/opersdev/image/i/2022/06/19/62aec87c24ebf.jpg" alt="img"></p> <p>账号管理是企业IT的重头戏，凡客这块个人认为做得很有特点。</p> <p>原本这次大会我希望的演讲主题就是账号相关的，但是我们后面的新东方王威老师捷足先登了。所以我这里只稍微讲下大概，详细的账号自动化管理方面的事情后面会由我们的王威老师跟大家说。</p> <ol><li><p>凡客以windows AD作为账号管理系统，因为我们的办公、以及线上服务器，无论是windows还是linux都是域管理模式。</p></li> <li><p>凡客账号管理既有自动化，也有用户自助化的特点，这个后面我会再次提到。</p></li> <li><p>凡客内部的权限都是基于AD账号的，不管你是登陆个人PC还是办公或者网站服务器、网络设备，或者是内部网站，像登陆PC或者登陆金蝶，这类验证方式可以归属为LDAP方式，权限控制基本上有各个系统自行控制，或者结合windows AD的安全组来进行控制，对于登陆公司内部系统，由于自己开发的，所以基本上都是采用自己开发的一组webservice来验证和统一授权，提供这些接口的系统在我们内部叫PMS权限管理系统。</p></li></ol> <p>账号管理这块我们是非常有特点的，这个架构除了适应互联网企业，据我了解，我们之前有离职的员工去了传统行业的上市公司，也把这个方案带过去了，做得很好。</p> <p><img src="https://cdn.jsdelivr.net/gh/opersdev/image/i/2022/06/19/62aec87d3eead.jpg" alt="img"></p> <p>这是我们当时DC服务器全国的一个分布图。我们有两个核心的内部用数据中心，只有在两个数据中心是可写的DC，其余三十来个站点全部是只读。这样的架构，高可用性和安全性都能照顾到。</p> <h3 id="基础系统层之ad设计"><a href="#基础系统层之ad设计" class="header-anchor">#</a> 基础系统层之AD设计</h3> <p><img src="https://cdn.jsdelivr.net/gh/opersdev/image/i/2022/06/19/62aec87d356bc.jpg" alt="img"></p> <p>关于AD设计，最有特点的就是OU结构的扁平化设计，而不是基于传统的组织结构。我们的OU结构是基于AD的对象类型来划分的，基本上分为账号类的OU，通讯组类的OU，安全组类的OU，计算机账号类的OU。</p> <p>比如在Employment这个OU下，所有的员工账号都在里面，因为离职的账号我们只会禁用，所以目前这里面账号应该有好几万吧。</p> <ol><li><p>因为我们的OU很少，层级也很少，这么做可以极大地降低AD账号自动化管理的难度，你如果觉得会影响组策略什么的，我可以告诉你我们考虑过了，这都不是问题，凡客IT后续和账号相关的管理，很多都得益于这个最最基础的简单的AD数据结构</p></li> <li><p>还一个就是性能问题，从我的经验看，上万活动账号都不是问题，个人认为10万以上都不是问题。</p></li></ol> <h3 id="基础系统层之it运维自动化"><a href="#基础系统层之it运维自动化" class="header-anchor">#</a> 基础系统层之IT运维自动化</h3> <p><img src="https://cdn.jsdelivr.net/gh/opersdev/image/i/2022/06/19/62aec87d80729.jpg" alt="img"></p> <p>IT运维自动化的核心和前提其实是标准化，这个是运维思想层面的事情，具体我们是通过微软system center中系列实现，尤其是SCCM系统。</p> <p>我们根据业务类型，制作了不同的操作系统镜像，有仓储的，有一般办公的，有开发人员的，有呼叫中心坐席的，都可以裸机网络启动来安装好系统，不仅仅提高了工作效率，关键是整个系统都是标准的，规范的。这个也成为了我们系统安全的基石。</p> <p>有些软件安装是需要授权的，我们通过账号管理系统中的审批流程来实现审批，审批完成，用户就能自己安装了。</p> <p>远程协助解决公司内部pc终端问题也都靠它，这样一个北京的支持人员可以远程去支持广州的桌面问题。看起来SCCM整个工具很强大，其实更强大的是我们的标准化。</p> <p>除了桌面支持，后台没有SCCM的系统、网络都可以这么做，因为每个地方的网络环境、软件系统环境都是一个标准的，中心的人员可以直接快速的支持任何一个站点的系统网络。这样做，导致了整个部门管理效率的提升！</p> <h3 id="基础系统层之it运维自动化-2"><a href="#基础系统层之it运维自动化-2" class="header-anchor">#</a> 基础系统层之IT运维自动化</h3> <p><img src="https://cdn.jsdelivr.net/gh/opersdev/image/i/2022/06/19/62aec87d7dbd6.jpg" alt="img"></p> <p>我们当时有将近40个站点，一个非常简单的结构，而且这个结构是扁平化，节约成本。</p> <p>这个是老版本的sccm系统架构，目前是SCCM 2012 r2，该架构的特点是别处新意的。我们近四十个站点，数千台PC终端，采用的架构是扁平化的。</p> <p><strong>细节就不谈了，只说说整个架构的优点：</strong></p> <ol><li><p>架构简单，易于部署和后续管理，节约成本</p></li> <li><p>系统安装和软件分发类似CDN，没有跨站点的流量</p></li></ol> <p>各位有公司用到SCCM，而且站点比较多的，可以借鉴</p> <h3 id="基础系统层之虚拟化"><a href="#基础系统层之虚拟化" class="header-anchor">#</a> 基础系统层之虚拟化</h3> <p><img src="https://cdn.jsdelivr.net/gh/opersdev/image/i/2022/06/19/62aec87d7cc62.jpg" alt="img"></p> <p>虚拟化在外面的基础架构中的地位举足轻重，说句极端的话，由于历史原因，很可惜，企业IT服务器虚拟化比例没有达到百分之百。</p> <p>凡客的办公核心，各地机房，我的原则是，务必全部虚拟化。所以，从某个层面来看，我是把物理机看出一种平台而已了。</p> <p>我们前面谈到AD、lync、sipx、exchange、SCCM、文件服务器等等，基本上都是虚拟机。</p> <p>采用虚拟机的好处就不多说，主要是要注意风险，尤其是不能把鸡蛋放到一个篮子里面。</p> <p>我们知道虚拟化后，一台物理机上跑了多个虚拟机，这一台物理机一挂就是挂一片虚机，所以风险是增大了。</p> <p>我们虚机比例非常高的后面是因为我们在服务层面是没有单点故障的，比如我们每个站点提供账号验证、DNS、DHCP服务的域控，每个站点都有两台，而且这两台绝对不在同一台宿主机上，甚至这两台宿主机不在同一个机柜，不是使用同一个PDU，同一个交换机。
。</p> <p><img src="https://cdn.jsdelivr.net/gh/opersdev/image/i/2022/06/19/62aec87d7b5c3.jpg" alt="img"></p> <h3 id="网络层"><a href="#网络层" class="header-anchor">#</a> 网络层</h3> <p><img src="https://cdn.jsdelivr.net/gh/opersdev/image/i/2022/06/19/62aec87e96f3d.jpg" alt="img"></p> <p><strong>网络层的架构设计上我们有两个特点：</strong></p> <ol><li><p>关键节点和链路没有单点故障。比如链路，所有的站点之间的连接时双链路，一条是光纤专线，一条是internert上网线路中建立的VPN虚拟专线，在核心的IDC之间更是有多条专线和VPN组成环路，保障公司站点之间网络高可用</p></li> <li><p>我们所有的网络路由逻辑层面全部采用的动态的路由协议OSPF和BGP，保障了链路选择动态、智能和的故障后的快速收敛</p></li></ol> <h4 id="网络层之idc间"><a href="#网络层之idc间" class="header-anchor">#</a> 网络层之IDC间</h4> <ol start="3"><li></li></ol> <p><img src="https://cdn.jsdelivr.net/gh/opersdev/image/i/2022/06/19/62aec87ebc094.jpg" alt="img"></p> <h3 id="网络层之站点间"><a href="#网络层之站点间" class="header-anchor">#</a> 网络层之站点间</h3> <p><img src="https://cdn.jsdelivr.net/gh/opersdev/image/i/2022/06/19/62aec87f14d4d.jpg" alt="img"></p> <h3 id="网络层之站点内"><a href="#网络层之站点内" class="header-anchor">#</a> 网络层之站点内</h3> <p><img src="https://cdn.jsdelivr.net/gh/opersdev/image/i/2022/06/19/62aec87f1dd3c.jpg" alt="img"></p> <p>我们企业办公方面，同样都是双链路连接到就近的IDC，站点内的核心设备和链路都是有热备或冗余的设计。</p> <h3 id="网络层之无线"><a href="#网络层之无线" class="header-anchor">#</a> 网络层之无线</h3> <p><img src="https://cdn.jsdelivr.net/gh/opersdev/image/i/2022/06/19/62aec87f1f150.jpg" alt="img"></p> <p>办公和仓储、漫游和性能、abng的选择、802.1X与网络验证。这方面我就不细说了，每个业务场景不一样，对漫游、性能、并发、带宽、可用性等关注点的侧重会不一样，每个企业的需求也都不一样。</p> <h3 id="网络层之vpn"><a href="#网络层之vpn" class="header-anchor">#</a> 网络层之VPN</h3> <p><img src="https://cdn.jsdelivr.net/gh/opersdev/image/i/2022/06/19/62aec87f1b89a.jpg" alt="img"></p> <p><strong>我们出差的时候都需要用VPN，我们使用的是微软的产品，处于以下考虑:</strong></p> <ol><li><p>个人用户使用VPN主要要考虑客户端方便配置，比如能够用系统自带的VPN拨号就最好</p></li> <li><p>另外就是账号最好和办公的一致，省掉记忆多个账号的烦恼，以及穿透性要非常好，毕竟全国各地的网络情况都不一样。穿透性的协议是HTTPS类的，而不是传统的PPTP和L2TP</p></li> <li><p>除此之外，就是考虑适当假设多台，分布全国各地IDC，一方面提供了VPN服务器的冗余，一方面可以为外出同事可以选择连接最近最佳的服务器。</p></li></ol> <p>site to site 采用的是标准的ipsec加密的隧道，作为站点之间的专线的紧急备份线路，反过来其实专线也是互联网线路的备份，二者互为备份。</p> <h3 id="网络层之qos"><a href="#网络层之qos" class="header-anchor">#</a> 网络层之QOS</h3> <p><img src="https://cdn.jsdelivr.net/gh/opersdev/image/i/2022/06/19/62aec87f974c5.jpg" alt="img"></p> <p>QOS是为了更好的利用好有限的带宽，我们每个站点基本都是双出口、关键节点无单点，高可用性方面是没有问题的，但是带宽仍然很稀缺，所以必须能够有效的对带宽进行监控和审计，并且从技术上保障业务流量优先。</p> <h3 id="机房层"><a href="#机房层" class="header-anchor">#</a> 机房层</h3> <p><img src="https://cdn.jsdelivr.net/gh/opersdev/image/i/2022/06/19/62aec87fb622f.jpg" alt="img"></p> <p>机房主要关注这些条件，场地、温湿度、电力、空调、机柜、承重、互联线路。不同的业务场景需求是不一样的。</p> <p>比如在某些办公机房，为了节约成本和灵活期间，测试和开发的demo机是在办公机房的，我们主要关注的是提供计算密度，这个对空调、承重、机柜、电力、网络有较高的要求。</p> <p>而仓库地理环境比较恶劣，全国各地都不一样，接入层的小机柜尤其如此，要注意防潮、防尘，甚至防冻，需要因地制宜。</p> <h3 id="五化-之it服务化"><a href="#五化-之it服务化" class="header-anchor">#</a> “五化”之IT服务化</h3> <p><img src="https://cdn.jsdelivr.net/gh/opersdev/image/i/2022/06/19/62aec87fe0ba9.jpg" alt="img"></p> <p>分层的IT基础架构设计模型大致介绍完了，自顶向下的原则可以帮忙我们关注目标，分层和模块化的思维可以帮助我们更好的关注自身负责的范围，提供更好的服务。</p> <p>同时，在凡客具体的IT建设中，我们总结出一套方法，来实现这样一个满足上层要求的IT基础架构，也就是前面提到的贯彻五化。服务化、标准化、自动化、自助化、技术化。</p> <p>首先是IT本身的服务化。对于日常运维，这类事情是运维的主体工作，虽然琐碎、技术含量一般不高，但是非常影响客户（外部用户和公司同事）的用户体验，影响运维团队提供的服务质量。ITIL中的事件管理系统可帮助我们管理日常运维工作。</p> <p>我们就基于ITIL的IT服务管理思想，结合自身业务情况，公司自己开发了一套事件管理系统。个人认为这套系统最有意义的地方有两处：</p> <p>使各个团队或者部门的服务接口化了，用户可以根据自己选择的事情类别由系统分配给最适合的团队来处理。原理是各个团队将自己的工作职责进行了菜单化，用户根据自己的需求“点菜”即可。</p> <p>比如上海办公室的用户outlook有问题了，就可以在事件管理系统中输入outlook，找到outlook相关的服务项，选中提交即可，系统会根据用户账户里面的属性分配给上海的IT桌面支持团队处理。</p> <p>系统也有分配错误的时候，被分配者可以重新替用户转给认为正确的团队处理……我甚至认为应该将这个系统推送给公司所有部门使用，而不是仅仅局限于技术中心。</p> <p>服务质量的把控技术化了。用户的问题根据重要情况是分级别的，不同的级别有不同的初始响应时间，响应不及时以及后续处理不及时会升级，不是原本不重要的事情变成重要，而是无论哪种事情，响应不及时会逐级报给事件处理人的领导，甚至领导的领导。</p> <p>当然，还有相关的统计报表，来统计个人和团队的事件处理数量和质量。所以无论是个人还是团体部门，都像有一根鞭子在背后飞舞。</p> <h3 id="五化-之it服务自助化"><a href="#五化-之it服务自助化" class="header-anchor">#</a> “五化”之IT服务自助化</h3> <p><img src="https://cdn.jsdelivr.net/gh/opersdev/image/i/2022/06/19/62aec88071c33.jpg" alt="img"></p> <p>这个图是我们AES账户管理系统的截图，通过这个系统，员工可以自助式的对账户相关的事情进行自助式的管理。比如自己或者帮助周边新同事申请邮箱、获取初始密码、加入或者退出通讯组或安全组。</p> <p>为什么叫自助化？因为很多原来需要IT处理的事情一般员工能够自己搞定了，把原本IT的事情分散掉，将IT极大的从琐碎事项中解放出来，不仅如此，也提高了公司整体的工作效率。</p> <p><img src="https://cdn.jsdelivr.net/gh/opersdev/image/i/2022/06/19/62aec88073d98.jpg" alt="img"></p> <h3 id="五化-之账户管理自动化"><a href="#五化-之账户管理自动化" class="header-anchor">#</a> “五化”之账户管理自动化</h3> <p><img src="https://cdn.jsdelivr.net/gh/opersdev/image/i/2022/06/19/62aec8808f291.jpg" alt="img"></p> <p>这个图仍然是AES账户管理系统中关于批量启用员工邮箱账户的功能截图。通过这个功能，后台的系统管理员可以批量的对新入职员工启用邮箱。关于AES系统，这是我们账户自动化系统中的一个关键中间环节，它的上游是人事系统、下游是AD系统，邮件系统等。举个例子，一个员工入职或者离职，IT系统管理员是不需要关注的，AD账户会自动创建或者禁用。这个就是自动化。</p> <h3 id="五化-之其他"><a href="#五化-之其他" class="header-anchor">#</a> “五化”之其他</h3> <p><img src="https://cdn.jsdelivr.net/gh/opersdev/image/i/2022/06/19/62aec880a6430.jpg" alt="img"></p> <p>标准化和技术化。标准化是一切自助化和自动化的基础。技术化可以规范你的行为，达成你的标准化。</p> <p>就像我们日常开车，要对安全的有很好的认识（思想上），制定了交通法规（制度上）来指导我们开车，路上也设置了各种行车线。</p> <p>比如实线和虚线，路中间的实线就 是不能碾压和跨越的，高速上的实线处还设立了很高和厚实的水泥防护栏，这个水泥防护栏就是思想和制度技术化的极端体现。实线拦不住不守规矩的车，但是水泥 防护栏能！</p> <p>所以思想需要形成文档来固化，文档最好通过技术化的实体软件系统来固化以协助我们更正确的工作。</p> <p>有了体现思想的制度和软件系统，最关键的是要用，天天用。还有，不是所有的文化思想都能固化的，所以还要培训和沟通，这些无形的和有形的都需要讲，换着方法的讲，日日讲。</p> <h3 id="资源管理和监控"><a href="#资源管理和监控" class="header-anchor">#</a> 资源管理和监控</h3> <p><img src="https://cdn.jsdelivr.net/gh/opersdev/image/i/2022/06/19/62aec880d382d.jpg" alt="img"></p> <p>运维人员作为公司IT系统这辆车的司机，当然需要对这辆车的性能了然于胸的。</p> <p>建立资源管理系统和监控体系，为业务决策提供历史数据支撑。自行车要升级成为摩托还是小车，还是只需要更换一个好点的轮胎，需要数据说话。</p> <h3 id="安全与审计"><a href="#安全与审计" class="header-anchor">#</a> 安全与审计</h3> <p><img src="https://cdn.jsdelivr.net/gh/opersdev/image/i/2022/06/19/62aec88102555.jpg" alt="img"></p> <p>安全不是一个人的事情，也不是一个层面的事情，比如我应用系统的业务逻辑设计再怎么密不透风，也架不住机房失火，数据全毁。</p> <p>所以需要建立纵深的安全机制，应用系统网络各个层面的安全意识深入骨髓，建立起整个安全防御机制。</p> <p>以上是我分享的大中型互联网企业IT基础架构，谢谢大家！</p> <h4 id="想了解更多的第一手企业it技术"><a href="#想了解更多的第一手企业it技术" class="header-anchor">#</a> 想了解更多的第一手企业IT技术？</h4> <p>来GOPS2016全球运维大会·上海站，您就对了！</p> <p>甚至还有知名传统企业公司来分析企业IT技术哟。</p></div></div> <div class="page-slot page-slot-bottom"><!-- 横向自适应 -->
      <ins class="adsbygoogle"
          style="display:block"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="6620245489"
          data-ad-format="auto"
          data-full-width-responsive="true"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div> <div class="page-edit"><!----> <!----> <!----></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/b7938f/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">使用 supervisor 管理进程</div></a> <a href="/pages/963d3f/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">用最少的机器支撑万亿级访问，微博6年Redis优化历程</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/b7938f/" class="prev">使用 supervisor 管理进程</a></span> <span class="next"><a href="/pages/963d3f/">用最少的机器支撑万亿级访问，微博6年Redis优化历程</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/613b69/"><div>
            postgresql安装
            <!----></div></a> <span class="date">06-24</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/8ae632/"><div>
            oracle笔记
            <!----></div></a> <span class="date">06-24</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/765fc1/"><div>
            opengauss笔记
            <!----></div></a> <span class="date">06-24</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:48211701@qq.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/opersdev" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://all.xnuo.top" title="听音乐" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2019-2022
    <span>kevin | <a href="https://github.com/opersdev" target="_blank">小诺运维</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <div class="custom-html-window custom-html-window-rb" style="display:;"><div class="custom-wrapper"><span class="close-but">×</span> <div><!-- 固定160*160px -->
      <ins class="adsbygoogle"
          style="display:inline-block;max-width:160px;max-height:160px"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="8377369658"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
      </div></div></div></div><div class="global-ui"><div></div></div></div>
    <script src="/assets/js/app.38f1b0a4.js" defer></script><script src="/assets/js/2.6beb1dc7.js" defer></script><script src="/assets/js/86.06ff7ec2.js" defer></script>
  </body>
</html>
