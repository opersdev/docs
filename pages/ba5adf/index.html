<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JetLinks | 小诺文档中心</title>
    <meta name="generator" content="VuePress 1.9.5">
    <link rel="icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="https://at.alicdn.com/t/font_3077305_pt8umhrn4k9.css">
    <meta name="description" content="运维技术文档,mysql,k8s,docker,linux,shell,python等技术文章。">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <meta name="keywords" content="运维技术文档,mysql,k8s,docker,linux,shell,python,技术文档,学习,面试,git,github,markdown">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.92233c96.css" as="style"><link rel="preload" href="/assets/js/app.38f1b0a4.js" as="script"><link rel="preload" href="/assets/js/2.6beb1dc7.js" as="script"><link rel="preload" href="/assets/js/103.3bcf44f5.js" as="script"><link rel="prefetch" href="/assets/js/10.4365b950.js"><link rel="prefetch" href="/assets/js/100.8dac6c81.js"><link rel="prefetch" href="/assets/js/101.a5556ac1.js"><link rel="prefetch" href="/assets/js/102.e3ff38b9.js"><link rel="prefetch" href="/assets/js/104.6d56e53e.js"><link rel="prefetch" href="/assets/js/105.4fc9762e.js"><link rel="prefetch" href="/assets/js/106.f507561a.js"><link rel="prefetch" href="/assets/js/107.6c94c756.js"><link rel="prefetch" href="/assets/js/108.f7ff1945.js"><link rel="prefetch" href="/assets/js/109.aeb1e532.js"><link rel="prefetch" href="/assets/js/11.fe1ff844.js"><link rel="prefetch" href="/assets/js/110.dda67b83.js"><link rel="prefetch" href="/assets/js/111.5b990f24.js"><link rel="prefetch" href="/assets/js/112.0a27d3a0.js"><link rel="prefetch" href="/assets/js/113.972cd001.js"><link rel="prefetch" href="/assets/js/114.875814a1.js"><link rel="prefetch" href="/assets/js/115.ec235d59.js"><link rel="prefetch" href="/assets/js/116.03bd2386.js"><link rel="prefetch" href="/assets/js/117.68765825.js"><link rel="prefetch" href="/assets/js/118.9d6d0255.js"><link rel="prefetch" href="/assets/js/119.ff84a82f.js"><link rel="prefetch" href="/assets/js/12.aa21f453.js"><link rel="prefetch" href="/assets/js/120.20639785.js"><link rel="prefetch" href="/assets/js/121.6c546150.js"><link rel="prefetch" href="/assets/js/122.48e85de5.js"><link rel="prefetch" href="/assets/js/123.fc931745.js"><link rel="prefetch" href="/assets/js/124.797d5fda.js"><link rel="prefetch" href="/assets/js/125.b23a31c7.js"><link rel="prefetch" href="/assets/js/126.d7a182fd.js"><link rel="prefetch" href="/assets/js/127.167a63d6.js"><link rel="prefetch" href="/assets/js/128.878d4a7e.js"><link rel="prefetch" href="/assets/js/129.a8957dfa.js"><link rel="prefetch" href="/assets/js/13.161be064.js"><link rel="prefetch" href="/assets/js/130.3961a295.js"><link rel="prefetch" href="/assets/js/131.9c4e7a56.js"><link rel="prefetch" href="/assets/js/132.41d26584.js"><link rel="prefetch" href="/assets/js/133.6d91047e.js"><link rel="prefetch" href="/assets/js/134.121ecf0e.js"><link rel="prefetch" href="/assets/js/135.6e30234c.js"><link rel="prefetch" href="/assets/js/136.6fab7ce4.js"><link rel="prefetch" href="/assets/js/137.209af36e.js"><link rel="prefetch" href="/assets/js/138.660f236e.js"><link rel="prefetch" href="/assets/js/139.81c29d19.js"><link rel="prefetch" href="/assets/js/14.d0f13635.js"><link rel="prefetch" href="/assets/js/140.d8f594ca.js"><link rel="prefetch" href="/assets/js/141.89fbea1c.js"><link rel="prefetch" href="/assets/js/142.643bccec.js"><link rel="prefetch" href="/assets/js/143.f270bffc.js"><link rel="prefetch" href="/assets/js/144.cf6f4c9a.js"><link rel="prefetch" href="/assets/js/145.093699b5.js"><link rel="prefetch" href="/assets/js/146.876575d0.js"><link rel="prefetch" href="/assets/js/147.dc120635.js"><link rel="prefetch" href="/assets/js/148.4a3ba80f.js"><link rel="prefetch" href="/assets/js/149.4afb7469.js"><link rel="prefetch" href="/assets/js/15.af46dbb5.js"><link rel="prefetch" href="/assets/js/150.4eb38cf2.js"><link rel="prefetch" href="/assets/js/151.4fe6a931.js"><link rel="prefetch" href="/assets/js/16.4cbf8beb.js"><link rel="prefetch" href="/assets/js/17.1da2b6ae.js"><link rel="prefetch" href="/assets/js/18.0402bfbf.js"><link rel="prefetch" href="/assets/js/19.230bfe93.js"><link rel="prefetch" href="/assets/js/20.0d20ddb2.js"><link rel="prefetch" href="/assets/js/21.9dbdbc8b.js"><link rel="prefetch" href="/assets/js/22.1410508d.js"><link rel="prefetch" href="/assets/js/23.63089216.js"><link rel="prefetch" href="/assets/js/24.e6fe9306.js"><link rel="prefetch" href="/assets/js/25.1240d0c9.js"><link rel="prefetch" href="/assets/js/26.0f4fb46d.js"><link rel="prefetch" href="/assets/js/27.5b193a22.js"><link rel="prefetch" href="/assets/js/28.90e27733.js"><link rel="prefetch" href="/assets/js/29.cdb75f6c.js"><link rel="prefetch" href="/assets/js/3.1229de89.js"><link rel="prefetch" href="/assets/js/30.23c0524a.js"><link rel="prefetch" href="/assets/js/31.bc292e1e.js"><link rel="prefetch" href="/assets/js/32.79645dcf.js"><link rel="prefetch" href="/assets/js/33.53e29142.js"><link rel="prefetch" href="/assets/js/34.7ce01d2e.js"><link rel="prefetch" href="/assets/js/35.bcdc888c.js"><link rel="prefetch" href="/assets/js/36.00ce19aa.js"><link rel="prefetch" href="/assets/js/37.e53fea30.js"><link rel="prefetch" href="/assets/js/38.1b84e50f.js"><link rel="prefetch" href="/assets/js/39.ed0470cb.js"><link rel="prefetch" href="/assets/js/4.93dbb352.js"><link rel="prefetch" href="/assets/js/40.010f2420.js"><link rel="prefetch" href="/assets/js/41.7aefa9d2.js"><link rel="prefetch" href="/assets/js/42.eadeaa1f.js"><link rel="prefetch" href="/assets/js/43.012419aa.js"><link rel="prefetch" href="/assets/js/44.aa86bffd.js"><link rel="prefetch" href="/assets/js/45.b7ce8c1a.js"><link rel="prefetch" href="/assets/js/46.bd51c47b.js"><link rel="prefetch" href="/assets/js/47.71d2a52e.js"><link rel="prefetch" href="/assets/js/48.71b9430b.js"><link rel="prefetch" href="/assets/js/49.d92deee5.js"><link rel="prefetch" href="/assets/js/5.9228d2a8.js"><link rel="prefetch" href="/assets/js/50.2827e7a9.js"><link rel="prefetch" href="/assets/js/51.94c41d82.js"><link rel="prefetch" href="/assets/js/52.73681932.js"><link rel="prefetch" href="/assets/js/53.4db7ebcf.js"><link rel="prefetch" href="/assets/js/54.8e6699ab.js"><link rel="prefetch" href="/assets/js/55.3d832a8c.js"><link rel="prefetch" href="/assets/js/56.43282683.js"><link rel="prefetch" href="/assets/js/57.ea8d4f37.js"><link rel="prefetch" href="/assets/js/58.12ff8ca5.js"><link rel="prefetch" href="/assets/js/59.47100612.js"><link rel="prefetch" href="/assets/js/6.341b2c5d.js"><link rel="prefetch" href="/assets/js/60.914e7e2d.js"><link rel="prefetch" href="/assets/js/61.d9414480.js"><link rel="prefetch" href="/assets/js/62.a3747f73.js"><link rel="prefetch" href="/assets/js/63.1a2e54c1.js"><link rel="prefetch" href="/assets/js/64.d9f9224a.js"><link rel="prefetch" href="/assets/js/65.53e3f7bd.js"><link rel="prefetch" href="/assets/js/66.92d44566.js"><link rel="prefetch" href="/assets/js/67.67aba1d2.js"><link rel="prefetch" href="/assets/js/68.acce7dfb.js"><link rel="prefetch" href="/assets/js/69.3dacbd45.js"><link rel="prefetch" href="/assets/js/7.3d063b98.js"><link rel="prefetch" href="/assets/js/70.b40c0f61.js"><link rel="prefetch" href="/assets/js/71.51b34635.js"><link rel="prefetch" href="/assets/js/72.498f4ff0.js"><link rel="prefetch" href="/assets/js/73.b22c0978.js"><link rel="prefetch" href="/assets/js/74.823f2a12.js"><link rel="prefetch" href="/assets/js/75.d24d261d.js"><link rel="prefetch" href="/assets/js/76.44db605e.js"><link rel="prefetch" href="/assets/js/77.efce42e9.js"><link rel="prefetch" href="/assets/js/78.11405a06.js"><link rel="prefetch" href="/assets/js/79.9f0076d7.js"><link rel="prefetch" href="/assets/js/8.812a9a47.js"><link rel="prefetch" href="/assets/js/80.4fc1dc52.js"><link rel="prefetch" href="/assets/js/81.f8963444.js"><link rel="prefetch" href="/assets/js/82.627d5503.js"><link rel="prefetch" href="/assets/js/83.49c45765.js"><link rel="prefetch" href="/assets/js/84.b2045805.js"><link rel="prefetch" href="/assets/js/85.420cfd4a.js"><link rel="prefetch" href="/assets/js/86.06ff7ec2.js"><link rel="prefetch" href="/assets/js/87.4dfb234a.js"><link rel="prefetch" href="/assets/js/88.079f044f.js"><link rel="prefetch" href="/assets/js/89.bb76f78f.js"><link rel="prefetch" href="/assets/js/9.8be13208.js"><link rel="prefetch" href="/assets/js/90.ae61c8f3.js"><link rel="prefetch" href="/assets/js/91.8728eb6a.js"><link rel="prefetch" href="/assets/js/92.0d8581e8.js"><link rel="prefetch" href="/assets/js/93.e05baea5.js"><link rel="prefetch" href="/assets/js/94.c661a216.js"><link rel="prefetch" href="/assets/js/95.5414604a.js"><link rel="prefetch" href="/assets/js/96.529def2c.js"><link rel="prefetch" href="/assets/js/97.fb2d6168.js"><link rel="prefetch" href="/assets/js/98.69e544d7.js"><link rel="prefetch" href="/assets/js/99.a7993a79.js">
    <link rel="stylesheet" href="/assets/css/0.styles.92233c96.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.png" alt="小诺文档中心" class="logo"> <span class="site-name can-hide">小诺文档中心</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="https://opersdev.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  小诺博客
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/devops/" class="nav-link">DevOps</a></div><div class="nav-item"><a href="/k8s/" class="nav-link">云原生</a></div><div class="nav-item"><a href="/technology/" class="nav-link">技术</a></div><div class="nav-item"><a href="/more/" class="nav-link">更多</a></div><div class="nav-item"><a href="/wzdh/" class="nav-link">网址导航</a></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/opersdev" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://cdn.jsdelivr.net/gh/opersdev/docs/img/touxiang.jpg"> <div class="blogger-info"><h3>kevin</h3> <span>运维界的菜鸟</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="https://opersdev.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  小诺博客
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/devops/" class="nav-link">DevOps</a></div><div class="nav-item"><a href="/k8s/" class="nav-link">云原生</a></div><div class="nav-item"><a href="/technology/" class="nav-link">技术</a></div><div class="nav-item"><a href="/more/" class="nav-link">更多</a></div><div class="nav-item"><a href="/wzdh/" class="nav-link">网址导航</a></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/opersdev" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>踩坑</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>技术文章</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>运维文档</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>计算机网络</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>开源应用</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/ba5adf/" aria-current="page" class="active sidebar-link">JetLinks</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/ba5adf/#核心特性" class="sidebar-link">核心特性</a></li><li class="sidebar-sub-header level2"><a href="/pages/ba5adf/#技术栈" class="sidebar-link">技术栈</a></li><li class="sidebar-sub-header level2"><a href="/pages/ba5adf/#架构" class="sidebar-link">架构</a></li><li class="sidebar-sub-header level2"><a href="/pages/ba5adf/#设备接入流程" class="sidebar-link">设备接入流程</a></li><li class="sidebar-sub-header level2"><a href="/pages/ba5adf/#安装docker" class="sidebar-link">安装docker</a></li><li class="sidebar-sub-header level2"><a href="/pages/ba5adf/#获取源代码" class="sidebar-link">获取源代码</a></li><li class="sidebar-sub-header level2"><a href="/pages/ba5adf/#启动" class="sidebar-link">启动</a></li><li class="sidebar-sub-header level2"><a href="/pages/ba5adf/#启动成功后访问系统" class="sidebar-link">启动成功后访问系统</a></li><li class="sidebar-sub-header level2"><a href="/pages/ba5adf/#前端部署" class="sidebar-link">前端部署</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/ba5adf/#使用docker部署前端" class="sidebar-link">使用docker部署前端</a></li><li class="sidebar-sub-header level3"><a href="/pages/ba5adf/#使用nginx部署" class="sidebar-link">使用nginx部署</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/ba5adf/#后端部署" class="sidebar-link">后端部署</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/ba5adf/#使用docker部署后端" class="sidebar-link">使用docker部署后端</a></li><li class="sidebar-sub-header level3"><a href="/pages/ba5adf/#jar包方式" class="sidebar-link">jar包方式</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/ba5adf/#集群架构图" class="sidebar-link">集群架构图</a></li><li class="sidebar-sub-header level2"><a href="/pages/ba5adf/#redis集群安装配置" class="sidebar-link">redis集群安装配置</a></li><li class="sidebar-sub-header level2"><a href="/pages/ba5adf/#elasticsearch集群安装配置" class="sidebar-link">elasticsearch集群安装配置</a></li><li class="sidebar-sub-header level2"><a href="/pages/ba5adf/#数据库启动" class="sidebar-link">数据库启动</a></li><li class="sidebar-sub-header level2"><a href="/pages/ba5adf/#jetlinks集群安装配置" class="sidebar-link">jetlinks集群安装配置</a></li><li class="sidebar-sub-header level2"><a href="/pages/ba5adf/#nginx配置" class="sidebar-link">nginx配置</a></li><li class="sidebar-sub-header level2"><a href="/pages/ba5adf/#tcp负载均衡配置方式" class="sidebar-link">tcp负载均衡配置方式</a></li><li class="sidebar-sub-header level2"><a href="/pages/ba5adf/#本地启动" class="sidebar-link">本地启动</a></li><li class="sidebar-sub-header level2"><a href="/pages/ba5adf/#docker启动" class="sidebar-link">docker启动</a></li><li class="sidebar-sub-header level2"><a href="/pages/ba5adf/#jetlinks配置修改" class="sidebar-link">jetlinks配置修改</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JAVA应用</span> <span class="arrow right"></span></p> <!----></section></li></ul> <div class="sidebar-slot sidebar-slot-bottom"><!-- 正方形 -->
      <ins class="adsbygoogle"
          style="display:block"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="3508773082"
          data-ad-format="auto"
          data-full-width-responsive="true"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div></aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/technology/#技术" data-v-06225672>技术</a></li><li data-v-06225672><a href="/technology/#开源应用" data-v-06225672>开源应用</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/opersdev" target="_blank" title="作者" class="beLink" data-v-06225672>xiaonuo</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2022-06-24</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">JetLinks<!----></h1> <div class="page-slot page-slot-top"><!-- 固定100% * 90px可显示，max-height:90px未见显示-->
     <ins class="adsbygoogle"
          style="display:inline-block;width:100%;max-height:90px"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="6625304284"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div> <div class="theme-vdoing-content content__default"><h1 id="jetlinks-开源物联网平台"><a href="#jetlinks-开源物联网平台" class="header-anchor">#</a> JetLinks 开源物联网平台</h1> <p>http://doc.jetlinks.cn/</p> <p>JetLinks 基于Java8,Spring Boot 2.x,WebFlux,Netty,Vert.x,Reactor等开发, 是一个开源的企业级物联网基础开发平台，实现了物联网相关以及相关业务开发的众多基础功能, 能帮助你快速建立物联网相关业务系统。</p> <p>点击添加官方QQ:①群(已满)<a href="https://qm.qq.com/cgi-bin/qm/qr?k=LGf0OPQqvLGdJIZST3VTcypdVWhdfAOG&amp;jump_from=webapi" target="_blank" rel="noopener noreferrer">2021514 (opens new window)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>,②群<a href="https://qm.qq.com/cgi-bin/qm/qr?k=IMas2cH-TNsYxUcY8lRbsXqPnA2sGHYQ&amp;jump_from=webapi" target="_blank" rel="noopener noreferrer">324606263(opens new window)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>在线演示地址: <a href="http://demo.jetlinks.cn/" target="_blank" rel="noopener noreferrer">http://demo.jetlinks.cn (opens new window)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>用户名:<code>test</code> 密码: <code>test123456</code>. 测试用户未开放全部权限,建议本地运行社区版体验或者联系商务试用企业版.</p> <h2 id="核心特性"><a href="#核心特性" class="header-anchor">#</a> 核心特性</h2> <p><strong>开放源代码</strong></p> <p>全部源代码开放,可自由拓展功能,不再受制于人.前后端分离,接口全开放.</p> <p><strong>统一设备接入,海量设备管理</strong></p> <p>TCP/UDP/MQTT/HTTP、TLS/DTLS、不同厂商、不同设备、不同报文、统一接入，统一管理.</p> <p><strong>规则引擎</strong></p> <p>灵活的规则模型配置,支持多种规则模型以及<a href="http://doc.jetlinks.cn/dev-guide/rule-engine.html" target="_blank" rel="noopener noreferrer">自定义规则模型<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. 设备告警,场景联动,均由统一的规则引擎管理.</p> <p>强大的可视化规则设计器. <img src="https://image.aomtop.com/i/2022/06/24/62b52a2e42334.png" alt="rule-engine.png"></p> <p>说明</p> <p>可视化规则设计器基于node-red,后端使用纯java实现.</p> <p><strong>数据权限控制</strong></p> <p>灵活的非侵入<a href="http://doc.jetlinks.cn/dev-guide/assets.html" target="_blank" rel="noopener noreferrer">数据权限控制<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。可实现不同机构,不同用户共享数据。 可控制单条数据的操作权限。支持自定义维度(公司,部门...)</p> <p><strong>多种数据存储策略</strong></p> <p>支持灵活的设备<a href="http://doc.jetlinks.cn/best-practices/start.html#%E5%AD%98%E5%82%A8%E7%AD%96%E7%95%A5%E9%80%89%E6%8B%A9" target="_blank" rel="noopener noreferrer">数据存储策略<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，可将不同类型的设备数据存储到不同的地方。</p> <h2 id="技术栈"><a href="#技术栈" class="header-anchor">#</a> 技术栈</h2> <ol><li><a href="https://spring.io/projects/spring-boot" target="_blank" rel="noopener noreferrer">Spring Boot 2.3.x(opens new window)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://spring.io/" target="_blank" rel="noopener noreferrer">Spring WebFlux (opens new window)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>响应式Web支持</li> <li><a href="https://r2dbc.io/" target="_blank" rel="noopener noreferrer">R2DBC (opens new window)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>响应式关系型数据库驱动</li> <li><a href="https://projectreactor.io/" target="_blank" rel="noopener noreferrer">Project Reactor (opens new window)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>响应式编程框架</li> <li><a href="https://netty.io/" target="_blank" rel="noopener noreferrer">Netty (opens new window)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>,<a href="https://vertx.io/" target="_blank" rel="noopener noreferrer">Vert.x (opens new window)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>高性能网络编程框架</li> <li><a href="https://www.elastic.co/cn/products/enterprise-search" target="_blank" rel="noopener noreferrer">ElasticSearch (opens new window)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>全文检索，日志，时序数据存储</li> <li><a href="https://redis.io/" target="_blank" rel="noopener noreferrer">Redis (opens new window)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>Redis,设备配置,状态管理,缓存.</li> <li><a href="https://www.postgresql.org/" target="_blank" rel="noopener noreferrer">PostgreSQL (opens new window)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>业务功能数据管理</li> <li><a href="https://github.com/hs-web" target="_blank" rel="noopener noreferrer">hsweb framework 4 (opens new window)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>业务功能基础框架</li></ol> <h2 id="架构"><a href="#架构" class="header-anchor">#</a> 架构</h2> <p><img src="https://image.aomtop.com/i/2022/06/24/62b52abeeb50e.png" alt="image-20220624110846011"></p> <h2 id="设备接入流程"><a href="#设备接入流程" class="header-anchor">#</a> 设备接入流程</h2> <p><img src="https://image.aomtop.com/i/2022/06/24/62b52ad156dcc.png" alt="image-20220624110904433"></p> <p>使用Docker快速启动</p> <h2 id="安装docker"><a href="#安装docker" class="header-anchor">#</a> 安装docker</h2> <p>根据不同操作系统选择安装docker-ce或者Docker Desktop。</p> <ul><li><a href="https://hub.docker.com/editions/community/docker-ce-desktop-mac" target="_blank" rel="noopener noreferrer">Mac(opens new window)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://hub.docker.com/search?q=&amp;type=edition&amp;offering=community&amp;sort=updated_at&amp;order=desc&amp;operating_system=linux" target="_blank" rel="noopener noreferrer">Linux(opens new window)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://hub.docker.com/editions/community/docker-ce-desktop-windows" target="_blank" rel="noopener noreferrer">Windows(opens new window)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="获取源代码"><a href="#获取源代码" class="header-anchor">#</a> 获取源代码</h2> <p>jetlinks源代码托管在<a href="https://github.com/jetlinks/jetlinks-community" target="_blank" rel="noopener noreferrer">GitHub (opens new window)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>和<a href="https://gitee.com/jetlinks/jetlinks-community" target="_blank" rel="noopener noreferrer">gitee (opens new window)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，可直接前往克隆或者下载。</p> <p>建议使用git clone。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">git</span> clone https://github.com/jetlinks/jetlinks-community.git <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">cd</span> jetlinks-community
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="启动"><a href="#启动" class="header-anchor">#</a> 启动</h2> <p><a href="http://doc.jetlinks.cn/install-deployment/docker-start.html#%E8%8E%B7%E5%8F%96%E6%BA%90%E4%BB%A3%E7%A0%81" target="_blank" rel="noopener noreferrer">获取源代码<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>成功后，进入docker/run-all目录。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token builtin class-name">cd</span> docker/run-all
$ <span class="token function">docker-compose</span> up
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>注意：</p> <p>docker-compose中的jetlinks、jetlinks-ui-antd镜像持续更新中，启动docker之前请及时下载更新。</p> <h2 id="启动成功后访问系统"><a href="#启动成功后访问系统" class="header-anchor">#</a> 启动成功后访问系统</h2> <p>地址: <code>http://localhost:9000</code>, 用户名:<code>admin</code>,密码:<code>admin</code>。</p> <h1 id="部署到服务器"><a href="#部署到服务器" class="header-anchor">#</a> 部署到服务器</h1> <h2 id="前端部署"><a href="#前端部署" class="header-anchor">#</a> 前端部署</h2> <p>环境要求</p> <ul><li>nodeJs v12.xx</li> <li>npm v6.xx</li></ul> <ol><li>获取源代码</li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>$ <span class="token function">git</span> clone https://github.com/jetlinks/jetlinks-ui-antd.git
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol><li>使用npm打包,并将打包后的文件复制到项目的docker目录下（命令在项目根目录下执行）</li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span>
<span class="token function">npm</span> run-script build 
<span class="token function">cp</span> -r dist docker/       
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="使用docker部署前端"><a href="#使用docker部署前端" class="header-anchor">#</a> 使用docker部署前端</h3> <ol><li>构建docker镜像</li></ol> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> build -t registry.cn-shenzhen.aliyuncs.com/jetlinks/jetlinks-ui-antd:1.10.0 ./docker
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol><li>运行docker镜像</li></ol> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> run -it --rm -p <span class="token number">9000</span>:80 -e <span class="token string">&quot;API_BASE_PATH=http://xxx:8848/&quot;</span> registry.cn-shenzhen.aliyuncs.com/jetlinks/jetlinks-ui-antd:1.10.0
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>注意</p> <p>环境变量<code>API_BASE_PATH</code>为后台API根地址. 由docker容器内进行自动代理. 请根据自己的系统环境配置环境变量: <code>API_BASE_PATH</code></p> <h3 id="使用nginx部署"><a href="#使用nginx部署" class="header-anchor">#</a> 使用nginx部署</h3> <ol><li>复制<code>dist</code>目录下到文件到<code>/usr/share/nginx/html</code></li> <li>添加nginx配置文件</li></ol> <p>nginx配置参考：</p> <div class="language-text line-numbers-mode"><pre class="language-text"><code>server {
    listen 80;
    # gzip config
    gzip on;
    gzip_min_length 1k;
    gzip_comp_level 9;
    gzip_types text/plain text/css text/javascript application/json application/javascript application/x-javascript application/xml;
    gzip_vary on;
    gzip_disable &quot;MSIE [1-6]\.&quot;;

    root /usr/share/nginx/html;
    include /etc/nginx/mime.types;
    location / {
        index  index.html;
    }

    location ^~/jetlinks/ {
        proxy_pass http://jetlinks:8848/; #修改此地址为后台服务地址
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_set_header Host $host:$server_port;
        proxy_set_header X-Real-IP  $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection &quot;upgrade&quot;;
        proxy_connect_timeout   1;
        proxy_buffering off;
        chunked_transfer_encoding off;
        proxy_cache off;
        proxy_send_timeout      30m;
        proxy_read_timeout      30m;
        client_max_body_size    100m;
    }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><h2 id="后端部署"><a href="#后端部署" class="header-anchor">#</a> 后端部署</h2> <h3 id="使用docker部署后端"><a href="#使用docker部署后端" class="header-anchor">#</a> 使用docker部署后端</h3> <ol><li>使用maven命令将项目打包
在代码根目录执行：</li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>mvn clean package -Dmaven.test.skip<span class="token operator">=</span>true
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol><li>使用docker构建镜像</li></ol> <p>注意</p> <p>请自行准备docker镜像仓库，此处以registry.cn-shenzhen.aliyuncs.com阿里云私有仓库为例。</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>$ <span class="token builtin class-name">cd</span> ./jetlinks-standalone
$ <span class="token function">docker</span> build -t registry.cn-shenzhen.aliyuncs.com/jetlinks/jetlinks-standalone:latest <span class="token builtin class-name">.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol><li>推送镜像</li></ol> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">docker</span> push registry.cn-shenzhen.aliyuncs.com/jetlinks/jetlinks-standalone:latest
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol><li>创建docker-compose文件</li></ol> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>version: <span class="token string">'2'</span>
services:
  redis:
    image: redis:5.0.4
    container_name: jetlinks-ce-redis
    <span class="token comment">#    ports:</span>
    <span class="token comment">#      - &quot;6379:6379&quot;</span>
    volumes:
      - <span class="token string">&quot;redis-volume:/data&quot;</span>
    command: redis-server --appendonly <span class="token function">yes</span> --requirepass <span class="token string">&quot;redispassword&quot;</span>
    environment:
      - <span class="token assign-left variable">TZ</span><span class="token operator">=</span>Asia/Shanghai
  elasticsearch:
    image: elasticsearch:6.8.11
    container_name: jetlinks-ce-elasticsearch
    environment:
      ES_JAVA_OPTS: -Djava.net.preferIPv4Stack<span class="token operator">=</span>true -Xms1g -Xmx1g
      transport.host: <span class="token number">0.0</span>.0.0
      discovery.type: single-node
      bootstrap.memory_lock: <span class="token string">&quot;true&quot;</span>
      discovery.zen.minimum_master_nodes: <span class="token number">1</span>
      discovery.zen.ping.unicast.hosts: elasticsearch
    volumes:
      - elasticsearch-volume:/usr/share/elasticsearch/data
  <span class="token comment">#    ports:</span>
  <span class="token comment">#      - &quot;9200:9200&quot;</span>
  <span class="token comment">#      - &quot;9300:9300&quot;</span>
  kibana:
    image: kibana:6.8.11
    container_name: jetlinks-ce-kibana
    environment:
      ELASTICSEARCH_URL: http://elasticsearch:9200
    links:
      - elasticsearch:elasticsearch
    ports:
      - <span class="token string">&quot;5602:5601&quot;</span>
    depends_on:
      - elasticsearch
  postgres:
    image: postgres:11-alpine
    container_name: jetlinks-ce-postgres
    volumes:
      - <span class="token string">&quot;postgres-volume:/var/lib/postgresql/data&quot;</span>
    ports:
      - <span class="token string">&quot;5432:5432&quot;</span>
    environment:
      POSTGRES_PASSWORD: jetlinks
      POSTGRES_DB: jetlinks
      TZ: Asia/Shanghai
  ui:
    image: registry.cn-shenzhen.aliyuncs.com/jetlinks/jetlinks-ui-antd:latest
    container_name: jetlinks-ce-ui
    ports:
      - <span class="token number">9000</span>:80
    environment:
      - <span class="token string">&quot;API_BASE_PATH=http://jetlinks:8848/&quot;</span> <span class="token comment">#API根路径</span>
    volumes:
      - <span class="token string">&quot;jetlinks-volume:/usr/share/nginx/html/upload&quot;</span>
    links:
      - jetlinks:jetlinks
  jetlinks:
    image: registry.cn-shenzhen.aliyuncs.com/jetlinks/jetlinks-standalone:latest
    container_name: jetlinks-ce
    ports:
      - <span class="token number">8848</span>:8848 <span class="token comment"># API端口</span>
      - <span class="token number">1883</span>-1890:1883-1890 <span class="token comment"># 预留</span>
      - <span class="token number">8000</span>-8010:8000-8010 <span class="token comment"># 预留</span>
    volumes:
      - <span class="token string">&quot;jetlinks-volume:/application/static/upload&quot;</span>  <span class="token comment"># 持久化上传的文件</span>
      - <span class="token string">&quot;jetlinks-protocol-volume:/application/data/protocols&quot;</span>
    environment:
     <span class="token comment"># - &quot;JAVA_OPTS=-Xms4g -Xmx18g -XX:+UseG1GC&quot;</span>
      - <span class="token string">&quot;TZ=Asia/Shanghai&quot;</span>
      - <span class="token string">&quot;hsweb.file.upload.static-location=http://127.0.0.1:8848/upload&quot;</span>  <span class="token comment">#上传的静态文件访问根地址,为ui的地址.</span>
      - <span class="token string">&quot;spring.r2dbc.url=r2dbc:postgresql://postgres:5432/jetlinks&quot;</span> <span class="token comment">#数据库连接地址</span>
      - <span class="token string">&quot;spring.r2dbc.username=postgres&quot;</span>
      - <span class="token string">&quot;spring.r2dbc.password=jetlinks&quot;</span>
      - <span class="token string">&quot;spring.redis.host=redis&quot;</span>
      - <span class="token string">&quot;spring.redis.port=6379&quot;</span>
      - <span class="token string">&quot;spring.redis.password=redispassword&quot;</span>#生产环境请配置redis密码
      <span class="token comment"># 生产环境下请配置es的密码，或者关闭公网访问</span>
      - <span class="token string">&quot;spring.data.elasticsearch.client.reactive.endpoints=elasticsearch:9200&quot;</span>
<span class="token comment">#      - &quot;spring.data.elasticsearch.client.reactive.username=admin&quot;</span>
<span class="token comment">#      - &quot;spring.data.elasticsearch.client.reactive.password=admin&quot; </span>
<span class="token comment">#      - &quot;spring.reactor.debug-agent.enabled=false&quot; #设置为false能提升性能</span>
<span class="token comment">#      - &quot;jetlinks.device.storage.enable-last-data-in-db=true&quot; # 开启记录最新数据到数据库，但是会降低吞吐量</span>
      - <span class="token string">&quot;logging.level.io.r2dbc=warn&quot;</span>
      - <span class="token string">&quot;logging.level.org.springframework.data=warn&quot;</span>
      - <span class="token string">&quot;logging.level.org.springframework=warn&quot;</span>
      - <span class="token string">&quot;logging.level.org.jetlinks=warn&quot;</span>
      - <span class="token string">&quot;logging.level.org.hswebframework=warn&quot;</span>
      - <span class="token string">&quot;logging.level.org.springframework.data.r2dbc.connectionfactory=warn&quot;</span>
    links:
      - redis:redis
      - postgres:postgres
      - elasticsearch:elasticsearch
    depends_on:
      - postgres
      - redis
      - elasticsearch
volumes:
  postgres-volume:
  redis-volume:
  elasticsearch-volume:
  jetlinks-volume:
  jetlinks-protocol-volume:
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br></div></div><p>注意：</p> <p>jetlinks docker镜像版本更新和源代码根目录下文件pom.xml中的版本号同步。</p> <p>6.运行docker-compose文件</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker-compose</span> up -d
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="jar包方式"><a href="#jar包方式" class="header-anchor">#</a> jar包方式</h3> <p>1.使用maven命令将项目打包，在代码根目录执行：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>./mvnw clean package -Dmaven.test.skip<span class="token operator">=</span>true
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>2.将jar包上传到需要部署的服务器上。</p> <p>jar包文件地址: <code>jetlinks-standalone/target/jetlinks-standalone.jar</code></p> <p>3.使用java命令运行jar包</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ java -jar jetlinks-standalone.jar
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>注意</p> <p>请根据情况调整jvm参数等信息.</p> <h1 id="集群部署"><a href="#集群部署" class="header-anchor">#</a> 集群部署</h1> <p>jetlinks以及所需中间件的集群部署</p> <p>注意：</p> <p>仅企业版以上支持。
本文档以172.16.4.13、172.16.4.12、172.16.4.11三台服务器来搭建集群。</p> <h2 id="集群架构图"><a href="#集群架构图" class="header-anchor">#</a> 集群架构图</h2> <p><img src="https://image.aomtop.com/i/2022/06/24/62b52b1047cb5.png" alt="image-20220624111007351"></p> <h2 id="redis集群安装配置"><a href="#redis集群安装配置" class="header-anchor">#</a> redis集群安装配置</h2> <p>这里准备在一台服务器上搭建一个三主三从的redis集群。</p> <ol><li>安装redis 先<a href="http://download.redis.io/releases/" target="_blank" rel="noopener noreferrer">下载redis (opens new window)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>,本文档以redis5.0.5为例。
下载完成后进行解压、编译、安装。</li></ol> <p>注意：</p> <p>redis是由C语言编写的，它的运行需要C环境，所以编译前需安装 gcc。</p> <ol><li>新建一个cluster文件夹，用来存放集群节点目录。
分别在172.16.4.11上创建7000、7003、7001、7004、7002、7005六文件夹，，这些节点分别使用7000、7003、7001、7004、7002、7005端口，以7000节点为例配置如下：</li></ol> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>port <span class="token number">7000</span>
<span class="token builtin class-name">bind</span> <span class="token number">172.16</span>.4.11
cluster-enabled <span class="token function">yes</span>
cluster-config-file nodes_7000.conf
cluster-node-timeout <span class="token number">5000</span>
appendonly no
daemonize  <span class="token function">yes</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>其他节点只需修改端口和文件名，依次按此进行配置即可，配置完成后启动节点。</p> <p>注意：</p> <p>建议appendonly在从节点开启，主节点关闭。</p> <ol><li>主从节点分配</li></ol> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>redis-cli --cluster create <span class="token number">172.16</span>.4.11:7000 <span class="token number">172.16</span>.4.11:7001 <span class="token number">172.16</span>.4.11:7002 <span class="token number">172.16</span>.4.11:7003 <span class="token number">172.16</span>.4.11:7004 <span class="token number">172.16</span>.4.11:7005 --cluster -replicas <span class="token number">1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>注意：</p> <p>其中-replicas 1表示每个主节点1个从节点</p> <ol><li>查看集群节点信息</li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>ops@jetlinks-server-3:~/data/redis-5.0.5$ redis-cli -h <span class="token number">172.16</span>.4.11  -p <span class="token number">7000</span> cluster nodes
562558e5afa0575d1059c47b9531a37cd75a9190 <span class="token number">172.16</span>.4.11:7003@17003 slave 9174a3ebcdbda174ec9189fbae0e38d9bbeeff5f <span class="token number">0</span> <span class="token number">1594368796612</span> <span class="token number">4</span> connected
bd974dbdd2f8447b27375c832c4c9c99328f4487 <span class="token number">172.16</span>.4.11:7005@17005 slave 3ab893f4cdcfaa52254a8cece2b54b561de29990 <span class="token number">0</span> <span class="token number">1594368797514</span> <span class="token number">6</span> connected
9174a3ebcdbda174ec9189fbae0e38d9bbeeff5f <span class="token number">172.16</span>.4.11:7002@17002 master - <span class="token number">0</span> <span class="token number">1594368797615</span> <span class="token number">3</span> connected <span class="token number">10923</span>-16383
3ab893f4cdcfaa52254a8cece2b54b561de29990 <span class="token number">172.16</span>.4.11:7001@17001 master - <span class="token number">0</span> <span class="token number">1594368797000</span> <span class="token number">2</span> connected <span class="token number">5461</span>-10922
238585a079196b0ab15ebb47ac681d42c083cdaf <span class="token number">172.16</span>.4.11:7000@17000 myself,master - <span class="token number">0</span> <span class="token number">1594368796000</span> <span class="token number">1</span> connected <span class="token number">0</span>-5460
d1ae6c623694c5f1fafc64d7abbeac4a9926ff49 <span class="token number">172.16</span>.4.11:7004@17004 slave 238585a079196b0ab15ebb47ac681d42c083cdaf <span class="token number">0</span> <span class="token number">1594368796000</span> <span class="token number">5</span> connected
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>redis集群搭建请参考<a href="https://redis.io/topics/cluster-tutorial" target="_blank" rel="noopener noreferrer">redis官方文档(opens new window)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="elasticsearch集群安装配置"><a href="#elasticsearch集群安装配置" class="header-anchor">#</a> elasticsearch集群安装配置</h2> <ol><li>分别在三台服务器上安装elasticsearch 前往官网<a href="https://www.elastic.co/cn/downloads/elasticsearch" target="_blank" rel="noopener noreferrer">下载 (opens new window)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。
下载完成后安装es。</li> <li>配置elasticsearch.yml文件</li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>ops@jetlinks-server-3:~/elasticsearch/config$ <span class="token function">sudo</span> <span class="token function">vi</span> elasticsearch.yml 
<span class="token comment"># ======================== Elasticsearch Configuration =========================</span>
<span class="token comment">#</span>
<span class="token comment"># NOTE: Elasticsearch comes with reasonable defaults for most settings.</span>
<span class="token comment">#       Before you set out to tweak and tune the configuration, make sure you</span>
<span class="token comment">#       understand what are you trying to accomplish and the consequences.</span>
<span class="token comment">#</span>
<span class="token comment"># The primary way of configuring a node is via this file. This template lists</span>
<span class="token comment"># the most important settings you may want to configure for a production cluster.</span>
<span class="token comment">#</span>
<span class="token comment"># Please consult the documentation for further information on configuration options:</span>
<span class="token comment"># https://www.elastic.co/guide/en/elasticsearch/reference/index.html</span>
<span class="token comment">#</span>
<span class="token comment"># ---------------------------------- Cluster -----------------------------------</span>
<span class="token comment">#</span>
<span class="token comment"># Use a descriptive name for your cluster:</span>
<span class="token comment">#</span>
cluster.name: es-cluster
<span class="token comment">#</span>
<span class="token comment"># ------------------------------------ Node ------------------------------------</span>
<span class="token comment">#</span>
<span class="token comment"># Use a descriptive name for the node:</span>
<span class="token comment">#</span>
node.name: node-3
<span class="token comment">#</span>
<span class="token comment"># Add custom attributes to the node:</span>
<span class="token comment">#</span>
<span class="token comment">#node.attr.rack: r1</span>
<span class="token comment">#</span>
<span class="token comment"># ----------------------------------- Paths ------------------------------------</span>
<span class="token comment">#</span>
<span class="token comment"># Path to directory where to store the data (separate multiple locations by comma):</span>
<span class="token comment">#</span>
<span class="token comment">#path.data: /path/to/data</span>
<span class="token comment">#</span>
<span class="token comment"># Path to log files:</span>
<span class="token comment">#</span>
<span class="token comment">#path.logs: /path/to/logs</span>
<span class="token comment">#</span>
<span class="token comment"># ----------------------------------- Memory -----------------------------------</span>
<span class="token comment">#</span>
<span class="token comment"># Lock the memory on startup:</span>
<span class="token comment">#</span>
<span class="token comment">#bootstrap.memory_lock: true</span>
<span class="token comment">#</span>
<span class="token comment"># Make sure that the heap size is set to about half the memory available</span>
<span class="token comment"># on the system and that the owner of the process is allowed to use this</span>
<span class="token comment"># limit.</span>
<span class="token comment">#</span>
<span class="token comment"># Elasticsearch performs poorly when the system is swapping the memory.</span>
<span class="token comment">#</span>
<span class="token comment"># ---------------------------------- Network -----------------------------------</span>
<span class="token comment">#</span>
<span class="token comment"># Set the bind address to a specific IP (IPv4 or IPv6):</span>
<span class="token comment">#</span>
network.host: <span class="token number">172.16</span>.4.11

transport.tcp.port: <span class="token number">9300</span>
<span class="token comment">#</span>
<span class="token comment"># Set a custom port for HTTP:</span>
<span class="token comment">#</span>
http.port: <span class="token number">9200</span>
<span class="token comment">#</span>
<span class="token comment"># For more information, consult the network module documentation.</span>
<span class="token comment">#</span>
<span class="token comment"># --------------------------------- Discovery ----------------------------------</span>
<span class="token comment">#</span>
<span class="token comment"># Pass an initial list of hosts to perform discovery when new node is started:</span>
<span class="token comment"># The default list of hosts is [&quot;127.0.0.1&quot;, &quot;[::1]&quot;]</span>
<span class="token comment">#</span>
discovery.zen.ping.unicast.hosts: <span class="token punctuation">[</span><span class="token string">&quot;172.16.4.13:9300&quot;</span>, <span class="token string">&quot;172.16.4.12:19300&quot;</span>,<span class="token string">&quot;172.16.4.11:9300&quot;</span><span class="token punctuation">]</span>
<span class="token comment">#</span>
<span class="token comment"># Prevent the &quot;split brain&quot; by configuring the majority of nodes (total number of master-eligible nodes / 2 + 1):</span>
<span class="token comment">#</span>
discovery.zen.minimum_master_nodes: <span class="token number">1</span>
<span class="token comment">#</span>
<span class="token comment"># For more information, consult the zen discovery module documentation.</span>
<span class="token comment">#</span>
<span class="token comment"># ---------------------------------- Gateway -----------------------------------</span>
<span class="token comment">#</span>
<span class="token comment"># Block initial recovery after a full cluster restart until N nodes are started:</span>
<span class="token comment">#</span>
<span class="token comment">#gateway.recover_after_nodes: 3</span>
<span class="token comment">#</span>
<span class="token comment"># For more information, consult the gateway module documentation.</span>
<span class="token comment">#</span>
<span class="token comment"># ---------------------------------- Various -----------------------------------</span>
<span class="token comment">#</span>
<span class="token comment"># Require explicit names when deleting indices:</span>
<span class="token comment">#</span>
<span class="token comment">#action.destructive_requires_name: true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br></div></div><p>三台服务器不同的配置：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment">#172.16.4.11</span>
node.name: node-3  
network.host:172.16.4.11    
<span class="token comment">#172.16.4.12</span>
node.name: node-2  
network.host:172.16.4.12 
<span class="token comment">#172.16.4.13</span>
node.name: node-1  
network.host:172.16.4.13 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>3 在三台服务器上分别启动es</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>./bin/elasticsearch
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="数据库启动"><a href="#数据库启动" class="header-anchor">#</a> 数据库启动</h2> <p>本文档案例使用docker启动postgresql，可参考<a href="https://github.com/jetlinks/jetlinks-community/blob/master/docker/run-all/docker-compose.yml" target="_blank" rel="noopener noreferrer">docker-compose.yml (opens new window)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>文件中的postgresql配置。</p> <h2 id="jetlinks集群安装配置"><a href="#jetlinks集群安装配置" class="header-anchor">#</a> jetlinks集群安装配置</h2> <p>1.修改application.yml,并将jetlinks打成jar包</p> <p>application.yml文件：</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8844</span>
  <span class="token key atrule">max-http-header-size</span><span class="token punctuation">:</span> 64KB
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">profiles</span><span class="token punctuation">:</span>
    <span class="token key atrule">active</span><span class="token punctuation">:</span> dev
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> jetlinks<span class="token punctuation">-</span>platform
  <span class="token key atrule">jackson</span><span class="token punctuation">:</span>
    <span class="token key atrule">date-format</span><span class="token punctuation">:</span> yyyy<span class="token punctuation">-</span>MM<span class="token punctuation">-</span>dd HH<span class="token punctuation">:</span>mm<span class="token punctuation">:</span>ss
    <span class="token key atrule">time-zone</span><span class="token punctuation">:</span> Asia/Shanghai
    <span class="token key atrule">serialization</span><span class="token punctuation">:</span>
      <span class="token key atrule">WRITE_DATES_AS_TIMESTAMPS</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">default-property-inclusion</span><span class="token punctuation">:</span> non_null
  <span class="token key atrule">resources</span><span class="token punctuation">:</span>
    <span class="token key atrule">static-locations</span><span class="token punctuation">:</span> file<span class="token punctuation">:</span>./static<span class="token punctuation">,</span>classpath<span class="token punctuation">:</span>/META<span class="token punctuation">-</span>INF/resources/<span class="token punctuation">,</span>classpath<span class="token punctuation">:</span>/resources/<span class="token punctuation">,</span>classpath<span class="token punctuation">:</span>/static/<span class="token punctuation">,</span> classpath<span class="token punctuation">:</span>/public/
  <span class="token key atrule">redis</span><span class="token punctuation">:</span>   
    <span class="token comment"># redis集群配置</span>
    <span class="token key atrule">cluster</span><span class="token punctuation">:</span> 
      <span class="token key atrule">nodes</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> 172.16.4.11<span class="token punctuation">:</span><span class="token number">7000</span>
        <span class="token punctuation">-</span> 172.16.4.11<span class="token punctuation">:</span><span class="token number">7001</span>
        <span class="token punctuation">-</span> 172.16.4.11<span class="token punctuation">:</span><span class="token number">7002</span>
        <span class="token punctuation">-</span> 172.16.4.11<span class="token punctuation">:</span><span class="token number">7003</span>
        <span class="token punctuation">-</span> 172.16.4.11<span class="token punctuation">:</span><span class="token number">7004</span>
        <span class="token punctuation">-</span> 172.16.4.11<span class="token punctuation">:</span><span class="token number">7005</span>
      <span class="token key atrule">max-redirects</span><span class="token punctuation">:</span> <span class="token number">3</span>
    <span class="token key atrule">lettuce</span><span class="token punctuation">:</span>
      <span class="token key atrule">pool</span><span class="token punctuation">:</span>
        <span class="token key atrule">max-active</span><span class="token punctuation">:</span> <span class="token number">1024</span>
    <span class="token key atrule">timeout</span><span class="token punctuation">:</span> 20s
    <span class="token key atrule">serializer</span><span class="token punctuation">:</span> jdk <span class="token comment"># 设置fst时,redis key使用string序列化,value使用 fst序列化.</span>
    <span class="token key atrule">database</span><span class="token punctuation">:</span> <span class="token number">0</span>
  <span class="token key atrule">r2dbc</span><span class="token punctuation">:</span>
    <span class="token key atrule">url</span><span class="token punctuation">:</span> r2dbc<span class="token punctuation">:</span>postgresql<span class="token punctuation">:</span>//172.16.4.12<span class="token punctuation">:</span>5432/jetlinks    <span class="token comment">#数据库地址 本文档数据库为docker启动</span>
    <span class="token key atrule">username</span><span class="token punctuation">:</span> postgres
    <span class="token key atrule">password</span><span class="token punctuation">:</span> jetlinks
    <span class="token key atrule">pool</span><span class="token punctuation">:</span>
      <span class="token key atrule">max-size</span><span class="token punctuation">:</span> <span class="token number">32</span>
  <span class="token key atrule">codec</span><span class="token punctuation">:</span>
    <span class="token key atrule">max-in-memory-size</span><span class="token punctuation">:</span> 50MB
  <span class="token key atrule">rabbitmq</span><span class="token punctuation">:</span> <span class="token comment"># 开启了device.message.writer.rabbitmq.enabled=true时生效</span>
    <span class="token key atrule">host</span><span class="token punctuation">:</span> localhost
    <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">5672</span>
    <span class="token key atrule">username</span><span class="token punctuation">:</span> admin
    <span class="token key atrule">password</span><span class="token punctuation">:</span> jetlinks
  <span class="token key atrule">kafka</span><span class="token punctuation">:</span>    <span class="token comment"># 开启了device.message.writer.kafka.enabled=true时生效</span>
    <span class="token key atrule">consumer</span><span class="token punctuation">:</span>
      <span class="token key atrule">client-id</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>spring.application.name<span class="token punctuation">}</span><span class="token punctuation">-</span>consumer<span class="token punctuation">:</span>$<span class="token punctuation">{</span>server.port<span class="token punctuation">}</span>
      <span class="token key atrule">group-id</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>spring.application.name<span class="token punctuation">}</span>
      <span class="token key atrule">max-poll-records</span><span class="token punctuation">:</span> <span class="token number">1000</span>
    <span class="token key atrule">producer</span><span class="token punctuation">:</span>
      <span class="token key atrule">client-id</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>spring.application.name<span class="token punctuation">}</span><span class="token punctuation">-</span>producer<span class="token punctuation">:</span>$<span class="token punctuation">{</span>server.port<span class="token punctuation">}</span>
      <span class="token key atrule">acks</span><span class="token punctuation">:</span> <span class="token number">1</span>
      <span class="token key atrule">retries</span><span class="token punctuation">:</span> <span class="token number">3</span>
    <span class="token key atrule">bootstrap-servers</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;127.0.0.1:9092&quot;</span><span class="token punctuation">]</span>
  <span class="token key atrule">reactor</span><span class="token punctuation">:</span>
    <span class="token key atrule">debug-agent</span><span class="token punctuation">:</span>
      <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># 开启调试代理,在打印异常时将会生成调用踪栈信息</span>
  <span class="token key atrule">data</span><span class="token punctuation">:</span>
    <span class="token key atrule">elasticsearch</span><span class="token punctuation">:</span>
      <span class="token key atrule">client</span><span class="token punctuation">:</span>
        <span class="token key atrule">reactive</span><span class="token punctuation">:</span>
          <span class="token key atrule">endpoints</span><span class="token punctuation">:</span> 
              <span class="token punctuation">-</span> http<span class="token punctuation">:</span>//172.16.4.13<span class="token punctuation">:</span><span class="token number">9200</span>
              <span class="token punctuation">-</span> http<span class="token punctuation">:</span>//172.16.4.12<span class="token punctuation">:</span><span class="token number">19200</span>
              <span class="token punctuation">-</span> http<span class="token punctuation">:</span>//172.16.4.11<span class="token punctuation">:</span><span class="token number">9200</span>
          <span class="token key atrule">max-in-memory-size</span><span class="token punctuation">:</span> 100MB
          <span class="token key atrule">socket-timeout</span><span class="token punctuation">:</span> 10s
          <span class="token key atrule">connection-timeout</span><span class="token punctuation">:</span> 15s
<span class="token key atrule">easyorm</span><span class="token punctuation">:</span>
  <span class="token key atrule">default-schema</span><span class="token punctuation">:</span> public <span class="token comment"># 数据库默认的schema</span>
  <span class="token key atrule">dialect</span><span class="token punctuation">:</span> postgres <span class="token comment">#数据库方言</span>
<span class="token key atrule">elasticsearch</span><span class="token punctuation">:</span>
  <span class="token key atrule">index</span><span class="token punctuation">:</span>
    <span class="token key atrule">default-strategy</span><span class="token punctuation">:</span> time<span class="token punctuation">-</span>by<span class="token punctuation">-</span>month <span class="token comment">#默认es的索引按月进行分表</span>
    <span class="token key atrule">settings</span><span class="token punctuation">:</span>
      <span class="token key atrule">number-of-shards</span><span class="token punctuation">:</span> <span class="token number">3</span> <span class="token comment"># es 分片数量</span>
      <span class="token key atrule">number-of-replicas</span><span class="token punctuation">:</span> <span class="token number">0</span> <span class="token comment"># 副本数量</span>
<span class="token key atrule">device</span><span class="token punctuation">:</span>
  <span class="token key atrule">message</span><span class="token punctuation">:</span>
    <span class="token key atrule">writer</span><span class="token punctuation">:</span>
      <span class="token key atrule">time-series</span><span class="token punctuation">:</span>
        <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># 直接写出设备消息数据到时序数据库</span>
      <span class="token key atrule">kafka</span><span class="token punctuation">:</span>
        <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>  <span class="token comment"># 推送设备消息到kafka</span>
        <span class="token key atrule">consumer</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token comment"># 从kafka订阅消息并写入到时序数据库</span>
        <span class="token key atrule">topic-name</span><span class="token punctuation">:</span> device.message
      <span class="token key atrule">rabbitmq</span><span class="token punctuation">:</span>
        <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>  <span class="token comment"># 推送设备消息到rabbitMQ</span>
        <span class="token key atrule">consumer</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token comment"># 从rabbitMQ订阅消息并写入到时序数据库</span>
        <span class="token key atrule">thread-size</span><span class="token punctuation">:</span> <span class="token number">4</span> <span class="token comment"># 消费线程数</span>
        <span class="token key atrule">auto-ack</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token comment"># 自定应答,为true可能导致数据丢失,但是性能最高。</span>
        <span class="token key atrule">topic-name</span><span class="token punctuation">:</span> device.message  <span class="token comment"># exchange名称</span>
        <span class="token key atrule">ignore-message-types</span><span class="token punctuation">:</span>
        <span class="token key atrule">include-message-types</span><span class="token punctuation">:</span>
<span class="token key atrule">hsweb</span><span class="token punctuation">:</span>
  <span class="token key atrule">cors</span><span class="token punctuation">:</span>
    <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">configs</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">path</span><span class="token punctuation">:</span> /<span class="token important">**</span>
        <span class="token key atrule">allowed-headers</span><span class="token punctuation">:</span> <span class="token string">&quot;*&quot;</span>
        <span class="token key atrule">allowed-methods</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;GET&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;POST&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;PUT&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;PATCH&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;DELETE&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;OPTIONS&quot;</span><span class="token punctuation">]</span>
        <span class="token key atrule">allowed-origins</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">]</span>
        <span class="token key atrule">allow-credentials</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
        <span class="token key atrule">max-age</span><span class="token punctuation">:</span> <span class="token number">1800</span>
  <span class="token key atrule">dict</span><span class="token punctuation">:</span>
    <span class="token key atrule">enum-packages</span><span class="token punctuation">:</span> org.jetlinks
  <span class="token key atrule">file</span><span class="token punctuation">:</span>
    <span class="token key atrule">upload</span><span class="token punctuation">:</span>
      <span class="token key atrule">static-file-path</span><span class="token punctuation">:</span> ./static/upload
      <span class="token key atrule">static-location</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//demo2.jetlinks.org<span class="token punctuation">:</span>8080/upload   <span class="token comment"># 此地址为服务器域名，将通过nginx代理到固定服务器上</span>
  <span class="token key atrule">webflux</span><span class="token punctuation">:</span>
    <span class="token key atrule">response-wrapper</span><span class="token punctuation">:</span> enabled <span class="token comment">#开启响应包装器(将返回值包装为ResponseMessage)</span>
  <span class="token comment">#  auth:   #默认的用户配置</span>
  <span class="token comment">#    users:</span>
  <span class="token comment">#      admin:</span>
  <span class="token comment">#        username: admin</span>
  <span class="token comment">#        password: admin</span>
  <span class="token comment">#        name: 超级管理员</span>
  <span class="token key atrule">authorize</span><span class="token punctuation">:</span>
    <span class="token key atrule">auto-parse</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">cache</span><span class="token punctuation">:</span>
    <span class="token key atrule">type</span><span class="token punctuation">:</span> redis
    <span class="token key atrule">redis</span><span class="token punctuation">:</span>
      <span class="token key atrule">local-cache-type</span><span class="token punctuation">:</span> guava
<span class="token key atrule">jetlinks</span><span class="token punctuation">:</span>
  <span class="token key atrule">server-id</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>spring.application.name<span class="token punctuation">}</span><span class="token punctuation">:</span>$<span class="token punctuation">{</span>server.port<span class="token punctuation">}</span> <span class="token comment">#设备服务网关服务ID,不同服务请设置不同的ID</span>
  <span class="token key atrule">logging</span><span class="token punctuation">:</span>
    <span class="token key atrule">system</span><span class="token punctuation">:</span>
      <span class="token key atrule">context</span><span class="token punctuation">:</span>
        <span class="token key atrule">server</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>spring.application.name<span class="token punctuation">}</span>
  <span class="token key atrule">protocol</span><span class="token punctuation">:</span>
    <span class="token key atrule">spi</span><span class="token punctuation">:</span>
      <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment"># 为true时开启自动加载通过依赖引入的协议包</span>
<span class="token key atrule">rule</span><span class="token punctuation">:</span>
  <span class="token key atrule">engine</span><span class="token punctuation">:</span>
    <span class="token key atrule">server-id</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>jetlinks.server<span class="token punctuation">-</span>id<span class="token punctuation">}</span>
    <span class="token key atrule">server-name</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>spring.application.name<span class="token punctuation">}</span>
<span class="token key atrule">logging</span><span class="token punctuation">:</span>
  <span class="token key atrule">level</span><span class="token punctuation">:</span>
    <span class="token key atrule">org.jetlinks</span><span class="token punctuation">:</span> info
    <span class="token key atrule">rule.engine</span><span class="token punctuation">:</span> info
    <span class="token key atrule">org.hswebframework</span><span class="token punctuation">:</span> debug
    <span class="token key atrule">org.springframework.transaction</span><span class="token punctuation">:</span> debug
    <span class="token key atrule">org.springframework.data.r2dbc.connectionfactory</span><span class="token punctuation">:</span> debug
    <span class="token key atrule">io.micrometer</span><span class="token punctuation">:</span> warn
    <span class="token key atrule">org.hswebframework.expands</span><span class="token punctuation">:</span> error
    <span class="token key atrule">system</span><span class="token punctuation">:</span> warn
    <span class="token key atrule">org.jetlinks.rule.engine</span><span class="token punctuation">:</span> info
    <span class="token key atrule">org.jetlinks.gateway</span><span class="token punctuation">:</span> info
    <span class="token key atrule">org.springframework</span><span class="token punctuation">:</span> warn
    <span class="token key atrule">org.apache.kafka</span><span class="token punctuation">:</span> warn
    <span class="token key atrule">org.jetlinks.pro.device.message.writer</span><span class="token punctuation">:</span> debug
  <span class="token comment">#    org.elasticsearch: error</span>
  <span class="token key atrule">config</span><span class="token punctuation">:</span> classpath<span class="token punctuation">:</span>logback<span class="token punctuation">-</span>spring.xml
<span class="token key atrule">vertx</span><span class="token punctuation">:</span>
  <span class="token key atrule">max-event-loop-execute-time-unit</span><span class="token punctuation">:</span> seconds
  <span class="token key atrule">max-event-loop-execute-time</span><span class="token punctuation">:</span> <span class="token number">30</span>
  <span class="token key atrule">max-worker-execute-time-unit</span><span class="token punctuation">:</span> seconds
  <span class="token key atrule">max-worker-execute-time</span><span class="token punctuation">:</span> <span class="token number">30</span>
  <span class="token key atrule">prefer-native-transport</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>

<span class="token key atrule">micrometer</span><span class="token punctuation">:</span>
  <span class="token key atrule">time-series</span><span class="token punctuation">:</span>
    <span class="token key atrule">tags</span><span class="token punctuation">:</span>
      <span class="token key atrule">server</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>spring.application.name<span class="token punctuation">}</span>
    <span class="token key atrule">metrics</span><span class="token punctuation">:</span>
      <span class="token key atrule">default</span><span class="token punctuation">:</span>
        <span class="token key atrule">step</span><span class="token punctuation">:</span> 30s
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br></div></div><p>注意：</p> <p>在多台服务器上启动jetlinks，配置中的jetlinks.server-id必须互不相同。</p> <p>在项目根目录执行：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>mvn clean package -DskipTests
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol><li>分别在三台服务器上启动jetlinks 文档以脚本方式启动，脚本如下：</li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token function">nohup</span> java -jar -Dspring.application.name<span class="token operator">=</span>jetlinks-cluster-test-3   jetlinks-standalone.jar <span class="token operator">&gt;</span>jetlinks-pro.log <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> <span class="token operator">&amp;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>注意：</p> <p>三台服务启动的jetlinks.server-id应该互不相同，在application.yml中jetlinks.server-id引用了spring.application.name，所以此处的name应不相同。</p> <h2 id="nginx配置"><a href="#nginx配置" class="header-anchor">#</a> nginx配置</h2> <p>通过nginx来代理前后端。</p> <ol><li>安装nginx
前往官网<a href="https://nginx.org/download/" target="_blank" rel="noopener noreferrer">下载 (opens new window)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>下载完成后解压、编译、安装。</li> <li>修改配置文件</li></ol> <p>配置文件如下：</p> <div class="language-text line-numbers-mode"><pre class="language-text"><code>upstream iotserver {
  server 172.16.4.11:8844;
  server 172.16.4.12:8844;
  server 172.16.4.13:8844;
}

upstream webserver {
  server 172.16.4.11:9000;
}

upstream fileserver {
  server 172.16.4.11:8844; #此处指定文件上传到该服务器上
}

server {

  listen       8080;
  server_name  demo2.jetlinks.cn;

  location ^~/upload/ {
    proxy_pass http://fileserver;
    proxy_set_header Host $host:$server_port;
    proxy_set_header X-Real-IP  $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
  }

  location ^~/jetlinks/file/static {
    proxy_pass http://fileserver/file/static;
    proxy_set_header X-Forwarded-Proto $scheme;
    proxy_set_header Host $host:$server_port;
    proxy_set_header X-Real-IP  $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_send_timeout      30m;
    proxy_read_timeout      30m;
    client_max_body_size    100m;
  }

  location ^~/jetlinks/ {
    proxy_pass http://iotserver/;
    proxy_set_header X-Forwarded-Proto $scheme;
    proxy_set_header Host $host:$server_port;
    proxy_set_header X-Real-IP  $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection &quot;upgrade&quot;;
    proxy_connect_timeout   1;
    proxy_buffering off;
    chunked_transfer_encoding off;
    proxy_cache off;
    proxy_send_timeout      30m;
    proxy_read_timeout      30m;
    client_max_body_size    100m;
  }

  location / {
    proxy_pass http://webserver/;
  }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br></div></div><ol><li>启动</li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>systemctl status nginx.service
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="tcp负载均衡配置方式"><a href="#tcp负载均衡配置方式" class="header-anchor">#</a> tcp负载均衡配置方式</h2> <p>用于代理设备连接。此处使用nginx作为演示,也可以使用LVS,haProxy等方式。</p> <p>配置文件：</p> <div class="language-text line-numbers-mode"><pre class="language-text"><code>load_module /usr/lib/nginx/modules/ngx_stream_module.so;
user  root;
worker_processes  1;

error_log  /etc/nginx/log/error.log warn;
pid        /var/run/nginx.pid;


events {
    worker_connections  1024;
}

stream {
   
   upstream tcp-test {
       hash $remote_addr consistent;
       server 172.16.4.13:1889 max_fails=3 fail_timeout=10s;
       #server 172.16.4.12:1889 max_fails=3 fail_timeout=10s;
       server 172.16.4.11:1889 max_fails=3 fail_timeout=10s;
   }

   server {
     
       listen 1884;
     
       proxy_pass tcp-test;
  
       proxy_connect_timeout 30s;
  
       proxy_timeout 30s;
   }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><p>注意：</p> <p>此配置监听的MQTT的1884端口，代理到服务器上的1889。如需代理自定义端口需保持代理端口与jetlinks平台中网络组件开启的端口一致。 如此处平台中MQTT服务网络组件设置的端口应为1889。</p> <h1 id="启动大屏"><a href="#启动大屏" class="header-anchor">#</a> 启动大屏</h1> <p>jetlinks的可视化数据大屏的前端是独立的，启动完jetlinks的平台前端和后端服务，如果你需要使用大屏可视化，还需要启动大屏前端。</p> <p>注意</p> <p>可视化数据大屏设计器基于<a href="https://www.avuejs.com/" target="_blank" rel="noopener noreferrer">Avue (opens new window)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>二次开发,暂未免费开源 (企业版中提供)</p> <h2 id="本地启动"><a href="#本地启动" class="header-anchor">#</a> 本地启动</h2> <p>下载大屏前端代码：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">git</span> clone https://github.com/jetlinks/jetlinks-big-screen.git
$ <span class="token builtin class-name">cd</span> jetlinks-big-screen
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>修改后台接口地址：进入vue.config.js，修改后端请求地址</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">proxy</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string-property property">&quot;/jetlinks&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">&quot;http://demo.jetlinks.cn/jetlinks&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 你的后端地址</span>
                <span class="token literal-property property">changeOrigin</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                <span class="token literal-property property">ws</span><span class="token operator">:</span> <span class="token string">&quot;ws://demo.jetlinks.cn/jetlinks&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 你的后端websocket地址</span>
                <span class="token literal-property property">pathRewrite</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token string-property property">'^/jetlinks'</span><span class="token operator">:</span> <span class="token string">''</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>启动：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token builtin class-name">cd</span> jetlinks-big-screen
$ <span class="token function">npm</span> <span class="token function">install</span>
$ <span class="token function">npm</span> run serve 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="docker启动"><a href="#docker启动" class="header-anchor">#</a> docker启动</h2> <p>可通过docker镜像启动大屏，执行性如下命令：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> run -d -e <span class="token string">&quot;API_BASE_PATH=http://host.docker.internal:8844/&quot;</span> --name<span class="token operator">=</span>big-screen -p <span class="token number">9002</span>:80 registry.cn-shenzhen.aliyuncs.com/jetlinks-pro/jetlinks-big-screen:1.0.0
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>或者在docker-compose.yml中加入如下配置：</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code>  <span class="token key atrule">big-screen</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> registry.cn<span class="token punctuation">-</span>shenzhen.aliyuncs.com/jetlinks<span class="token punctuation">-</span>pro/jetlinks<span class="token punctuation">-</span>big<span class="token punctuation">-</span>screen<span class="token punctuation">:</span>1.0.0
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> big<span class="token punctuation">-</span>screen
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> 9002<span class="token punctuation">:</span><span class="token number">80</span>
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;API_BASE_PATH=http://192.168.3.25:8844/&quot;</span> <span class="token comment">#API根路径</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>注意：</p> <p>API_BASE_PATH为jetlinks服务地址。</p> <h2 id="jetlinks配置修改"><a href="#jetlinks配置修改" class="header-anchor">#</a> jetlinks配置修改</h2> <p>在jetlinks中修改大屏跳转地址： jetlinks-pro/jetlinks-standalone/src/main/resources/application.yml</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">api</span><span class="token punctuation">:</span>
  <span class="token key atrule">urls</span><span class="token punctuation">:</span>
    <span class="token key atrule">big-screen-path</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>9002/ <span class="token comment">#localhost根据大屏实际部署地址修改</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>创建大屏权限：进入平台，系统设置=&gt;权限管理=&gt;新建</p> <p><img src="https://image.aomtop.com/i/2022/06/24/62b52b23a3747.png" alt="创建权限"></p> <p>赋权：进入平台，系统设置=&gt;用户管理=&gt;赋权，给用户赋权：</p> <p><img src="https://image.aomtop.com/i/2022/06/24/62b52b23e26fe.png" alt="image-20201123170823171"></p> <p>然后通过平台的大屏管理进入大屏：</p> <p><img src="https://image.aomtop.com/i/2022/06/24/62b52b2432d75.png" alt="image-20201123151335501"></p></div></div> <div class="page-slot page-slot-bottom"><!-- 横向自适应 -->
      <ins class="adsbygoogle"
          style="display:block"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="6620245489"
          data-ad-format="auto"
          data-full-width-responsive="true"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div> <div class="page-edit"><!----> <!----> <!----></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/baa2d9/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">wireshark分析</div></a> <a href="/pages/4c763a/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">Nacos安装指南</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/baa2d9/" class="prev">wireshark分析</a></span> <span class="next"><a href="/pages/4c763a/">Nacos安装指南</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/613b69/"><div>
            postgresql安装
            <!----></div></a> <span class="date">06-24</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/8ae632/"><div>
            oracle笔记
            <!----></div></a> <span class="date">06-24</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/765fc1/"><div>
            opengauss笔记
            <!----></div></a> <span class="date">06-24</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:48211701@qq.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/opersdev" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://all.aomtop.com" title="听音乐" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2019-2022
    <span>kevin | <a href="https://github.com/opersdev" target="_blank">小诺运维</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <div class="custom-html-window custom-html-window-rb" style="display:;"><div class="custom-wrapper"><span class="close-but">×</span> <div><!-- 固定160*160px -->
      <ins class="adsbygoogle"
          style="display:inline-block;max-width:160px;max-height:160px"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="8377369658"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
      </div></div></div></div><div class="global-ui"><div></div></div></div>
    <script src="/assets/js/app.38f1b0a4.js" defer></script><script src="/assets/js/2.6beb1dc7.js" defer></script><script src="/assets/js/103.3bcf44f5.js" defer></script>
  </body>
</html>
